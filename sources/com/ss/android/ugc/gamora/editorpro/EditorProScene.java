package com.ss.android.ugc.gamora.editorpro;

import X.AbstractC56012Ht;
import X.AnonymousClass509;
import X.AnonymousClass515;
import X.AnonymousClass516;
import X.AnonymousClass519;
import X.AnonymousClass522;
import X.AnonymousClass523;
import X.AnonymousClass525;
import X.AnonymousClass535;
import X.AnonymousClass564;
import X.AnonymousClass569;
import X.AnonymousClass585;
import X.AnonymousClass629;
import X.AnonymousClass636;
import X.AnonymousClass645;
import X.AnonymousClass668;
import X.C00F;
import X.C018905p;
import X.C06460Ne;
import X.C07080Po;
import X.C0A2;
import X.C0A6;
import X.C10K;
import X.C110674Vz;
import X.C120864ok;
import X.C123254sb;
import X.C123444su;
import X.C124574uj;
import X.C124584uk;
import X.C124604um;
import X.C124614un;
import X.C125154vf;
import X.C125594wN;
import X.C125944ww;
import X.C125954wx;
import X.C126784yI;
import X.C127344zC;
import X.C127594zb;
import X.C127604zc;
import X.C127834zz;
import X.C1278850e;
import X.C1280550v;
import X.C1281551f;
import X.C1282051k;
import X.C1284452i;
import X.C1286353b;
import X.C1289554h;
import X.C1293955z;
import X.C1297157f;
import X.C130695Az;
import X.C131935Ft;
import X.C131985Fy;
import X.C132005Ga;
import X.C132045Ge;
import X.C132075Gh;
import X.C132085Gi;
import X.C132105Gk;
import X.C132115Gl;
import X.C132165Gq;
import X.C132185Gs;
import X.C132205Gu;
import X.C132225Gw;
import X.C132385Hm;
import X.C132565Ie;
import X.C132575If;
import X.C132585Ig;
import X.C132815Jd;
import X.C133005Jw;
import X.C133195Kp;
import X.C133235Kt;
import X.C133245Ku;
import X.C134215On;
import X.C134665Qg;
import X.C134855Qz;
import X.C135075Rv;
import X.C135125Sa;
import X.C136305Wo;
import X.C136685Ya;
import X.C136935Yz;
import X.C137045Zk;
import X.C138525c8;
import X.C139795eB;
import X.C141085gG;
import X.C142125hw;
import X.C143525kC;
import X.C146535p3;
import X.C147095px;
import X.C151555x9;
import X.C151885xg;
import X.C151915xj;
import X.C1533360b;
import X.C1539662m;
import X.C1551667c;
import X.C162366Yu;
import X.C162696a1;
import X.C165706es;
import X.C16880lQ;
import X.C16970lZ;
import X.C170746n0;
import X.C221108m2;
import X.C26227ARb;
import X.C29S;
import X.C2LD;
import X.C2ND;
import X.C2VQ;
import X.C32151Nz;
import X.C3AW;
import X.C42315Gj9;
import X.C42470Gle;
import X.C43045Guv;
import X.C44384HbQ;
import X.C46104I7o;
import X.C47261Igj;
import X.C48295IxP;
import X.C48841JEv;
import X.C50Q;
import X.C51E;
import X.C51Z;
import X.C52467KiV;
import X.C52B;
import X.C52G;
import X.C52O;
import X.C52Q;
import X.C52T;
import X.C52V;
import X.C53H;
import X.C55G;
import X.C55Y;
import X.C58D;
import X.C5B0;
import X.C5BA;
import X.C5CK;
import X.C5DC;
import X.C5DE;
import X.C5DF;
import X.C5DH;
import X.C5DJ;
import X.C5FC;
import X.C5FE;
import X.C5FF;
import X.C5G0;
import X.C5G1;
import X.C5G5;
import X.C5G6;
import X.C5H0;
import X.C5H1;
import X.C5H3;
import X.C5H6;
import X.C5H7;
import X.C5HA;
import X.C5HC;
import X.C5HD;
import X.C5HR;
import X.C5HS;
import X.C5HY;
import X.C5I4;
import X.C5K0;
import X.C5K1;
import X.C5L7;
import X.C5QW;
import X.C5QZ;
import X.C5RQ;
import X.C60191Njn;
import X.C60903NvH;
import X.C62819Ol5;
import X.C62822Ol8;
import X.C62848OlY;
import X.C63081OpJ;
import X.C63942P7q;
import X.C68M;
import X.C68W;
import X.C6B9;
import X.C6BI;
import X.C6YK;
import X.C73994T2g;
import X.C76732zl;
import X.C76800UCe;
import X.C78685UuP;
import X.C78688UuS;
import X.C78764Uvg;
import X.C78882Uxa;
import X.C78915Uy7;
import X.C78923UyF;
import X.C79057V0z;
import X.C7MY;
import X.C81184Vtc;
import X.C82622Wbi;
import X.C83547Wqd;
import X.C84363X9b;
import X.C84518XFa;
import X.C86793Y4n;
import X.EnumC123864ta;
import X.EnumC123874tb;
import X.EnumC126814yL;
import X.EnumC127354zD;
import X.EnumC127484zQ;
import X.EnumC1289754j;
import X.EnumC132095Gj;
import X.EnumC151655xJ;
import X.EnumC58928NAu;
import X.FFL;
import X.FMX;
import X.G8G;
import X.GHB;
import X.H78;
import X.H7C;
import X.H8F;
import X.HandlerC1283652a;
import X.InterfaceC126614y1;
import X.InterfaceC127674zj;
import X.InterfaceC127684zk;
import X.InterfaceC1278950f;
import X.InterfaceC1279450k;
import X.InterfaceC1290554r;
import X.InterfaceC1294756h;
import X.InterfaceC132055Gf;
import X.InterfaceC132255Gz;
import X.InterfaceC132925Jo;
import X.InterfaceC133285Ky;
import X.InterfaceC144185lG;
import X.InterfaceC151935xl;
import X.InterfaceC151945xm;
import X.InterfaceC36571c5;
import X.InterfaceC45540Hu4;
import X.InterfaceC45930I0w;
import X.InterfaceC63764P0u;
import X.InterfaceC65784Pro;
import X.InterfaceC67352kd;
import X.InterfaceC70422pa;
import X.InterfaceC79150V4o;
import X.InterfaceC83564Wqu;
import X.InterfaceC88474Ynu;
import X.L5I;
import X.ORZ;
import X.OSZ;
import X.SFS;
import X.T2J;
import X.TBT;
import X.UC0;
import X.V2B;
import X.W5G;
import X.WM7;
import X.WMH;
import X.X1D;
import X.XKX;
import X.XTV;
import Y.ACallableS105S0100000_2;
import Y.ACallableS80S0200000_2;
import Y.ALAdapterS1S0100000_2;
import Y.ALAdapterS1S0110000_2;
import Y.AObserverS66S0200000_2;
import Y.AObserverS70S0100000_2;
import Y.ARunnableS6S0400000_2;
import Y.AgS107S0200000_2;
import Y.IDComparatorS30S0000000_2;
import android.app.Activity;
import android.app.Application;
import android.content.Context;
import android.content.Intent;
import android.graphics.Point;
import android.graphics.Typeface;
import android.os.Bundle;
import android.text.TextUtils;
import android.util.DisplayMetrics;
import android.util.Pair;
import android.view.Display;
import android.view.LayoutInflater;
import android.view.SurfaceView;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewStub;
import android.view.ViewTreeObserver;
import android.view.Window;
import android.widget.FrameLayout;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;
import android.widget.TextView;
import androidx.constraintlayout.widget.ConstraintLayout;
import androidx.lifecycle.Lifecycle;
import androidx.lifecycle.MutableLiveData;
import androidx.lifecycle.Observer;
import androidx.lifecycle.ViewModelProvider;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;
import com.bytedance.als.ui.state.LiveState;
import com.bytedance.android.livesdk.livesetting.level.UserLevelGeckoUpdateSetting;
import com.bytedance.bpea.cert.token.TokenCert;
import com.bytedance.ies.nle.editor_jni.LogLevel;
import com.bytedance.ies.nle.editor_jni.NLEEditor;
import com.bytedance.ies.nle.editor_jni.NLEEditorJniJNI;
import com.bytedance.ies.nle.editor_jni.NLEEditorListener;
import com.bytedance.ies.nle.editor_jni.NLELoggerListener;
import com.bytedance.ies.nle.editor_jni.NLEModel;
import com.bytedance.ies.nle.editor_jni.NLENode;
import com.bytedance.ies.nle.editor_jni.NLEResourceNode;
import com.bytedance.ies.nle.editor_jni.NLESegment;
import com.bytedance.ies.nle.editor_jni.NLESegmentAudio;
import com.bytedance.ies.nle.editor_jni.NLESegmentSubtitleSticker;
import com.bytedance.ies.nle.editor_jni.NLETrack;
import com.bytedance.ies.nle.editor_jni.NLETrackSlot;
import com.bytedance.ies.nle.editor_jni.PairIntInt;
import com.bytedance.ies.nle.editor_jni.VecNLETrackSPtr;
import com.bytedance.ies.nle.editor_jni.VecNLETrackSlotSPtr;
import com.bytedance.ies.nleeditor.NLE;
import com.bytedance.scene.ktx.SceneExtensionsKt;
import com.bytedance.tux.input.TuxTextView;
import com.bytedance.tux.sheet.sheet.TuxSheet;
import com.google.gson.m;
import com.google.gson.reflect.TypeToken;
import com.ss.android.ugc.aweme.creative.model.CreativeModel;
import com.ss.android.ugc.aweme.creative.model.InlineCaptionModel;
import com.ss.android.ugc.aweme.creative.model.SoundEffect;
import com.ss.android.ugc.aweme.creative.model.SoundEffectInfoModel;
import com.ss.android.ugc.aweme.creative.model.music.MusicBuzModel;
import com.ss.android.ugc.aweme.creative.model.publish.PostPageModel;
import com.ss.android.ugc.aweme.editSticker.text.bean.TextStickerData;
import com.ss.android.ugc.aweme.music.model.MusicBeanUtilKt;
import com.ss.android.ugc.aweme.services.uikit.CreativeToastBuilder;
import com.ss.android.ugc.aweme.shortvideo.AVMusic;
import com.ss.android.ugc.aweme.shortvideo.edit.EditorProModel;
import com.ss.android.ugc.aweme.shortvideo.edit.VideoPublishEditModel;
import com.ss.android.ugc.aweme.shortvideo.edit.capcut.EditCapCutViewModel;
import com.ss.android.ugc.aweme.shortvideo.edit.multiedit.data.MultiEditVideoRecordData;
import com.ss.android.ugc.aweme.shortvideo.edit.multiedit.data.MultiEditVideoStatusRecordData;
import com.ss.android.ugc.aweme.utils.ActivityStack;
import com.ss.android.ugc.gamora.editorpro.EditorProScene;
import com.ss.android.ugc.gamora.editorpro.audio.AudioRecordActivityViewModel;
import com.ss.android.ugc.gamora.editorpro.datastore.EditModelProvider;
import com.ss.android.ugc.gamora.editorpro.model.EditorProCancelData;
import com.ss.android.ugc.gamora.editorpro.model.EditorProSaveData;
import com.ss.android.ugc.gamora.editorpro.sticker.text.ColorPickerFragment;
import com.ss.android.ugc.gamora.editorpro.sticker.text.ColorPickerViewModel;
import com.ss.android.ugc.gamora.editorpro.views.InterceptConstraintLayout;
import com.ss.android.ugc.gamora.editorpro.views.InterceptorFrameLayout;
import com.ss.android.vesdk.VERecordData;
import com.ss.ugc.android.editor.base.functions.DynamicBottomItem;
import com.ss.ugc.android.editor.base.functions.DynamicBottomOrderModel;
import com.ss.ugc.android.editor.base.viewmodel.FunctionBarViewModel;
import com.ss.ugc.android.editor.components.base.api.IFunctionBarService;
import com.ss.ugc.android.editor.core.EditorProContext;
import com.ss.ugc.android.editor.preview.PreviewPanelViewModel;
import com.ss.ugc.android.editor.track.TrackState;
import com.ss.ugc.android.editor.track.viewmodels.FrameCacheViewModel;
import com.ss.ugc.android.editor.track.viewmodels.TrackPanelViewModel;
import com.zhiliaoapp.musically.R;
import defpackage.e1;
import defpackage.g0;
import defpackage.i0;
import java.util.ArrayList;
import java.util.Collection;
import java.util.HashMap;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Stack;
import java.util.UUID;
import java.util.concurrent.ConcurrentHashMap;
import kotlin.jvm.internal.AqS133S0200000_2;
import kotlin.jvm.internal.AqS148S0200000_1;
import kotlin.jvm.internal.AqS149S0200000_2;
import kotlin.jvm.internal.AqS152S0100000_2;
import kotlin.jvm.internal.AqS165S0200000_2;
import kotlin.jvm.internal.AqS168S0100000_2;
import kotlin.jvm.internal.AqS35S0210000_2;
import kotlin.jvm.internal.AqS45S0110000_2;
import kotlin.jvm.internal.AqS91S0300000_2;
import kotlin.jvm.internal.IDqS181S0200000_2;
import kotlin.jvm.internal.o;

/* loaded from: classes3.dex */
public final class EditorProScene extends AbstractC56012Ht<C132225Gw, C132075Gh> implements InterfaceC83564Wqu, InterfaceC127674zj, InterfaceC45540Hu4 {
    public final C5H3 actionMenuController$delegate;
    public View advancedEditorCancel;
    public View advancedEditorSave;
    public TuxTextView advancedEditorTitle;
    public View advancedEditorWarning;
    public boolean advancedEditorWarningShown;
    public String afterRetakeCommitId;
    public final C5H3 animationController$delegate;
    public final C5H3 audioRecordAnimation$delegate;
    public String beforeRetakeCommitId;
    public C1289554h bottomBarGuideController;
    public C151885xg canvasView;
    public final C5H3 capCutTuxSheet$delegate;
    public final C5H3 capCutViewModel$delegate;
    public ConstraintLayout contentView;
    public C52T controlBar;
    public final InterfaceC70422pa coroutineScope;
    public NLETrackSlot currentInEditTextSlot;
    public C1551667c currentInEditTextView;
    public float currentVerticalOffset;
    public boolean delayOnShow;
    public W5G designerAvatarView;
    public TuxTextView designerNameView;
    public ConstraintLayout dyActionBar;
    public InterceptorFrameLayout dyPreviewContainer;
    public InterceptConstraintLayout dyRoot;
    public float editPageTextInputPositionY;
    public int editPageTextLayoutHeight;
    public int editPageTextLayoutWidth;
    public int editorMode;
    public C133245Ku editorProAIMusicPanelRouter;
    public String editorProAnchorType;
    public C136935Yz editorProFileCenter;
    public C5DC editorProGuidanceController;
    public InterceptorFrameLayout editorProGuideGestureView;
    public final C5H3 editorProGuideOnKeyDownListener$delegate;
    public InterfaceC1294756h editorProInitApi;
    public C132045Ge editorProInitData;
    public final C5H3 editorProPerfManager$delegate;
    public C1297157f editorProTransitionGuideController;
    public LinearLayout effectDesignerInfoLayout;
    public boolean effectMode;
    public final boolean enableDirectToPublish;
    public long enterEPTime;
    public String enterFrom;
    public boolean exitByBackPressed;
    public final C5H3 fullScreenService$delegate;
    public IFunctionBarService funcBarService;
    public boolean inCaptionEditing;
    public C5K1 inlineCaptionCaches;
    public boolean isAsyncInitialization;
    public boolean isBottomAnim;
    public Boolean isFirstEnterEditorPro;
    public boolean isFromReshoot;
    public boolean isFromTextDuration;
    public boolean isInit;
    public boolean isMultiRecord;
    public boolean isOnShow;
    public boolean isRotate;
    public boolean isUserIntercepted;
    public C83547Wqd keyboardListener;
    public long lastMusicSyncTime;
    public boolean lastPanelBounceEvent;
    public long lastPlayTime;
    public String lifecycleToken;
    public boolean multipleOnStartInOneEdit;
    public InterfaceC132055Gf musicController;
    public String nleData;
    public NLEEditorListener nleEditorListener;
    public C51Z nleSessionHolder;
    public final C125594wN nleUndoRedoListener;
    public final C132165Gq onBackgroundListener;
    public final LinkedList<C5HC> onKeyDownList;
    public InterfaceC1278950f previewPanel;
    public InterceptorFrameLayout previewPanelContainerView;
    public final C5H3 previewPanelViewModel$delegate;
    public float previewTopLength;
    public final C5H3 rotateHandler$delegate;
    public TextView rotateTipsView;
    public InterfaceC79150V4o saveJob;
    public long seekPosition;
    public NLETrackSlot selectSlotFromOut;
    public InterfaceC1279450k soundEffectController;
    public FrameLayout stubLayout;
    public float textEditLayoutTargetPositionX;
    public float textEditLayoutTargetPositionY;
    public C132005Ga textMaterial;
    public Long totalPlayTime;
    public C51E trackPanelApi;
    public boolean updateFromOuter;
    public C125154vf videoEffectController;
    public View viewFullBg;
    public String viewModelProviderToken;
    public static final C132085Gi Companion = new C132085Gi();
    public static final int CONSOLE_CONTAINER_HEIGHT = SFS.LJI(44.0d);
    public static final int FUNCTION_BAR_HEIGHT = SFS.LJI(62.0d);
    public final C5H3 editorContext$delegate = C221108m2.LIZIZ(new AqS152S0100000_2(this, 542));
    public final C5H3<C1539662m> textStickerEditLayoutDelegate = C221108m2.LIZIZ(new AqS152S0100000_2(this, 556));
    public int canvasControlInitHeight = -1;
    public final C5H3 transitionGuideView$delegate = C221108m2.LIZIZ(new AqS152S0100000_2(this, 558));
    public final ArrayList<AVMusic> musicSyncMusicList = new ArrayList<>();
    public final C5H3 playground$delegate = C221108m2.LIZIZ(new AqS152S0100000_2(this, 535));
    public boolean isFirstLoadNLEModel = true;
    public boolean isFirstOnStart = true;
    public boolean isFirstOnResume = true;
    public long maxLimitTimeMillis = ((Number) C5BA.LIZ(EnumC127484zQ.MAX_EDIT_VIDEO_LIMIT_TIME_MILLIS, Long.MAX_VALUE)).longValue();
    public final C123444su originVolumeCompat = new C123444su();
    public final ArrayList<InterfaceC127684zk> activityResultListeners = new ArrayList<>();
    public final C5H3 onActivityResultListener$delegate = C221108m2.LIZIZ(new AqS152S0100000_2(this, 557));
    public final C5H3 onBackPressListener$delegate = C221108m2.LIZIZ(new AqS152S0100000_2(this, 560));
    public final C5H3 canvasViewObservePanelShowing$delegate = C221108m2.LIZIZ(new AqS152S0100000_2(this, 536));
    public boolean isAnimOutFinish = true;
    public final HashMap<String, InterfaceC45930I0w> userCache = new HashMap<>();
    public C132185Gs audioTrackChecker = new C132185Gs();
    public boolean firstEnter = true;

    public static final int getTrackPanelHeight() {
        Companion.getClass();
        return C132085Gi.LIZ();
    }

    private final void initCKSupportAbility() {
        String uuid;
        C5G1 c5g1 = new C5G1(this) { // from class: X.5G2
            public final WM7 LIZ;

            @Override // X.C5G1
            public final ViewModelProvider get() {
                return C165706es.LJIIIIZZ(this.LIZ, null, null, 6);
            }

            {
                o.LJIIIZ(this, "scene");
                this.LIZ = this;
            }
        };
        String LIZ = AnonymousClass629.LIZ("randomUUID().toString()");
        C5G0.LIZ.put(LIZ, c5g1);
        C5G0.LIZJ.push(LIZ);
        C5G0.LIZIZ = true;
        this.viewModelProviderToken = LIZ;
        C5G5 c5g5 = C5G5.LIZ;
        C5G6 c5g6 = new C5G6(this) { // from class: X.5G7
            public final WM7 LIZ;

            @Override // X.C5G6
            public final WM7 getLifecycleOwner() {
                return this.LIZ;
            }

            {
                o.LJIIIZ(this, "scene");
                this.LIZ = this;
            }
        };
        synchronized (c5g5) {
            uuid = UUID.randomUUID().toString();
            o.LJIIIIZZ(uuid, "randomUUID().toString()");
            C5G5.LIZJ.put(uuid, c5g6);
            C5G5.LIZIZ.put(uuid, new ArrayList<>());
            C5G5.LIZLLL.push(uuid);
        }
        this.lifecycleToken = uuid;
    }

    private final void updateSurfaceSizeInternal() {
        int i;
        SurfaceView Jq;
        if (this.dyPreviewContainer == null) {
            return;
        }
        AqS165S0200000_2 aqS165S0200000_2 = new AqS165S0200000_2(getEditorContext().getNleSession().P8().LJIIJ(), this, 2);
        C76732zl c76732zl = new C76732zl();
        InterfaceC1278950f interfaceC1278950f = this.previewPanel;
        if (interfaceC1278950f != null && (Jq = interfaceC1278950f.Jq()) != null) {
            i = Jq.getWidth();
        } else {
            i = 0;
        }
        c76732zl.element = i;
        C76732zl c76732zl2 = new C76732zl();
        int height = getDyPreviewContainer().getHeight();
        c76732zl2.element = height;
        int i2 = c76732zl.element;
        if (i2 != 0 && height != 0) {
            aqS165S0200000_2.invoke(Integer.valueOf(i2), Integer.valueOf(c76732zl2.element));
        } else {
            getDyPreviewContainer().post(new ARunnableS6S0400000_2(this, c76732zl, c76732zl2, aqS165S0200000_2, 4));
        }
    }

    public final void dispatchHide() {
        this.delayOnShow = false;
        onHide();
    }

    public final List<C136305Wo> getExitDialogItem() {
        return C47261Igj.LJJIJIIJI(new C136305Wo(0, R.string.e2u, 0, new AqS152S0100000_2(this, 545), false, false, new OSZ(Float.valueOf(C32151Nz.LJIIZILJ(14)), Float.valueOf(C32151Nz.LJIIZILJ(14))), 441), new C136305Wo(0, R.string.fnl, 0, new AqS152S0100000_2(this, 547), false, false, new OSZ(Float.valueOf(C32151Nz.LJIIZILJ(14)), Float.valueOf(C32151Nz.LJIIZILJ(14))), 441));
    }

    public final void handleSaveAsync() {
        updateExitMobParam();
        updateExitStatus$default(this, false, false, 3, null);
        updateModelAndSave$default(this, false, 1, null);
        C136935Yz c136935Yz = this.editorProFileCenter;
        if (c136935Yz != null) {
            C10K.LIZJ(new ACallableS105S0100000_2(c136935Yz, 28));
        }
        exitPage$default(this, true, this.nleData, C79057V0z.LJJI(getEditorContext()), false, 8, null);
    }

    @Override // X.InterfaceC83564Wqu
    public void keyBoardModify(int i) {
    }

    public final void markUpdateFromOuter() {
        this.updateFromOuter = true;
        getEditorContext().getPlayer().M9(0L);
        getEditorContext().getPlayer().pause();
        C79057V0z.LJIILJJIL(getEditorContext(), true);
        C79057V0z.LJJ(getEditorContext()).LJIIIZ(0L, 0L);
        refreshUndoRedoState(false, false);
    }

    public final void mobFuncBarShowEvent() {
        final RecyclerView LIZIZ;
        final C50Q funcBarController = getFuncBarController();
        if (funcBarController != null && !this.isFromReshoot && (LIZIZ = funcBarController.LJIILIIL().LIZIZ()) != null) {
            final C76732zl c76732zl = new C76732zl();
            c76732zl.element = -1;
            final C76732zl c76732zl2 = new C76732zl();
            c76732zl2.element = -1;
            ViewTreeObserver viewTreeObserver = LIZIZ.getViewTreeObserver();
            if (viewTreeObserver != null) {
                viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() { // from class: X.53w
                    @Override // android.view.ViewTreeObserver.OnGlobalLayoutListener
                    public final void onGlobalLayout() {
                        LinearLayoutManager linearLayoutManager;
                        List<AnonymousClass523> LJII;
                        C0A2 layoutManager = RecyclerView.this.getLayoutManager();
                        if ((layoutManager instanceof LinearLayoutManager) && (linearLayoutManager = (LinearLayoutManager) layoutManager) != null) {
                            C76732zl c76732zl3 = c76732zl;
                            C76732zl c76732zl4 = c76732zl2;
                            EditorProScene editorProScene = this;
                            c76732zl3.element = linearLayoutManager.LLILL();
                            c76732zl4.element = linearLayoutManager.LLILLJJLI();
                            C40517FvF c40517FvF = new C40517FvF(c76732zl3.element, c76732zl4.element);
                            ArrayList arrayList = new ArrayList();
                            C50Q funcBarController2 = editorProScene.getFuncBarController();
                            if (funcBarController2 != null && (LJII = funcBarController2.LJII()) != null) {
                                int i = 0;
                                for (AnonymousClass523 anonymousClass523 : LJII) {
                                    int i2 = i + 1;
                                    if (i >= 0) {
                                        AnonymousClass523 anonymousClass5232 = anonymousClass523;
                                        int i3 = c40517FvF.LJLIL;
                                        if (i <= c40517FvF.LJLILLLLZI && i3 <= i) {
                                            arrayList.add(anonymousClass5232.LJ);
                                        }
                                        i = i2;
                                    } else {
                                        C47261Igj.LJJJJJ();
                                        throw null;
                                    }
                                }
                            }
                            VideoPublishEditModel editModel = editorProScene.getEditModel();
                            if (editModel != null) {
                                C5QW.LJJIJIIJIL(editModel, editorProScene.getEditorContext(), arrayList);
                            }
                        }
                        ViewTreeObserver viewTreeObserver2 = RecyclerView.this.getViewTreeObserver();
                        if (viewTreeObserver2 != null) {
                            viewTreeObserver2.removeOnGlobalLayoutListener(this);
                        }
                    }
                });
            }
            LIZIZ.LJIIJJI(new C0A6() { // from class: X.53x
                @Override // X.C0A6
                public final void LJIILJJIL(int i, RecyclerView recyclerView) {
                    VideoPublishEditModel editModel;
                    LinearLayoutManager linearLayoutManager;
                    o.LJIIIZ(recyclerView, "recyclerView");
                    if (i == 0 && (editModel = EditorProScene.this.getEditModel()) != null) {
                        RecyclerView recyclerView2 = LIZIZ;
                        C76732zl c76732zl3 = c76732zl2;
                        C76732zl c76732zl4 = c76732zl;
                        C50Q c50q = funcBarController;
                        EditorProScene editorProScene = EditorProScene.this;
                        C0A2 layoutManager = recyclerView2.getLayoutManager();
                        if ((layoutManager instanceof LinearLayoutManager) && (linearLayoutManager = (LinearLayoutManager) layoutManager) != null) {
                            int LLILLJJLI = linearLayoutManager.LLILLJJLI();
                            int LLILL = linearLayoutManager.LLILL();
                            if (LLILLJJLI > c76732zl3.element || LLILL < c76732zl4.element) {
                                ArrayList arrayList = new ArrayList();
                                C40517FvF c40517FvF = new C40517FvF(LLILL, LLILLJJLI);
                                C40517FvF c40517FvF2 = new C40517FvF(c76732zl4.element, c76732zl3.element);
                                List<AnonymousClass523> LJII = c50q.LJII();
                                if (LJII != null) {
                                    int i2 = 0;
                                    for (AnonymousClass523 anonymousClass523 : LJII) {
                                        int i3 = i2 + 1;
                                        if (i2 >= 0) {
                                            AnonymousClass523 anonymousClass5232 = anonymousClass523;
                                            int i4 = c40517FvF2.LJLIL;
                                            if (i2 > c40517FvF2.LJLILLLLZI || i4 > i2) {
                                                int i5 = c40517FvF.LJLIL;
                                                if (i2 <= c40517FvF.LJLILLLLZI && i5 <= i2) {
                                                    arrayList.add(anonymousClass5232.LJ);
                                                }
                                            }
                                            i2 = i3;
                                        } else {
                                            C47261Igj.LJJJJJ();
                                            throw null;
                                        }
                                    }
                                }
                                C5QW.LJJIJIIJIL(editModel, editorProScene.getEditorContext(), arrayList);
                                recyclerView2.LJJLL(this);
                            }
                        }
                    }
                }
            });
        }
    }

    @Override // X.InterfaceC45540Hu4
    public void registerActivityOnKeyDownListenerHead(C5HC listener) {
        o.LJIIIZ(listener, "listener");
    }

    @Override // X.InterfaceC45540Hu4
    public void registerActivityResultListener(InterfaceC144185lG listener) {
        o.LJIIIZ(listener, "listener");
    }

    @Override // X.InterfaceC45540Hu4
    public void unRegisterActivityResultListener(InterfaceC144185lG listener) {
        o.LJIIIZ(listener, "listener");
    }

    static {
        C5K0.LIZ(2);
        NLE.INSTANCE.setLogger(new NLELoggerListener() { // from class: X.5HT
            @Override // com.bytedance.ies.nle.editor_jni.NLELoggerListener
            public final void onLog(LogLevel level, String str) {
                o.LJIIIZ(level, "level");
                if (level == LogLevel.LEVEL_INFO) {
                    H7C.LJI(4, "CKEditor", null, str);
                    return;
                }
                if (level == LogLevel.LEVEL_WARNING) {
                    H7C.LJI(5, "CKEditor", null, str);
                } else if (level == LogLevel.LEVEL_ERROR) {
                    H7C.LIZLLL(C5HU.LIZIZ, str, null, null, 12);
                } else {
                    H7C.LJI(3, "CKEditor", null, str);
                }
            }
        });
    }

    private final Observer<Boolean> getCanvasViewObservePanelShowing() {
        return (Observer) this.canvasViewObservePanelShowing$delegate.getValue();
    }

    private final TuxSheet getCapCutTuxSheet() {
        return (TuxSheet) this.capCutTuxSheet$delegate.getValue();
    }

    public static final int getDefaultControlHeight() {
        Companion.getClass();
        return C132085Gi.LIZ() + CONSOLE_CONTAINER_HEIGHT + FUNCTION_BAR_HEIGHT;
    }

    private final C5DE getEditorProGuideOnKeyDownListener() {
        return (C5DE) this.editorProGuideOnKeyDownListener$delegate.getValue();
    }

    private final C143525kC getEditorProPerfManager() {
        return (C143525kC) this.editorProPerfManager$delegate.getValue();
    }

    private final Intent getIntent() {
        throw new RuntimeException("use EditorProInitData instead");
    }

    private final InterfaceC144185lG getOnActivityResultListener() {
        return (InterfaceC144185lG) this.onActivityResultListener$delegate.getValue();
    }

    private final GHB getOnBackPressListener() {
        return (GHB) this.onBackPressListener$delegate.getValue();
    }

    private final PreviewPanelViewModel getPreviewPanelViewModel() {
        return (PreviewPanelViewModel) this.previewPanelViewModel$delegate.getValue();
    }

    private final C130695Az getTransitionGuideView() {
        return (C130695Az) this.transitionGuideView$delegate.getValue();
    }

    private final void initAudioTrackChecker() {
        H78.LIZ("EditorProScene -> initAudioTrackChecker");
        C132185Gs c132185Gs = this.audioTrackChecker;
        NLEModel LJJI = C79057V0z.LJJI(getEditorContext());
        c132185Gs.getClass();
        c132185Gs.LIZ.clear();
        c132185Gs.LIZIZ.clear();
        c132185Gs.LIZJ.clear();
        VecNLETrackSPtr tracks = LJJI.getTracks();
        o.LJIIIIZZ(tracks, "nleModel.tracks");
        ArrayList arrayList = new ArrayList();
        Iterator<NLETrack> it = tracks.iterator();
        while (it.hasNext()) {
            NLETrack next = it.next();
            if (next.LJIIZILJ() == EnumC123864ta.VIDEO) {
                arrayList.add(next);
            }
        }
        Iterator it2 = arrayList.iterator();
        while (it2.hasNext()) {
            Iterator<NLETrackSlot> it3 = ((NLETrack) it2.next()).LJIILL().iterator();
            while (it3.hasNext()) {
                NLETrackSlot it4 = it3.next();
                o.LJIIIIZZ(it4, "it");
                C2LD LJI = C62848OlY.LJI(it4);
                if (LJI != null) {
                    c132185Gs.LIZ.put(it4.getUUID(), LJI);
                }
            }
        }
        VecNLETrackSPtr tracks2 = LJJI.getTracks();
        ArrayList LIZ = C07080Po.LIZ(tracks2, "nleModel.tracks");
        Iterator<NLETrack> it5 = tracks2.iterator();
        while (it5.hasNext()) {
            NLETrack next2 = it5.next();
            NLETrack it6 = next2;
            o.LJIIIIZZ(it6, "it");
            if (C124574uj.LJJJJIZL(it6)) {
                LIZ.add(next2);
            }
        }
        Iterator it7 = LIZ.iterator();
        while (it7.hasNext()) {
            Iterator<NLETrackSlot> it8 = ((NLETrack) it7.next()).LJIILL().iterator();
            while (it8.hasNext()) {
                NLETrackSlot it9 = it8.next();
                o.LJIIIIZZ(it9, "it");
                C2LD LJI2 = C62848OlY.LJI(it9);
                if (LJI2 != null) {
                    c132185Gs.LIZIZ.put(it9.getUUID(), LJI2);
                }
            }
        }
        if (C133195Kp.LIZ()) {
            VecNLETrackSPtr tracks3 = LJJI.getTracks();
            ArrayList LIZ2 = C07080Po.LIZ(tracks3, "nleModel.tracks");
            Iterator<NLETrack> it10 = tracks3.iterator();
            while (it10.hasNext()) {
                NLETrack next3 = it10.next();
                NLETrack nLETrack = next3;
                if (C124574uj.LJJIL(nLETrack) || C124574uj.LJJJ(nLETrack)) {
                    LIZ2.add(next3);
                }
            }
            Iterator it11 = LIZ2.iterator();
            while (it11.hasNext()) {
                Iterator<NLETrackSlot> it12 = ((NLETrack) it11.next()).LJIILL().iterator();
                while (it12.hasNext()) {
                    NLETrackSlot slot = it12.next();
                    o.LJIIIIZZ(slot, "slot");
                    C2LD LJI3 = C62848OlY.LJI(slot);
                    if (LJI3 != null) {
                        c132185Gs.LIZJ.put(slot.getUUID(), LJI3);
                    }
                    c132185Gs.LIZLLL.put(slot.getUUID(), slot.getExtra("d_bgmId"));
                }
            }
        }
    }

    private final void initCanvasView() {
        C151555x9 c151555x9 = new C151555x9(requireAppCompatActivity());
        List<C151915xj> LJJIJIL = C47261Igj.LJJIJIL(new C151915xj(getCanvasMinControlHeight(), 2));
        EnumC151655xJ enumC151655xJ = EnumC151655xJ.VARIABLE;
        o.LJIIIZ(enumC151655xJ, "<set-?>");
        c151555x9.LIZJ = enumC151655xJ;
        LJJIJIL.add(new C151915xj(getCanvasMaxControlHeight(), 2));
        int i = C135125Sa.LIZ().getInt("control_view_height", -1);
        Iterator<C151915xj> it = LJJIJIL.iterator();
        int i2 = 0;
        while (true) {
            if (it.hasNext()) {
                if (it.next().LIZ == i) {
                    break;
                } else {
                    i2++;
                }
            } else {
                i2 = -1;
                break;
            }
        }
        C162366Yu.LIZIZ(i2, 0, LJJIJIL);
        this.canvasControlInitHeight = ((C151915xj) ORZ.LJLLJ(LJJIJIL)).LIZ;
        c151555x9.LJII = true;
        c151555x9.LIZLLL = LJJIJIL;
        LayoutInflater LLZIL = C16880lQ.LLZIL(requireAppCompatActivity());
        InterceptConstraintLayout interceptConstraintLayout = this.dyRoot;
        if (interceptConstraintLayout != null) {
            View LLLLIILL = C16880lQ.LLLLIILL(LLZIL, R.layout.asn, interceptConstraintLayout, false);
            o.LJIIIIZZ(LLLLIILL, "from(requireAppCompatAct…av_layout, dyRoot, false)");
            c151555x9.LJ = LLLLIILL;
            LayoutInflater LLZIL2 = C16880lQ.LLZIL(requireAppCompatActivity());
            InterceptConstraintLayout interceptConstraintLayout2 = this.dyRoot;
            if (interceptConstraintLayout2 != null) {
                View LLLLIILL2 = C16880lQ.LLLLIILL(LLZIL2, R.layout.asd, interceptConstraintLayout2, false);
                o.LJIIIIZZ(LLLLIILL2, "from(requireAppCompatAct…ol_layout, dyRoot, false)");
                c151555x9.LJI = LLLLIILL2;
                LayoutInflater LLZIL3 = C16880lQ.LLZIL(requireAppCompatActivity());
                InterceptConstraintLayout interceptConstraintLayout3 = this.dyRoot;
                if (interceptConstraintLayout3 != null) {
                    c151555x9.LJFF = C16880lQ.LLLLIILL(LLZIL3, R.layout.asr, interceptConstraintLayout3, false);
                    this.canvasView = new C151885xg(c151555x9);
                    C018905p c018905p = new C018905p(-1, -1);
                    if (C5CK.LIZ() == 0 || C5CK.LIZ() == 1 || !C52B.LJII(requireAppCompatActivity())) {
                        ((ViewGroup.MarginLayoutParams) c018905p).topMargin = C81184Vtc.LJFF(requireAppCompatActivity());
                    }
                    InterceptConstraintLayout interceptConstraintLayout4 = this.dyRoot;
                    if (interceptConstraintLayout4 != null) {
                        interceptConstraintLayout4.addView(this.canvasView, 1, c018905p);
                        C151885xg c151885xg = this.canvasView;
                        if (c151885xg == null) {
                            return;
                        }
                        c151885xg.setMotionEventSplittingEnabled(false);
                        return;
                    }
                    o.LJIJI("dyRoot");
                    throw null;
                }
                o.LJIJI("dyRoot");
                throw null;
            }
            o.LJIJI("dyRoot");
            throw null;
        }
        o.LJIJI("dyRoot");
        throw null;
    }

    private final void initEditCore() {
        InterfaceC1294756h interfaceC1294756h = this.editorProInitApi;
        if (interfaceC1294756h != null) {
            interfaceC1294756h.EK(getEditorProInitData(), this.nleSessionHolder);
        }
        InterfaceC1294756h interfaceC1294756h2 = this.editorProInitApi;
        if (interfaceC1294756h2 != null) {
            ConstraintLayout constraintLayout = this.contentView;
            if (constraintLayout != null) {
                interfaceC1294756h2.GS(constraintLayout, C78923UyF.LJIIJJI(this));
            } else {
                o.LJIJI("contentView");
                throw null;
            }
        }
        initEditorPlayground();
        if (enterFromAlbumPage()) {
            initVideoEditorIfNeeded();
        }
    }

    private final void initGuideController() {
        C58D trackPanel;
        String str = null;
        if (C78685UuP.LJJJZ(this.editorProAnchorType) && !o.LJ(this.editorProAnchorType, EnumC1289754j.GENERAL.getType())) {
            View findViewById = ((ViewStub) requireViewById(R.id.km5)).inflate().findViewById(R.id.cqm);
            o.LJII(findViewById, "null cannot be cast to non-null type com.ss.android.ugc.gamora.editorpro.views.BottomBarGuideView");
            C5B0 c5b0 = (C5B0) findViewById;
            C29S requireAppCompatActivity = requireAppCompatActivity();
            String str2 = this.editorProAnchorType;
            InterceptConstraintLayout interceptConstraintLayout = this.dyRoot;
            if (interceptConstraintLayout != null) {
                C1289554h c1289554h = new C1289554h(requireAppCompatActivity, c5b0, str2, interceptConstraintLayout);
                this.bottomBarGuideController = c1289554h;
                EditModelProvider.Companion.getClass();
                C126784yI.LIZ().setBottomBarGuideController$tools_camera_edit_release(c1289554h);
                registerActivityOnKeyDownListener(getEditorProGuideOnKeyDownListener());
                return;
            }
            o.LJIJI("dyRoot");
            throw null;
        }
        VideoPublishEditModel editModel = getEditModel();
        if (editModel != null) {
            str = editModel.mShootWay;
        }
        if (o.LJ(str, "ep_anchor") || !e1.LIZ(31744, "studio_editor_pro_transition_guide", true, false)) {
            return;
        }
        C130695Az transitionGuideView = getTransitionGuideView();
        C58D trackPanel2 = getTrackPanel();
        InterceptorFrameLayout dyPreviewContainer = getDyPreviewContainer();
        if (dyPreviewContainer != null) {
            C1297157f c1297157f = new C1297157f(this, transitionGuideView, trackPanel2, dyPreviewContainer);
            this.editorProTransitionGuideController = c1297157f;
            EditModelProvider.Companion.getClass();
            C126784yI.LIZ().setTransitionGuideController$tools_camera_edit_release(c1297157f);
            C1297157f c1297157f2 = this.editorProTransitionGuideController;
            if (c1297157f2 == null || c1297157f2.LJIILL() || (trackPanel = getTrackPanel()) == null) {
                return;
            }
            trackPanel.setOnFingerAndTrackStop(new AqS152S0100000_2(this, 554));
            return;
        }
        "Required value was null.".toString();
        throw new IllegalArgumentException("Required value was null.");
    }

    private final void initPerformance() {
        if (((Boolean) L5I.LIZ.getValue()).booleanValue()) {
            C62822Ol8 c62822Ol8 = L5I.LIZIZ;
            C63942P7q.LIZJ(((Number) L5I.LIZJ.getValue()).intValue(), ((Boolean) c62822Ol8.getValue()).booleanValue());
            C63942P7q.LJ(((Number) L5I.LJ.getValue()).intValue(), ((Number) L5I.LIZLLL.getValue()).intValue(), ((Boolean) c62822Ol8.getValue()).booleanValue());
            C62822Ol8 c62822Ol82 = L5I.LJFF;
            C63942P7q.LIZIZ(((Number) L5I.LJI.getValue()).intValue(), ((Boolean) c62822Ol82.getValue()).booleanValue());
            C63942P7q.LIZLLL(((Number) L5I.LJIIIIZZ.getValue()).intValue(), ((Number) L5I.LJII.getValue()).intValue(), ((Boolean) c62822Ol82.getValue()).booleanValue());
        }
        C143525kC editorProPerfManager = getEditorProPerfManager();
        getEditModel();
        getEditorProInitData().isFromText();
        editorProPerfManager.getClass();
        C5G5.LIZ(editorProPerfManager);
    }

    /* JADX WARN: Removed duplicated region for block: B:21:0x0060  */
    /* JADX WARN: Removed duplicated region for block: B:91:0x025d  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private final void initSaveAndCancelBtn() {
        /*
            Method dump skipped, instructions count: 613
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: com.ss.android.ugc.gamora.editorpro.EditorProScene.initSaveAndCancelBtn():void");
    }

    private final void initTextMaterial() {
        C132005Ga c132005Ga = new C132005Ga(this.editorProGuidanceController);
        c132005Ga.LJLLLLLL = getEditModel();
        c132005Ga.LJZ = this.effectMode;
        c132005Ga.LJLZ = this.editPageTextLayoutWidth;
        c132005Ga.LJLLILLLL = new IDqS181S0200000_2(this, c132005Ga, 0);
        c132005Ga.LJLLJ = new AqS168S0100000_2(this, 327);
        this.textMaterial = c132005Ga;
    }

    private final void initWhenMergeEditorProToEdit() {
        View view = this.viewFullBg;
        if (view != null) {
            view.setVisibility(8);
            C52T c52t = this.controlBar;
            if (c52t != null) {
                c52t.zU(C52V.UNDO, 4);
            }
            C52T c52t2 = this.controlBar;
            if (c52t2 != null) {
                c52t2.zU(C52V.REDO, 4);
            }
            optimizeEnterExperience();
            doAfterFirstFrame(false);
            return;
        }
        o.LJIJI("viewFullBg");
        throw null;
    }

    private final boolean isEditorProInitialized() {
        if (this.editorProInitData != null && C1280550v.LIZ().LIZJ && C5G0.LIZIZ) {
            return true;
        }
        return false;
    }

    private final void onNormalInit() {
        if (this.isInit) {
            return;
        }
        this.isInit = true;
        initView();
        initControllers();
        initEditCore();
        initPerformance();
        registerLiveDataEvent();
        getPlayground().LJJIJLIJ();
        C1284452i multiTrackController = getMultiTrackController();
        if (multiTrackController != null) {
            multiTrackController.LJIJI(true, true);
        }
        renderNLEData();
        C5G5.LIZJ();
    }

    private final void optimizeEnterExperience() {
        NLETrack mainTrack;
        NLETrackSlot nLETrackSlot;
        C1284452i multiTrackController;
        if (!this.isFromReshoot && !this.effectMode && o.LJ(this.enterFrom, "enter_from_edit_root_adjust_clips")) {
            if (C5DJ.LIZ()) {
                C43045Guv.LIZLLL(new AqS152S0100000_2(this, 532), 800L);
            } else {
                if (C00F.LIZ(31744, 0, "editor_pro_select_first_slot", true) != 1 || (mainTrack = C79057V0z.LJJI(getEditorContext()).getMainTrack()) == null || (nLETrackSlot = (NLETrackSlot) ORZ.LJLLLLLL(0, mainTrack.LJIILLIIL())) == null || (multiTrackController = getMultiTrackController()) == null) {
                    return;
                }
                C1284452i.LJIJ(multiTrackController, nLETrackSlot, EnumC127354zD.CLIP, false, 20);
            }
        }
    }

    private final void refreshLayout() {
        VideoPublishEditModel editModel;
        if (this.textStickerEditLayoutDelegate.isInitialized() && (editModel = getEditModel()) != null) {
            getTextStickerEditLayout().setTextStickerInputMobListener(new C147095px(new C134665Qg(editModel, "text_edit_page")));
        }
    }

    private final void registerALSComponents() {
        C78688UuS.LJIIIZ(this, false, C5H7.LJLIL);
        C44384HbQ.LJIIIZ(this, new AqS168S0100000_2(this, 326));
        C82622Wbi c82622Wbi = C44384HbQ.LJJJI(this).LJLLL;
        if (c82622Wbi != null) {
            this.editorProInitApi = (InterfaceC1294756h) c82622Wbi.LJIIIIZZ(null, InterfaceC1294756h.class);
            this.trackPanelApi = (C51E) c82622Wbi.LJIIIIZZ(null, C51E.class);
            this.previewPanel = (InterfaceC1278950f) c82622Wbi.LJIIIIZZ(null, InterfaceC1278950f.class);
            this.controlBar = (C52T) c82622Wbi.LJIIIIZZ(null, C52T.class);
            return;
        }
        "Required value was null.".toString();
        throw new IllegalArgumentException("Required value was null.");
    }

    private final void registerCanvasViewListeners() {
        final C151885xg c151885xg = this.canvasView;
        if (c151885xg == null) {
            return;
        }
        c151885xg.setGrabberViewStateChangeListener(new InterfaceC151935xl() { // from class: X.5Gd
            public boolean LIZ;

            @Override // X.InterfaceC151935xl
            public final void LIZ(int i) {
                C58D trackPanel;
                C58D trackPanel2;
                if (i != 0) {
                    if (i != 1) {
                        return;
                    }
                    if (EditorProScene.this.getEditorContext().getPlayer().isPlaying()) {
                        this.LIZ = true;
                        EditorProScene.this.getEditorContext().getPlayer().pause();
                    }
                    if (C5H0.LIZ && (trackPanel2 = EditorProScene.this.getTrackPanel()) != null) {
                        trackPanel2.setHasFixSize(false);
                    }
                    InterfaceC1278950f interfaceC1278950f = EditorProScene.this.previewPanel;
                    if (interfaceC1278950f == null) {
                        return;
                    }
                    interfaceC1278950f.Ez(true);
                    return;
                }
                InterfaceC1278950f interfaceC1278950f2 = EditorProScene.this.previewPanel;
                if (interfaceC1278950f2 != null) {
                    interfaceC1278950f2.Ez(false);
                }
                ViewGroup.LayoutParams layoutParams = c151885xg.getPreviewLayout().getLayoutParams();
                InterfaceC1278950f interfaceC1278950f3 = EditorProScene.this.previewPanel;
                if (interfaceC1278950f3 != null) {
                    interfaceC1278950f3.cK(layoutParams.width, layoutParams.height);
                }
                C135125Sa.LIZ().storeInt("control_view_height", c151885xg.getControlAreaHeight());
                if (this.LIZ) {
                    this.LIZ = false;
                    EditorProScene.this.getEditorContext().getPlayer().play();
                }
                if (!C5H0.LIZ || (trackPanel = EditorProScene.this.getTrackPanel()) == null) {
                    return;
                }
                trackPanel.setHasFixSize(true);
            }
        });
        c151885xg.setControlHeightChangeListener(new InterfaceC151945xm() { // from class: X.5CO
            public final C62822Ol8 LIZ;

            public final C1303859u LIZIZ() {
                return (C1303859u) this.LIZ.getValue();
            }

            {
                this.LIZ = C221108m2.LIZIZ(new AqS152S0100000_2(EditorProScene.this, 541));
            }

            @Override // X.InterfaceC151945xm
            public final void LIZ(int i) {
                View requireViewById = EditorProScene.this.requireViewById(R.id.lj2);
                requireViewById.getLayoutParams().height = (i - EditorProScene.CONSOLE_CONTAINER_HEIGHT) - EditorProScene.FUNCTION_BAR_HEIGHT;
                requireViewById.requestLayout();
                if (LIZIZ().getScrollY() > LIZIZ().getMaxScrollY()) {
                    LIZIZ().scrollTo(LIZIZ().getScrollX(), LIZIZ().getMaxScrollY());
                }
            }
        });
        c151885xg.setPreviewHeightChangeListener(new InterfaceC151945xm() { // from class: X.56V
            public boolean LIZ = true;

            @Override // X.InterfaceC151945xm
            public final void LIZ(int i) {
                InterfaceC1278950f interfaceC1278950f;
                SurfaceView Jq;
                int width;
                SurfaceView surfaceView;
                if (!EditorProScene.this.getEditorContext().getHasInitialized()) {
                    return;
                }
                PairIntInt LJIIJ = EditorProScene.this.getEditorContext().getNleSession().P8().LJIIJ();
                if (LJIIJ.LIZ() == 0 || LJIIJ.LIZIZ() == 0 || (interfaceC1278950f = EditorProScene.this.previewPanel) == null || (Jq = interfaceC1278950f.Jq()) == null || (width = Jq.getWidth()) == 0 || i == 0) {
                    return;
                }
                if (!this.LIZ) {
                    EditorProContext editorContext = EditorProScene.this.getEditorContext();
                    int LIZ = LJIIJ.LIZ();
                    int LIZIZ = LJIIJ.LIZIZ();
                    InterfaceC1278950f interfaceC1278950f2 = EditorProScene.this.previewPanel;
                    if (interfaceC1278950f2 != null) {
                        surfaceView = interfaceC1278950f2.Jq();
                    } else {
                        surfaceView = null;
                    }
                    C56W.LIZIZ(editorContext, LIZ, LIZIZ, width, i, surfaceView, EditorProScene.this.getDisplayTopMargin());
                }
                this.LIZ = false;
                InterfaceC1278950f interfaceC1278950f3 = EditorProScene.this.previewPanel;
                if (interfaceC1278950f3 == null) {
                    return;
                }
                interfaceC1278950f3.cK(width, i);
            }
        });
        MutableLiveData LJII = C79057V0z.LJII(getEditorContext(), "is_bottom_panel_showing");
        if (LJII != null) {
            LJII.observe(this, getCanvasViewObservePanelShowing());
        }
    }

    private final void registerLiveDataEvent() {
        LiveState<Long> Y1;
        String[] strArr = {"bottom_item_sound_add_sound", "bottom_item_sound_replace_sound", "bottom_item_bgm_edit_volume", "bottom_item_bgm_edit_delete"};
        MutableLiveData LJII = C79057V0z.LJII(getEditorContext(), "selected_track_slot_event");
        if (LJII != null) {
            LJII.observe(this, new AObserverS66S0200000_2(this, strArr, 12));
        }
        MutableLiveData LJII2 = C79057V0z.LJII(getEditorContext(), "delete_slot_event");
        if (LJII2 != null) {
            LJII2.observe(this, new AObserverS70S0100000_2(this, 139));
        }
        MutableLiveData LJII3 = C79057V0z.LJII(getEditorContext(), "panel_bounce_event");
        if (LJII3 != null) {
            LJII3.observe(this, new AObserverS70S0100000_2(this, UserLevelGeckoUpdateSetting.DEFAULT));
        }
        MutableLiveData LJII4 = C79057V0z.LJII(getEditorContext(), "editing_effect_panel_select_effect_event");
        if (LJII4 != null) {
            LJII4.observe(this, new AObserverS70S0100000_2(this, 141));
        }
        MutableLiveData LJII5 = C79057V0z.LJII(getEditorContext(), "editing_effect_panel_unselect_effect_event");
        if (LJII5 != null) {
            LJII5.observe(this, new AObserverS70S0100000_2(this, 142));
        }
        MutableLiveData LJII6 = C79057V0z.LJII(getEditorContext(), "event_click_add_music");
        if (LJII6 != null) {
            LJII6.observe(this, new AObserverS70S0100000_2(this, 143));
        }
        MutableLiveData LJII7 = C79057V0z.LJII(getEditorContext(), "event_click_replace_music");
        if (LJII7 != null) {
            LJII7.observe(this, new AObserverS70S0100000_2(this, 145));
        }
        MutableLiveData LJII8 = C79057V0z.LJII(getEditorContext(), "event_click_delete_music");
        if (LJII8 != null) {
            LJII8.observe(this, new AObserverS70S0100000_2(this, 147));
        }
        MutableLiveData LJII9 = C79057V0z.LJII(getEditorContext(), "event_click_music_sync");
        if (LJII9 != null) {
            LJII9.observe(this, new AObserverS70S0100000_2(this, 149));
        }
        MutableLiveData LJII10 = C79057V0z.LJII(getEditorContext(), "update_rotate_degree");
        if (LJII10 != null) {
            LJII10.observe(this, new AObserverS70S0100000_2(this, 144));
        }
        MutableLiveData LJII11 = C79057V0z.LJII(getEditorContext(), "value_black_slot_delete_music");
        if (LJII11 != null) {
            LJII11.observe(this, new AObserverS70S0100000_2(this, 146));
        }
        MutableLiveData LJII12 = C79057V0z.LJII(getEditorContext(), "add_recognized_caption");
        if (LJII12 != null) {
            LJII12.observe(this, new AObserverS70S0100000_2(this, 148));
        }
        MutableLiveData LJII13 = C79057V0z.LJII(getEditorContext(), "clear_caption");
        if (LJII13 != null) {
            LJII13.observe(this, new AObserverS70S0100000_2(this, 150));
        }
        MutableLiveData LJII14 = C79057V0z.LJII(getEditorContext(), "quit_edit_caption");
        if (LJII14 != null) {
            LJII14.observe(this, new AObserverS70S0100000_2(this, 151));
        }
        MutableLiveData LJII15 = C79057V0z.LJII(getEditorContext(), "check_effect_func_event");
        if (LJII15 != null) {
            LJII15.observe(this, new AObserverS70S0100000_2(this, 152));
        }
        MutableLiveData LJII16 = C79057V0z.LJII(getEditorContext(), "force_update_effect_func_event");
        if (LJII16 != null) {
            LJII16.observe(this, new AObserverS70S0100000_2(this, 153));
        }
        MutableLiveData LJII17 = C79057V0z.LJII(getEditorContext(), "update_status_null_effect_track");
        if (LJII17 != null) {
            LJII17.observe(this, new AObserverS70S0100000_2(this, 154));
        }
        MutableLiveData LJII18 = C79057V0z.LJII(getEditorContext(), "show_preview_placeholder");
        if (LJII18 != null) {
            LJII18.observe(this, new AObserverS70S0100000_2(this, 155));
        }
        MutableLiveData LJII19 = C79057V0z.LJII(getEditorContext(), "event_open_audio_record");
        if (LJII19 != null) {
            LJII19.observe(this, new AObserverS70S0100000_2(this, 156));
        }
        MutableLiveData LJII20 = C79057V0z.LJII(getEditorContext(), "event_START_audio_record");
        if (LJII20 != null) {
            LJII20.observe(this, new AObserverS70S0100000_2(this, 157));
        }
        MutableLiveData LJII21 = C79057V0z.LJII(getEditorContext(), "show_cap_cut_with_curve");
        if (LJII21 != null) {
            LJII21.observe(this, new AObserverS70S0100000_2(this, 158));
        }
        EditorProContext editorContext = getEditorContext();
        AqS152S0100000_2 aqS152S0100000_2 = new AqS152S0100000_2(this, 525);
        o.LJIIIZ(editorContext, "<this>");
        MutableLiveData LJII22 = C79057V0z.LJII(editorContext, "ve_first_frame_rendered");
        if (LJII22 != null) {
            LJII22.observe(this, new AObserverS70S0100000_2(aqS152S0100000_2, 342));
        }
        MutableLiveData LJII23 = C79057V0z.LJII(getEditorContext(), "status_sync_func_enabled");
        if (LJII23 != null) {
            LJII23.observe(this, new AObserverS70S0100000_2(this, 135));
        }
        MutableLiveData LJII24 = C79057V0z.LJII(getEditorContext(), "status_music_sync_on");
        if (LJII24 != null) {
            LJII24.observe(this, new AObserverS70S0100000_2(this, 136));
        }
        MutableLiveData LJII25 = C79057V0z.LJII(getEditorContext(), "event_music_added");
        if (LJII25 != null) {
            LJII25.observe(this, new AObserverS70S0100000_2(this, 137));
        }
        MutableLiveData LJII26 = C79057V0z.LJII(getEditorContext(), "status_show_null_audio_track");
        if (LJII26 != null) {
            LJII26.observe(this, new AObserverS70S0100000_2(this, 138));
        }
        AbstractC56012Ht.observeEvent$default(this, getUiStates(), new TBT() { // from class: X.5Gv
            @Override // X.TBT, X.TBZ, X.TBW
            public final Object get(Object obj) {
                return ((C132225Gw) obj).LIZ;
            }
        }, null, new AqS168S0100000_2(this, 322), 2, null);
        C52T c52t = this.controlBar;
        if (c52t == null || (Y1 = c52t.Y1()) == null) {
            return;
        }
        Y1.LJIIIIZZ(this, Lifecycle.State.STARTED, new AqS168S0100000_2(this, 323));
    }

    private final boolean showBottomMenuAnimGuideIfNeeded() {
        if (!this.isFromReshoot && !this.effectMode && o.LJ(this.enterFrom, "enter_from_edit_root_adjust_clips") && C5DJ.LIZ()) {
            return true;
        }
        return false;
    }

    private final void unregisterCanvasListener() {
        C151885xg c151885xg = this.canvasView;
        if (c151885xg == null) {
            return;
        }
        c151885xg.setGrabberViewStateChangeListener(null);
        c151885xg.setControlHeightChangeListener(null);
        c151885xg.setPreviewHeightChangeListener(null);
        MutableLiveData LJII = C79057V0z.LJII(getEditorContext(), "is_bottom_panel_showing");
        if (LJII != null) {
            LJII.removeObserver(getCanvasViewObservePanelShowing());
        }
    }

    /* JADX WARN: Removed duplicated region for block: B:180:0x0614  */
    /* JADX WARN: Removed duplicated region for block: B:209:0x0560  */
    /* JADX WARN: Removed duplicated region for block: B:258:0x0771 A[LOOP:10: B:256:0x076b->B:258:0x0771, LOOP_END] */
    /* JADX WARN: Removed duplicated region for block: B:263:0x086a  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private final void updateEditModelByNLE() {
        /*
            Method dump skipped, instructions count: 2217
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: com.ss.android.ugc.gamora.editorpro.EditorProScene.updateEditModelByNLE():void");
    }

    public final boolean allowChangeInEp2Publish() {
        if (this.editorProAnchorType != null || this.effectMode) {
            return false;
        }
        VideoPublishEditModel editModel = getEditModel();
        if ((editModel != null && editModel.isEnterFromDM()) || enterFromNowEdit()) {
            return false;
        }
        return true;
    }

    public final C55Y getActionMenuController() {
        return (C55Y) this.actionMenuController$delegate.getValue();
    }

    public final C131985Fy getAnimationController() {
        return (C131985Fy) this.animationController$delegate.getValue();
    }

    public final C29S getAppCompatActivity() {
        Activity activity = this.mActivity;
        if (activity instanceof C29S) {
            return (C29S) activity;
        }
        return null;
    }

    public final InterfaceC1290554r getAudioRecordAnimation() {
        return (InterfaceC1290554r) this.audioRecordAnimation$delegate.getValue();
    }

    public final int getCanvasMinControlHeight() {
        Companion.getClass();
        return C132085Gi.LIZ() + CONSOLE_CONTAINER_HEIGHT + FUNCTION_BAR_HEIGHT;
    }

    public final EditCapCutViewModel getCapCutViewModel() {
        return (EditCapCutViewModel) this.capCutViewModel$delegate.getValue();
    }

    public final int getDisplayTopMargin() {
        Activity activity = this.mActivity;
        int i = 0;
        if (activity == null || enterFromNowEdit()) {
            return 0;
        }
        int i2 = C151885xg.LJLZ;
        if (C5CK.LIZ() == 0 || C5CK.LIZ() == 1 || !C52B.LJII(activity)) {
            i = C63081OpJ.LJJJJLI(activity);
        }
        StringBuilder LIZJ = C06460Ne.LIZJ("EditorProScene navbar height: ", i2, " statusbar height: ", i, " surface topmargin: ");
        LIZJ.append(AnonymousClass668.LIZIZ().LIZ());
        H78.LJI(X1D.LIZIZ(LIZJ));
        return (i2 + i) - AnonymousClass668.LIZIZ().LIZ();
    }

    public final InterceptorFrameLayout getDyPreviewContainer() {
        InterceptorFrameLayout interceptorFrameLayout = this.dyPreviewContainer;
        if (interceptorFrameLayout != null) {
            return interceptorFrameLayout;
        }
        o.LJIJI("dyPreviewContainer");
        throw null;
    }

    public final VideoPublishEditModel getEditModel() {
        if (this.editorProInitData != null) {
            return getEditorProInitData().getEditModel();
        }
        return null;
    }

    public final EditorProContext getEditorContext() {
        return (EditorProContext) this.editorContext$delegate.getValue();
    }

    public final C132045Ge getEditorProInitData() {
        C132045Ge c132045Ge = this.editorProInitData;
        if (c132045Ge != null) {
            return c132045Ge;
        }
        o.LJIJI("editorProInitData");
        throw null;
    }

    public final C52O getFullScreenService() {
        return (C52O) this.fullScreenService$delegate.getValue();
    }

    public final C1282051k getFuncBarConfig() {
        InterfaceC1294756h interfaceC1294756h = this.editorProInitApi;
        if (interfaceC1294756h != null) {
            return interfaceC1294756h.Aq0();
        }
        return null;
    }

    public final C50Q getFuncBarController() {
        IFunctionBarService iFunctionBarService = this.funcBarService;
        if (iFunctionBarService != null) {
            return iFunctionBarService.getFuncBarController();
        }
        return null;
    }

    public final C1284452i getMultiTrackController() {
        C51E c51e = this.trackPanelApi;
        if (c51e != null) {
            return c51e.getMultiTrackController();
        }
        return null;
    }

    public final C127604zc getPlayground() {
        return (C127604zc) this.playground$delegate.getValue();
    }

    public final HandlerC1283652a getRotateHandler() {
        return (HandlerC1283652a) this.rotateHandler$delegate.getValue();
    }

    public final C1539662m getTextStickerEditLayout() {
        return this.textStickerEditLayoutDelegate.getValue();
    }

    public final C58D getTrackPanel() {
        C51E c51e = this.trackPanelApi;
        if (c51e != null) {
            return c51e.jB();
        }
        return null;
    }

    public final void handleTextDurationEnterEPLogic() {
        C1284452i multiTrackController;
        NLETrackSlot nLETrackSlot = this.selectSlotFromOut;
        if (nLETrackSlot != null && (multiTrackController = getMultiTrackController()) != null) {
            C1284452i.LJIJ(multiTrackController, nLETrackSlot, null, false, 22);
        }
    }

    public final void hideEHEffectInfoTitle() {
        LinearLayout linearLayout = this.effectDesignerInfoLayout;
        if (linearLayout != null) {
            linearLayout.setVisibility(8);
            W5G w5g = this.designerAvatarView;
            if (w5g != null) {
                w5g.setVisibility(8);
                TuxTextView tuxTextView = this.designerNameView;
                if (tuxTextView != null) {
                    tuxTextView.setVisibility(8);
                    return;
                } else {
                    o.LJIJI("designerNameView");
                    throw null;
                }
            }
            o.LJIJI("designerAvatarView");
            throw null;
        }
        o.LJIJI("effectDesignerInfoLayout");
        throw null;
    }

    public final void hideRotateDegree() {
        TextView textView = this.rotateTipsView;
        if (textView != null && textView.getVisibility() != 8) {
            textView.setVisibility(8);
        }
    }

    public final void initContentView() {
        G8G.LIZ.enter(requireAppCompatActivity(), "tool_editor_pro");
        C42315Gj9.LIZIZ("tool_editor_pro_enter", C52467KiV.LIZIZ(), C52467KiV.LIZ());
        C29S requireAppCompatActivity = requireAppCompatActivity();
        if (enterFromAlbumPage()) {
            if (requireAppCompatActivity != null) {
                requireAppCompatActivity.overridePendingTransition(R.anim.ca, R.anim.cb);
            }
        } else if (requireAppCompatActivity != null) {
            requireAppCompatActivity.overridePendingTransition(0, 0);
        }
        View LIZLLL = C16970lZ.LIZLLL(requireActivity(), R.layout.as5);
        o.LJII(LIZLLL, "null cannot be cast to non-null type androidx.constraintlayout.widget.ConstraintLayout");
        this.contentView = (ConstraintLayout) LIZLLL;
    }

    public final void initForEditorProAnchor() {
        C1289554h c1289554h;
        OSZ<AnonymousClass523, Integer> LIZIZ;
        String str = this.editorProAnchorType;
        if (str != null && str.length() != 0 && (c1289554h = this.bottomBarGuideController) != null && (LIZIZ = c1289554h.LIZIZ()) != null) {
            if (!o.LJ(LIZIZ.getFirst().LJ, "root_item")) {
                ((FunctionBarViewModel) c1289554h.LJ.getValue()).dispatch(new AnonymousClass535(LIZIZ.getFirst(), LIZIZ.getSecond().intValue(), null));
            }
            c1289554h.LJII = true;
            if (c1289554h.LJIIIIZZ.getValue() == null) {
                return;
            }
            C2VQ.LIZIZ(new AqS152S0100000_2(c1289554h, 816), 230L);
        }
    }

    public final void initOnActivityCreated() {
        Integer num;
        EditModelProvider.Companion.getClass();
        this.editorProFileCenter = C126784yI.LIZ().getEditorProFileCenter();
        C29S activity = requireAppCompatActivity();
        o.LJIIIZ(activity, "activity");
        String peek = C5G5.LIZLLL.peek();
        ConcurrentHashMap<String, ArrayList<InterfaceC132255Gz>> concurrentHashMap = C5G5.LIZIZ;
        if (concurrentHashMap.containsKey(peek)) {
            ArrayList<InterfaceC132255Gz> arrayList = concurrentHashMap.get(peek);
            StringBuilder LIZ = X1D.LIZ();
            LIZ.append("CKLifecycleManager#notifyOnCreated, size = ");
            if (arrayList != null) {
                num = Integer.valueOf(arrayList.size());
            } else {
                num = null;
            }
            LIZ.append(num);
            X1D.LIZIZ(LIZ);
            if (arrayList != null) {
                Iterator<InterfaceC132255Gz> it = arrayList.iterator();
                while (it.hasNext()) {
                    it.next().onCreate(activity);
                }
            }
            ActivityStack.addAppBackGroundListener(this.onBackgroundListener);
            Application application = requireAppCompatActivity().getApplication();
            o.LJIIIIZZ(application, "requireAppCompatActivity().application");
            C170746n0.LIZ(application);
            C1280550v.LIZ().LIZ().LIZLLL = new C1293955z(requireAppCompatActivity());
            C131935Ft.LIZ = new T2J();
            C132105Gk.LIZIZ = new C5HD(requireAppCompatActivity()) { // from class: X.5Hl
                public final Activity LIZ;
                public C26045AKb LIZIZ;

                {
                    o.LJIIIZ(activity, "activity");
                    this.LIZ = activity;
                }

                @Override // X.C5HD
                public final void LIZ(Context context, String message) {
                    o.LJIIIZ(message, "message");
                    if (this.LIZ.isFinishing()) {
                        return;
                    }
                    C26045AKb c26045AKb = this.LIZIZ;
                    if (c26045AKb != null) {
                        c26045AKb.LIZIZ();
                        this.LIZIZ = null;
                    }
                    C26045AKb c26045AKb2 = new C26045AKb(this.LIZ);
                    c26045AKb2.LJIIIZ(message);
                    c26045AKb2.LIZ(true);
                    this.LIZIZ = c26045AKb2;
                    c26045AKb2.LJIIJ();
                }
            };
            initUIStyle();
            registerALSComponents();
            return;
        }
        throw new IllegalStateException(i0.LJFF("CKLifecycleManager#notifyOnCreated->does not contains key = ", peek));
    }

    public final boolean isShortVideo() {
        long videoLength;
        Long l = this.totalPlayTime;
        if (l != null) {
            videoLength = l.longValue();
        } else {
            VideoPublishEditModel editModel = getEditModel();
            if (editModel != null) {
                videoLength = editModel.getVideoLength();
            }
            return true;
        }
        if (videoLength < 60000) {
            return true;
        }
        return false;
    }

    public final boolean onBackPressed() {
        if (!this.isAnimOutFinish) {
            return true;
        }
        if (!this.onKeyDownList.isEmpty()) {
            Iterator<C5HC> it = this.onKeyDownList.iterator();
            while (it.hasNext()) {
                if (it.next().onKeyDown(0, null)) {
                    return true;
                }
            }
        }
        MutableLiveData LJII = C79057V0z.LJII(getEditorContext(), "is_bottom_panel_showing");
        if (LJII != null && o.LJ(LJII.getValue(), Boolean.TRUE)) {
            C79057V0z.LJJJJL(getEditorContext(), "common_close_panel_event", new C55G());
            return true;
        }
        C50Q funcBarController = getFuncBarController();
        if (funcBarController != null && funcBarController.onBackPressed()) {
            return true;
        }
        C55Y actionMenuController = getActionMenuController();
        if (actionMenuController.LIZIZ().LIZJ() || actionMenuController.LIZJ().LIZJ()) {
            C55Y actionMenuController2 = getActionMenuController();
            if (actionMenuController2.LIZIZ().LIZJ()) {
                actionMenuController2.LIZIZ().LIZ();
            }
            if (actionMenuController2.LIZJ().LIZJ()) {
                actionMenuController2.LIZJ().LIZ();
            }
            return true;
        }
        this.exitByBackPressed = true;
        View view = this.advancedEditorCancel;
        if (view != null) {
            view.performClick();
            return true;
        }
        o.LJIJI("advancedEditorCancel");
        throw null;
    }

    public final void renderNLEData() {
        InterfaceC1294756h interfaceC1294756h = this.editorProInitApi;
        if (interfaceC1294756h != null) {
            interfaceC1294756h.bp0(getEditorProInitData(), new InterfaceC126614y1() { // from class: X.5Gg
                @Override // X.InterfaceC126614y1
                public final void onSuccess() {
                    EditorProScene.this.onNLERenderSuccess();
                }

                @Override // X.InterfaceC126614y1
                public final void onError(int i, String str) {
                    String string = EditorProScene.this.getString(R.string.fmk);
                    o.LJIIIIZZ(string, "getString(R.string.editor_pro_menu_edit_delete)");
                    Activity activity = EditorProScene.this.mActivity;
                    if (activity != null) {
                        CreativeToastBuilder creativeToastBuilder = new CreativeToastBuilder();
                        creativeToastBuilder.message(string);
                        C78915Uy7.LJJIIZI(activity, 1042, creativeToastBuilder);
                    }
                }
            });
        }
        VideoPublishEditModel editModel = getEditModel();
        if (editModel != null && editModel.isRetakeVideo()) {
            return;
        }
        C52T c52t = this.controlBar;
        if (c52t != null) {
            c52t.zU(C52V.REDO, 4);
        }
        C52T c52t2 = this.controlBar;
        if (c52t2 == null) {
            return;
        }
        c52t2.zU(C52V.UNDO, 4);
    }

    public final void updateSurfaceSizeIfNeed() {
        if (this.multipleOnStartInOneEdit) {
            updateSurfaceSizeInternal();
            getEditorContext().getPlayer().M9(this.lastPlayTime * 1000);
        }
    }

    /* JADX WARN: Type inference failed for: r0v53, types: [X.5Gq] */
    public EditorProScene() {
        C5H1.LIZ.getClass();
        this.enableDirectToPublish = C5H1.LIZ() > 0;
        this.funcBarService = C127834zz.LIZ();
        this.enterEPTime = System.currentTimeMillis();
        this.capCutViewModel$delegate = C221108m2.LIZIZ(new AqS152S0100000_2(this, 540));
        this.previewPanelViewModel$delegate = C221108m2.LIZIZ(new AqS152S0100000_2(this, 538));
        this.capCutTuxSheet$delegate = C221108m2.LIZIZ(new AqS152S0100000_2(this, 539));
        this.onKeyDownList = new LinkedList<>();
        this.audioRecordAnimation$delegate = C221108m2.LIZIZ(new AqS152S0100000_2(this, 533));
        this.rotateHandler$delegate = C221108m2.LIZIZ(new AqS152S0100000_2(this, 549));
        this.animationController$delegate = C221108m2.LIZIZ(new AqS152S0100000_2(this, 531));
        this.fullScreenService$delegate = C221108m2.LIZIZ(new AqS152S0100000_2(this, 544));
        this.editorProPerfManager$delegate = C221108m2.LIZIZ(C5H6.LJLIL);
        this.actionMenuController$delegate = C221108m2.LIZIZ(new AqS152S0100000_2(this, 526));
        this.nleEditorListener = new NLEEditorListener() { // from class: X.50r
            @Override // com.bytedance.ies.nle.editor_jni.NLEEditorListener
            public final void onChanged() {
                AnonymousClass525 LJI;
                TrackState trackState;
                C1284452i multiTrackController;
                TrackPanelViewModel trackPanelViewModel;
                MutableLiveData<C1280250s> mutableLiveData;
                C1280250s value;
                boolean z;
                AnonymousClass525 LJI2;
                try {
                    NLEModel LJJI = C79057V0z.LJJI(EditorProScene.this.getEditorContext());
                    EditorProScene editorProScene = EditorProScene.this;
                    C123444su c123444su = editorProScene.originVolumeCompat;
                    boolean z2 = editorProScene.isFirstLoadNLEModel;
                    c123444su.getClass();
                    C123444su.LIZIZ(LJJI, z2);
                    if (!AnonymousClass636.LJIJJ(LJJI, EditorProScene.this.getEditModel())) {
                        C50Q funcBarController = EditorProScene.this.getFuncBarController();
                        if (funcBarController != null && (LJI2 = funcBarController.LJI()) != null) {
                            LJI2.LJFF("bottom_item_text_captions");
                        }
                        C55Y actionMenuController = EditorProScene.this.getActionMenuController();
                        actionMenuController.LIZJ().LJFF(actionMenuController.LIZLLL(true));
                    } else {
                        C50Q funcBarController2 = EditorProScene.this.getFuncBarController();
                        if (funcBarController2 != null && (LJI = funcBarController2.LJI()) != null) {
                            LJI.LJIIIIZZ("bottom_item_text_captions", false);
                        }
                        C55Y actionMenuController2 = EditorProScene.this.getActionMenuController();
                        actionMenuController2.LIZJ().LJFF(actionMenuController2.LIZLLL(false));
                    }
                    EditorProScene editorProScene2 = EditorProScene.this;
                    if (editorProScene2.isFirstLoadNLEModel) {
                        editorProScene2.isFirstLoadNLEModel = false;
                        C58D trackPanel = editorProScene2.getTrackPanel();
                        if (trackPanel != null) {
                            if ((((Boolean) C5BA.LIZ(EnumC127484zQ.ENABLE_VIDEO_TRANSITION, Boolean.FALSE)).booleanValue() || C52B.LJIIIZ(LJJI)) && !EditorProScene.this.effectMode) {
                                z = true;
                            } else {
                                z = false;
                            }
                            trackPanel.enableTransitionIcon(z);
                        }
                        EditorProScene editorProScene3 = EditorProScene.this;
                        if (!editorProScene3.isFromReshoot) {
                            editorProScene3.fixForBlackSlot(LJJI);
                            EditorProScene.this.initTextTrack(LJJI);
                            EditorProScene.this.initMusicTrack();
                            EditorProScene.this.updateEffectTracksCountLimit(LJJI);
                            EditorProScene editorProScene4 = EditorProScene.this;
                            if (editorProScene4.effectMode) {
                                C1284452i multiTrackController2 = editorProScene4.getMultiTrackController();
                                if (multiTrackController2 != null) {
                                    multiTrackController2.LJIJJLI(TrackState.VIDEOEFFECT);
                                }
                                C58D trackPanel2 = EditorProScene.this.getTrackPanel();
                                if (trackPanel2 != null) {
                                    trackPanel2.showOrHideNullEffectTrack(C124574uj.LJIILIIL(C79057V0z.LJJI(EditorProScene.this.getEditorContext())).isEmpty());
                                }
                                C58D trackPanel3 = EditorProScene.this.getTrackPanel();
                                if (trackPanel3 != null) {
                                    trackPanel3.showOrHideNullAudioTrack(false);
                                }
                            } else {
                                C1284452i multiTrackController3 = editorProScene4.getMultiTrackController();
                                if (multiTrackController3 != null && (trackPanelViewModel = multiTrackController3.LJLILLLLZI) != null && (mutableLiveData = trackPanelViewModel.LLILL) != null && (value = mutableLiveData.getValue()) != null) {
                                    trackState = value.LJLIL;
                                } else {
                                    trackState = null;
                                }
                                TrackState trackState2 = TrackState.NORMAL;
                                if (trackState != trackState2 && (multiTrackController = EditorProScene.this.getMultiTrackController()) != null) {
                                    multiTrackController.LJIJJLI(trackState2);
                                }
                                C58D trackPanel4 = EditorProScene.this.getTrackPanel();
                                if (trackPanel4 != null) {
                                    trackPanel4.showOrHideNullEffectTrack(false);
                                }
                            }
                            C79057V0z.LJIILJJIL(EditorProScene.this.getEditorContext(), true);
                            C79057V0z.LJJ(EditorProScene.this.getEditorContext()).LJIIIZ(0L, 0L);
                            return;
                        }
                        C58D trackPanel5 = editorProScene3.getTrackPanel();
                        if (trackPanel5 != null) {
                            trackPanel5.showOrHideNullEffectTrack(false);
                        }
                        VecNLETrackSlotSPtr LJIILL = EditorProScene.this.getEditorContext().getMainTrack().LJIILL();
                        EditorProScene editorProScene5 = EditorProScene.this;
                        Iterator<NLETrackSlot> it = LJIILL.iterator();
                        while (it.hasNext()) {
                            NLETrackSlot next = it.next();
                            if (next.getDuration() < 200000) {
                                next.LJIIJJI(null);
                                VecNLETrackSlotSPtr LJIILLIIL = editorProScene5.getEditorContext().getMainTrack().LJIILLIIL();
                                NLETrackSlot nLETrackSlot = (NLETrackSlot) ORZ.LJLLLLLL(LJIILLIIL.indexOf(next) - 1, LJIILLIIL);
                                if (nLETrackSlot != null) {
                                    nLETrackSlot.LJIIJJI(null);
                                }
                            }
                        }
                        EditorProScene editorProScene6 = EditorProScene.this;
                        editorProScene6.afterRetakeCommitId = C79057V0z.LJJ(editorProScene6.getEditorContext()).LIZLLL().LIZ().getUUID();
                        return;
                    }
                    C2ND.LIZIZ(new AqS149S0200000_2(editorProScene2, LJJI, 47), 0L);
                } catch (Exception e) {
                    H7C.LIZLLL(C5HX.LIZIZ, H7C.LJ(e), null, null, 12);
                }
            }
        };
        this.editorProGuideOnKeyDownListener$delegate = C221108m2.LIZIZ(new AqS152S0100000_2(this, 543));
        this.nleUndoRedoListener = new C125594wN() { // from class: X.51I
            @Override // X.InterfaceC126664y6
            public final void LIZIZ(EnumC126674y7 op, boolean z) {
                o.LJIIIZ(op, "op");
                C2ND.LIZIZ(new AqS152S0100000_2(EditorProScene.this, 555), 0L);
            }
        };
        this.coroutineScope = C48841JEv.LIZIZ();
        this.onBackgroundListener = new InterfaceC63764P0u() { // from class: X.5Gq
            @Override // X.InterfaceC63764P0u
            public final void onAppForeground() {
            }

            @Override // X.InterfaceC63764P0u
            public final void onAppBackground() {
                EditorProScene.this.getEditorContext().getPlayer().pause();
            }
        };
    }

    private final boolean enterFromAlbumPage() {
        if (C78685UuP.LJJJZ(getEditorProInitData().getEditorProAnchorType()) || o.LJ(getEditorProInitData().getEnterFrom(), "enter_from_album_editor_pro_entrance")) {
            return true;
        }
        return false;
    }

    private final boolean enterFromNowEdit() {
        return o.LJ(getEditorProInitData().getEnterFrom(), "enter_from_now_edit");
    }

    private final void findViewWhenReady() {
        EditorProModel editorProModel;
        String editorProAnchorType;
        VideoPublishEditModel editModel;
        View requireViewById = requireViewById(R.id.cjm);
        o.LJIIIIZZ(requireViewById, "requireViewById((R.id.dyPreviewContainer))");
        setDyPreviewContainer((InterceptorFrameLayout) requireViewById);
        initSaveAndCancelBtn();
        View requireViewById2 = requireViewById(R.id.fm0);
        o.LJIIIIZZ(requireViewById2, "requireViewById(R.id.layout_sticker_designer_info)");
        this.effectDesignerInfoLayout = (LinearLayout) requireViewById2;
        View requireViewById3 = requireViewById(R.id.m4w);
        o.LJIIIIZZ(requireViewById3, "requireViewById(R.id.tv_designer_icon)");
        this.designerAvatarView = (W5G) requireViewById3;
        View requireViewById4 = requireViewById(R.id.m4x);
        o.LJIIIIZZ(requireViewById4, "requireViewById(R.id.tv_designer_name)");
        this.designerNameView = (TuxTextView) requireViewById4;
        View requireViewById5 = requireViewById(R.id.y0);
        o.LJIIIIZZ(requireViewById5, "requireViewById(R.id.advancedEditorWarning)");
        this.advancedEditorWarning = requireViewById5;
        VideoPublishEditModel editModel2 = getEditModel();
        if (editModel2 != null && (editorProModel = editModel2.getEditorProModel()) != null && (editorProAnchorType = editorProModel.getEditorProAnchorType()) != null && C78685UuP.LJJJZ(editorProAnchorType) && (((editModel = getEditModel()) == null || !editModel.mIsFromDraft) && !checkShowCopyrightWarning(getEditModel()))) {
            TuxTextView tuxTextView = (TuxTextView) requireViewById(R.id.xz);
            tuxTextView.setText(C1533360b.LIZ());
            tuxTextView.setVisibility(0);
            this.advancedEditorTitle = tuxTextView;
        }
        View requireViewById6 = requireViewById(R.id.cji);
        o.LJIIIIZZ(requireViewById6, "requireViewById<Constrai…Layout>(R.id.dyActionBar)");
        this.dyActionBar = (ConstraintLayout) requireViewById6;
    }

    private final void handleCancel() {
        C79057V0z.LJJI(getEditorContext()).setExtra("exit_ep_time", String.valueOf(System.currentTimeMillis()));
        if (getEditorContext().getUndoRedoManager().LIZIZ()) {
            showDiscardConfirmDialog(new AqS152S0100000_2(this, 550));
            return;
        }
        VideoPublishEditModel editModel = getEditModel();
        if (editModel != null) {
            C5QW.LJJIIJZLJL(editModel, "click_edit_cancel", this.isFromTextDuration, C79057V0z.LJJI(getEditorContext()));
        }
        cancelActual$default(this, false, 1, null);
    }

    private final void initControllers() {
        String str;
        Collection values;
        CreativeModel creativeModel;
        SoundEffectInfoModel soundEffectInfoModel;
        List<SoundEffect> list;
        CreativeModel creativeModel2;
        SoundEffectInfoModel soundEffectInfoModel2;
        List<SoundEffect> list2;
        initGuideController();
        this.musicController = new C5I4(requireAppCompatActivity(), getPlayground());
        C126784yI c126784yI = EditModelProvider.Companion;
        c126784yI.getClass();
        C126784yI.LIZ().setMusicController(this.musicController);
        C125944ww c125944ww = new C125944ww(requireAppCompatActivity(), getPlayground());
        StringBuilder LIZ = X1D.LIZ();
        LIZ.append("soundEffectList: ");
        c126784yI.getClass();
        VideoPublishEditModel editModel = C126784yI.LIZ().getEditModel();
        List<DynamicBottomItem> list3 = null;
        if (editModel != null && (creativeModel2 = editModel.creativeModel) != null && (soundEffectInfoModel2 = creativeModel2.soundEffectInfoModel) != null && (list2 = soundEffectInfoModel2.soundEffectList) != null) {
            str = list2.toString();
        } else {
            str = null;
        }
        LIZ.append(str);
        H7C.LJI(3, "SoundEffect", "initSoundEffect", X1D.LIZIZ(LIZ));
        ((ArrayList) c125944ww.LIZLLL).clear();
        c126784yI.getClass();
        VideoPublishEditModel editModel2 = C126784yI.LIZ().getEditModel();
        if (editModel2 != null && (creativeModel = editModel2.creativeModel) != null && (soundEffectInfoModel = creativeModel.soundEffectInfoModel) != null && (list = soundEffectInfoModel.soundEffectList) != null) {
            ((ArrayList) c125944ww.LIZLLL).addAll(list);
        }
        Iterator it = ((ArrayList) c125944ww.LIZLLL).iterator();
        while (it.hasNext()) {
            C125954wx.LIZ((SoundEffect) it.next());
        }
        this.soundEffectController = c125944ww;
        EditModelProvider.Companion.getClass();
        C126784yI.LIZ().setSoundEffectController(this.soundEffectController);
        C125154vf c125154vf = new C125154vf(requireAppCompatActivity(), this.effectMode);
        this.videoEffectController = c125154vf;
        C126784yI.LIZ().setVideoEffectController$tools_camera_edit_release(c125154vf);
        C83547Wqd c83547Wqd = new C83547Wqd(requireAppCompatActivity(), null);
        c83547Wqd.LIZIZ(this);
        this.keyboardListener = c83547Wqd;
        initTextMaterial();
        setTextLayoutSize();
        if (this.editorProInitData != null && !getEditorProInitData().getEffectMultiTrackMode()) {
            m mVar = (m) i0.LJ(true, "studio_editor_pro_bottom_item_sort_settings", 31744, m.class, null);
            try {
                if (mVar == null) {
                    C131935Ft.LIZIZ("FuncBarSettingsManager", "initDynamicBottomOrderModel::jsonObj is null");
                    return;
                }
                boolean LJFF = mVar.LJJIJ("enable_dynamic_sort").LJFF();
                Map map = (Map) C1286353b.LIZJ.LJII(mVar.LJJIJ("bottom_item_dynamic_order_map").LJIIZILJ().toString(), new TypeToken<Map<String, ? extends DynamicBottomItem>>() { // from class: X.5Gy
                }.getType());
                DynamicBottomOrderModel dynamicBottomOrderModel = new DynamicBottomOrderModel();
                if (map != null && (values = map.values()) != null) {
                    list3 = ORZ.LLJI(values);
                }
                dynamicBottomOrderModel.setOrderList(list3);
                dynamicBottomOrderModel.setEnable(LJFF);
                C1286353b.LIZIZ = dynamicBottomOrderModel;
            } catch (Exception e) {
                C131935Ft.LIZ.e("FuncBarSettingsManager", e);
            }
        }
    }

    private final void initEditorPlayground() {
        C127604zc playground = getPlayground();
        playground.LLI = new AqS168S0100000_2(this, 330);
        playground.LLIFFJFJJ = new AqS152S0100000_2(this, 553);
        playground.LLII = this.effectMode;
        playground.LLIIII = this.isFromTextDuration;
        if ((C132575If.LIZ() || e1.LIZ(31744, "text_duration_enter_ep_guidance", true, false)) && C5DH.LIZ()) {
            playground.LLIIIILZ = this.editorProGuidanceController;
        }
    }

    private final void initGuideView() {
        String str;
        boolean z;
        boolean z2;
        if ((C132575If.LIZ() || C00F.LIZ(31744, 0, "studio_editor_pro_optimize_enter_experience", true) == 1 || e1.LIZ(31744, "text_duration_enter_ep_guidance", true, false)) && C5DH.LIZ()) {
            VideoPublishEditModel editModel = getEditModel();
            if (editModel != null) {
                str = editModel.mShootWay;
            } else {
                str = null;
            }
            boolean LJ = o.LJ(str, "ep_anchor");
            if (C00F.LIZ(31744, 0, "studio_editor_pro_optimize_enter_experience", true) == 1) {
                z = true;
            } else {
                z = false;
            }
            View requireViewById = requireViewById(R.id.cjn);
            o.LJIIIIZZ(requireViewById, "requireViewById<ConstraintLayout>(id.dyRoot)");
            ViewGroup viewGroup = (ViewGroup) requireViewById;
            if (!LJ && !z) {
                z2 = true;
            } else {
                z2 = false;
            }
            C132565Ie c132565Ie = new C132565Ie(viewGroup, this, new C132585Ig(z2, !LJ));
            EditModelProvider.Companion.getClass();
            C126784yI.LIZ().setEditProGuidanceController(c132565Ie);
            this.editorProGuidanceController = c132565Ie;
            InterceptorFrameLayout interceptorFrameLayout = (InterceptorFrameLayout) requireViewById(R.id.cqo);
            interceptorFrameLayout.setVisibility(0);
            this.editorProGuideGestureView = interceptorFrameLayout;
            interceptorFrameLayout.setInterceptListener(new AqS168S0100000_2(this, 331));
            registerActivityOnKeyDownListener(getEditorProGuideOnKeyDownListener());
        }
        if (C132575If.LIZ()) {
            InterceptorFrameLayout dyPreviewContainer = getDyPreviewContainer();
            this.previewPanelContainerView = dyPreviewContainer;
            if (dyPreviewContainer != null) {
                dyPreviewContainer.setInterceptListener(new AqS168S0100000_2(this, 332));
            }
        }
    }

    private final void initUIStyle() {
        int LIZ;
        View requireViewById = requireViewById(R.id.nab);
        o.LJIIIIZZ(requireViewById, "requireViewById(R.id.view_full_bg)");
        this.viewFullBg = requireViewById;
        View requireViewById2 = requireViewById(R.id.cjn);
        o.LJIIIIZZ(requireViewById2, "requireViewById(R.id.dyRoot)");
        InterceptConstraintLayout interceptConstraintLayout = (InterceptConstraintLayout) requireViewById2;
        this.dyRoot = interceptConstraintLayout;
        interceptConstraintLayout.setInterceptListener(new AqS168S0100000_2(this, 328));
        initCanvasView();
        findViewWhenReady();
        if (C5CK.LIZIZ()) {
            setFunctionBarHeight();
        }
        View requireViewById3 = requireViewById(R.id.lj2);
        ViewGroup.LayoutParams layoutParams = requireViewById3.getLayoutParams();
        if (layoutParams != null) {
            int i = this.canvasControlInitHeight;
            if (i != -1) {
                Companion.getClass();
                int i2 = CONSOLE_CONTAINER_HEIGHT;
                int LIZ2 = C132085Gi.LIZ() + i2;
                int i3 = FUNCTION_BAR_HEIGHT;
                if (i != LIZ2 + i3) {
                    LIZ = (this.canvasControlInitHeight - i2) - i3;
                    layoutParams.height = LIZ;
                }
            }
            Companion.getClass();
            LIZ = C132085Gi.LIZ();
            layoutParams.height = LIZ;
        }
        requireViewById3.setLayoutParams(requireViewById3.getLayoutParams());
        AbstractC56012Ht.observe$default(this, getUiStates(), new TBT() { // from class: X.5Gt
            @Override // X.TBT, X.TBZ, X.TBW
            public final Object get(Object obj) {
                return Integer.valueOf(((C132225Gw) obj).LIZIZ);
            }
        }, null, new AqS168S0100000_2(this, 329), 2, null);
    }

    private final void initVideoEditorIfNeeded() {
        int i;
        VideoPublishEditModel editModel = getEditModel();
        if (editModel == null) {
            return;
        }
        NLEEditor LJJ = C79057V0z.LJJ(getEditorContext());
        Pair<Integer, Integer> playInOutTime = editModel.multiEditVideoRecordData.curMultiEditVideoRecordData.getPlayInOutTime();
        MultiEditVideoRecordData multiEditVideoRecordData = editModel.multiEditVideoRecordData.curMultiEditVideoRecordData;
        o.LJIIIIZZ(multiEditVideoRecordData, "editModel.multiEditVideo…rMultiEditVideoRecordData");
        VERecordData LJIIJJI = C46104I7o.LJIIJJI(multiEditVideoRecordData);
        LJIIJJI.setTimeRange(((Number) playInOutTime.first).longValue() * 1000, ((Number) playInOutTime.second).longValue() * 1000);
        C127344zC.LIZIZ(LJIIJJI, LJJ);
        NLEModel LJ = LJJ.LJ();
        o.LJIIIIZZ(LJ, "nleEditor.model");
        Application application = C60903NvH.LJ;
        o.LJIIIIZZ(application, "getApplication()");
        C52B.LJIIJ(LJ, editModel, application);
        int i2 = editModel.mVideoCanvasWidth;
        if (i2 > 0 && (i = editModel.mVideoCanvasHeight) > 0) {
            LJJ.LJ().setCanvasRatio(i2 / i);
        } else {
            LJJ.LJ().setCanvasRatio(0.5625f);
        }
        g0.LJIIJJI(LJJ, false, false, 3);
        getEditorContext().getEditor().t9(LJJ);
        String LJIIIIZZ = LJJ.LJIIIIZZ();
        editModel.nleData = LJIIIIZZ;
        this.nleData = LJIIIIZZ;
    }

    private final void initView() {
        C5L7.LIZIZ();
        if (C5H0.LIZ) {
            ConstraintLayout constraintLayout = this.dyActionBar;
            if (constraintLayout != null) {
                constraintLayout.setLayerType(2, null);
            } else {
                o.LJIJI("dyActionBar");
                throw null;
            }
        }
        initGuideView();
    }

    private final boolean isFirstEnterEditorProFromAlbum() {
        if (enterFromAlbumPage() && o.LJ(this.isFirstEnterEditorPro, Boolean.TRUE)) {
            return true;
        }
        return false;
    }

    /* JADX WARN: Code restructure failed: missing block: B:4:0x001d, code lost:
    
        if (X.C76800UCe.LIZ == null) goto L26;
     */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private final void processInitData() {
        /*
            r2 = this;
            X.5Ge r0 = r2.getEditorProInitData()
            java.lang.String r0 = r0.getEditorProAnchorType()
            r2.editorProAnchorType = r0
            X.5Ge r0 = r2.getEditorProInitData()
            java.util.ArrayList r1 = r0.getInlineCaptionCaches()
            if (r1 == 0) goto L1f
            X.5K1 r0 = new X.5K1
            r0.<init>(r1)
            r2.inlineCaptionCaches = r0
            X.UCe r0 = X.C76800UCe.LIZ
            if (r0 != 0) goto L26
        L1f:
            X.5K1 r0 = new X.5K1
            r0.<init>()
            r2.inlineCaptionCaches = r0
        L26:
            X.5Ge r0 = r2.getEditorProInitData()
            boolean r0 = r0.getEffectMultiTrackMode()
            r2.effectMode = r0
            X.5Ge r0 = r2.getEditorProInitData()
            boolean r0 = r0.isFromText()
            r2.isFromTextDuration = r0
            boolean r0 = r2.effectMode
            r0 = r0 ^ 1
            X.C5QW.LJIILIIL = r0
            X.5Ge r0 = r2.getEditorProInitData()
            java.util.ArrayList r1 = r0.getStickPointMusicList()
            if (r1 == 0) goto L54
            java.util.ArrayList<com.ss.android.ugc.aweme.shortvideo.AVMusic> r0 = r2.musicSyncMusicList
            r0.clear()
            java.util.ArrayList<com.ss.android.ugc.aweme.shortvideo.AVMusic> r0 = r2.musicSyncMusicList
            r0.addAll(r1)
        L54:
            com.ss.android.ugc.aweme.shortvideo.edit.VideoPublishEditModel r1 = r2.getEditModel()
            if (r1 == 0) goto L7b
            java.lang.String r0 = r1.nleData
            r2.nleData = r0
            boolean r0 = r1.isRetakeVideo()
            r2.isFromReshoot = r0
            if (r0 == 0) goto L70
            X.5Ge r0 = r2.getEditorProInitData()
            java.lang.String r0 = r0.getRetakeCommitId()
            r2.beforeRetakeCommitId = r0
        L70:
            com.ss.android.ugc.aweme.creative.model.CreativeModel r0 = r1.creativeModel
            com.ss.android.ugc.aweme.creative.model.draft.DraftInfoModel r0 = r0.draftInfoModel
            boolean r0 = r0.isDraft
            if (r0 != 0) goto L7b
            X.C44384HbQ.LLIIIJ(r1)
        L7b:
            X.5Ge r0 = r2.getEditorProInitData()
            long r0 = r0.getEnterMovePos()
            r2.seekPosition = r0
            X.5Ge r0 = r2.getEditorProInitData()
            java.lang.String r0 = r0.getEnterFrom()
            r2.enterFrom = r0
            r2.setTextLayoutSize()
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: com.ss.android.ugc.gamora.editorpro.EditorProScene.processInitData():void");
    }

    private final void resetEditState() {
        EditorProContext editorContext = getEditorContext();
        Boolean bool = Boolean.FALSE;
        C79057V0z.LJJJJL(editorContext, "has_shown_bottom_menu_anim_guide", bool);
        C79057V0z.LJJJJL(getEditorContext(), "event_user_guide_intercepted", bool);
        this.exitByBackPressed = false;
    }

    private final void setFunctionBarHeight() {
        C48295IxP c48295IxP = (C48295IxP) requireViewById(R.id.cjk);
        if (c48295IxP != null) {
            c48295IxP.getLayoutParams().height = (int) getResources().getDimension(R.dimen.pw);
            if (C5H0.LIZ) {
                c48295IxP.setHasFixSize(true);
            }
        }
    }

    private final void setTextLayoutSize() {
        Number valueOf;
        Number valueOf2;
        if (enterFromAlbumPage()) {
            VideoPublishEditModel editModel = getEditModel();
            if (editModel != null) {
                editModel.textLayoutWidth = C81184Vtc.LJ(C42470Gle.LIZ());
            }
            VideoPublishEditModel editModel2 = getEditModel();
            if (editModel2 != null) {
                editModel2.textLayoutHeight = C81184Vtc.LIZLLL(C42470Gle.LIZ());
            }
        }
        VideoPublishEditModel editModel3 = getEditModel();
        if (editModel3 != null) {
            valueOf = Float.valueOf(editModel3.textLayoutHeight);
        } else {
            valueOf = Integer.valueOf(C81184Vtc.LIZLLL(requireAppCompatActivity()));
        }
        this.editPageTextLayoutHeight = valueOf.intValue();
        VideoPublishEditModel editModel4 = getEditModel();
        if (editModel4 != null) {
            valueOf2 = Float.valueOf(editModel4.textLayoutWidth);
        } else {
            valueOf2 = Integer.valueOf(C81184Vtc.LJ(requireAppCompatActivity()));
        }
        int intValue = valueOf2.intValue();
        this.editPageTextLayoutWidth = intValue;
        C132005Ga c132005Ga = this.textMaterial;
        if (c132005Ga != null) {
            c132005Ga.LJLZ = intValue;
        }
    }

    private final void updateExitMobParam() {
        C79057V0z.LJJI(getEditorContext()).setExtra("exit_ep_time", String.valueOf(System.currentTimeMillis()));
        C5QW.LIZJ = System.currentTimeMillis();
        C5QW.LJ = true;
        Iterator it = ((ArrayList) C124574uj.LJJIFFI(C79057V0z.LJJI(getEditorContext()))).iterator();
        while (it.hasNext()) {
            NLETrack nLETrack = (NLETrack) it.next();
            C5QW.LJFF = nLETrack.LJIILL().size() + C5QW.LJFF;
        }
        C5QW.LIZLLL = false;
    }

    public final void animIn() {
        int i;
        if (showBottomMenuAnimGuideIfNeeded()) {
            C79057V0z.LJJJJL(getEditorContext(), "move_track_to_position", Long.valueOf(this.seekPosition));
        } else if (!this.isFromTextDuration) {
            C79057V0z.LJJJJL(getEditorContext(), "move_track_to_position", 0L);
        }
        View view = this.viewFullBg;
        if (view != null) {
            view.setVisibility(8);
            getDyPreviewContainer().setVisibility(4);
            C58D trackPanel = getTrackPanel();
            if ((trackPanel == null || (i = trackPanel.getHeight()) <= 0) && (i = (C135125Sa.LIZ().getInt("control_view_height", -1) - CONSOLE_CONTAINER_HEIGHT) - FUNCTION_BAR_HEIGHT) <= 0) {
                Companion.getClass();
                i = C132085Gi.LIZ();
            }
            getAnimationController().LJI = i;
            getAnimationController().getClass();
            getAnimationController().LJFF = new ALAdapterS1S0100000_2(this, 11);
            getAnimationController().LIZ(true);
            return;
        }
        o.LJIJI("viewFullBg");
        throw null;
    }

    public final void clickCancel() {
        C1284452i multiTrackController;
        if (((Boolean) C79057V0z.LJJIII(getEditorContext(), "is_showing_album_page", Boolean.FALSE)).booleanValue()) {
            return;
        }
        if (getEditorContext().getSelectedTrackSlot() != null && (multiTrackController = getMultiTrackController()) != null) {
            C1284452i.LJIL(multiTrackController, false, 3);
        }
        C79057V0z.LJJJJL(getEditorContext(), "about_to_exit_edit_page", Boolean.TRUE);
        handleCancel();
    }

    public final void dispatchShow() {
        if (getLifecycle().getCurrentState().isAtLeast(Lifecycle.State.RESUMED) && isEditorProInitialized()) {
            onShow();
        } else {
            this.delayOnShow = true;
        }
    }

    public final int getCanvasMaxControlHeight() {
        return (int) (C81184Vtc.LIZIZ(requireAppCompatActivity()) * 0.58f);
    }

    public final Window getWindow() {
        return requireAppCompatActivity().getWindow();
    }

    public final void initMusicTrack() {
        String str;
        EditorProContext editorContext = getEditorContext();
        VideoPublishEditModel editModel = getEditModel();
        if (editModel != null) {
            str = editModel.getMusicOrigin();
        } else {
            str = null;
        }
        C132385Hm.LJIIJ(str, editorContext);
    }

    public final boolean isFullScreen() {
        Display LIZ = C81184Vtc.LIZ(requireAppCompatActivity());
        if (LIZ == null) {
            return false;
        }
        DisplayMetrics displayMetrics = new DisplayMetrics();
        LIZ.getRealMetrics(displayMetrics);
        int i = displayMetrics.heightPixels;
        Point point = new Point();
        LIZ.getSize(point);
        if (i * 9 <= point.x * 16) {
            return false;
        }
        return true;
    }

    public final void onAnimEnd() {
        getDyPreviewContainer().setVisibility(0);
        optimizeEnterExperience();
    }

    public final void onClickDeleteMusic() {
        getEditorContext().getPlayer().pause();
        InterfaceC132055Gf interfaceC132055Gf = this.musicController;
        if (interfaceC132055Gf != null) {
            interfaceC132055Gf.LIZLLL(false, false);
        }
    }

    public final void onClickMusicSync() {
        if (System.currentTimeMillis() - this.lastMusicSyncTime > 600) {
            C2ND.LIZIZ(new AqS152S0100000_2(this, 528), 0L);
        }
    }

    @Override // com.bytedance.scene.group.UserVisibleHintGroupScene, X.WM7
    public void onDestroyView() {
        ArrayList<InterfaceC132255Gz> arrayList;
        super.onDestroyView();
        if (isEditorProInitialized()) {
            ActivityStack.removeAppBackGroundListener(this.onBackgroundListener);
            C52Q c52q = getFullScreenService().LJIIIIZZ;
            if (c52q != null) {
                c52q.onDestroy();
            }
            if (!C132385Hm.LJ) {
                AnonymousClass569.LIZIZ = null;
                AnonymousClass569.LIZ = null;
                AnonymousClass569.LIZJ = null;
                AnonymousClass569.LIZLLL = null;
                AnonymousClass569.LJ = null;
                AnonymousClass569.LJIIL = false;
                AnonymousClass569.LJII = null;
                AnonymousClass569.LJIIIIZZ.clear();
            } else {
                AnonymousClass569.LIZIZ = null;
            }
            C83547Wqd c83547Wqd = this.keyboardListener;
            if (c83547Wqd != null) {
                c83547Wqd.LIZ();
            }
            G8G.LIZ.leave(requireAppCompatActivity(), "tool_editor_pro");
            XTV.LJIIIZ.LJIIIIZZ = false;
            C133245Ku c133245Ku = this.editorProAIMusicPanelRouter;
            if (c133245Ku != null) {
                C133235Kt c133235Kt = c133245Ku.LIZIZ;
                c133235Kt.LJ().getPlayer().K9().removeObservers(c133235Kt.LIZ);
                InterfaceC133285Ky interfaceC133285Ky = c133235Kt.LJFF;
                if (interfaceC133285Ky != null) {
                    interfaceC133285Ky.destroy();
                }
            }
            C84518XFa.LIZ();
            C132105Gk.LIZIZ = C135075Rv.LIZ;
            C48841JEv.LIZJ(this.coroutineScope, null);
            C5G5 c5g5 = C5G5.LIZ;
            String str = this.lifecycleToken;
            synchronized (c5g5) {
                if (str != null) {
                    ConcurrentHashMap<String, ArrayList<InterfaceC132255Gz>> concurrentHashMap = C5G5.LIZIZ;
                    if (concurrentHashMap.containsKey(str) && (arrayList = concurrentHashMap.get(str)) != null) {
                        Iterator<InterfaceC132255Gz> it = arrayList.iterator();
                        while (it.hasNext()) {
                            it.next().onDestroy();
                        }
                        arrayList.clear();
                    }
                    ConcurrentHashMap<String, C5G6> concurrentHashMap2 = C5G5.LIZJ;
                    if (concurrentHashMap2.containsKey(str)) {
                        concurrentHashMap2.remove(str);
                    }
                    Stack<String> stack = C5G5.LIZLLL;
                    stack.remove(str);
                    StringBuilder LIZ = X1D.LIZ();
                    LIZ.append("CKLifecycleManager#notifyOnDestroy, token = ");
                    LIZ.append(str);
                    LIZ.append(", tokenStack = ");
                    LIZ.append(stack);
                    X1D.LIZIZ(LIZ);
                }
            }
            String str2 = this.viewModelProviderToken;
            if (str2 != null) {
                ConcurrentHashMap<String, C5G1> concurrentHashMap3 = C5G0.LIZ;
                if (concurrentHashMap3.containsKey(str2)) {
                    concurrentHashMap3.remove(str2);
                }
                Stack<String> stack2 = C5G0.LIZJ;
                stack2.remove(str2);
                if (stack2.isEmpty()) {
                    C5G0.LIZIZ = false;
                }
            }
        }
    }

    @Override // X.AbstractC56012Ht
    public void onHide() {
        InterfaceC45540Hu4 interfaceC45540Hu4;
        super.onHide();
        this.isOnShow = false;
        C60903NvH.LJIIJJI().LJIILIIL().updateCurrentScene("tool_editor_pro_scene", false);
        C143525kC editorProPerfManager = getEditorProPerfManager();
        if (editorProPerfManager.LJIILJJIL().getHasInitialized()) {
            editorProPerfManager.LJIILJJIL().getNleSession().V8().LJJJJJL(editorProPerfManager.LJLJI);
        }
        InterfaceC36571c5 LJIJ = C86793Y4n.LJIJ(this);
        if ((LJIJ instanceof InterfaceC45540Hu4) && (interfaceC45540Hu4 = (InterfaceC45540Hu4) LJIJ) != null) {
            interfaceC45540Hu4.unRegisterActivityResultListener(getOnActivityResultListener());
            C78923UyF.LJIILLIIL(this).LLJJL(getOnBackPressListener());
        }
        VideoPublishEditModel editModel = getEditModel();
        if (editModel == null || !C5QW.LJ) {
            return;
        }
        int i = C5QW.LJFF;
        C5QW.LJFF = 0;
        C5QW.LJ = false;
        C10K.LIZJ(new C5QZ(i, System.currentTimeMillis(), editModel));
    }

    public final void onNLERenderSuccess() {
        float dimension;
        ViewGroup.MarginLayoutParams marginLayoutParams;
        int LIZ;
        NLETrack mainTrack;
        NLETrackSlot nLETrackSlot;
        C1284452i multiTrackController;
        C79057V0z.LJJI(getEditorContext()).setExtra("enter_editor_pro_time", String.valueOf(this.enterEPTime));
        VideoPublishEditModel editModel = getEditModel();
        if (editModel != null) {
            C5QW.LJJIJIIJI(editModel, true, getEditorProInitData().isFromText(), getEditorProInitData().getEditorProAnchorType(), false);
            EditorProContext editorContext = getEditorContext();
            o.LJIIIZ(editorContext, "<this>");
            C79057V0z.LJJJJLI(editorContext, "ve_first_frame_rendered", Boolean.TRUE, true);
            if (!this.isFromReshoot && !this.effectMode && o.LJ(getEditorProInitData().getEnterFrom(), "enter_from_edit_root_adjust_clips") && C00F.LIZ(31744, 0, "editor_pro_select_first_slot", true) == 1 && (mainTrack = C79057V0z.LJJI(getEditorContext()).getMainTrack()) != null && (nLETrackSlot = (NLETrackSlot) ORZ.LJLLLLLL(0, mainTrack.LJIILLIIL())) != null && (multiTrackController = getMultiTrackController()) != null) {
                C1284452i.LJIJ(multiTrackController, nLETrackSlot, EnumC127354zD.CLIP, false, 20);
            }
        }
        InterfaceC132055Gf interfaceC132055Gf = this.musicController;
        if (interfaceC132055Gf != null) {
            interfaceC132055Gf.LJIIIIZZ(this.musicSyncMusicList, this.isFromReshoot);
        }
        String str = null;
        if (!this.isFromReshoot) {
            refreshUndoRedoState$default(this, false, false, 3, null);
        }
        C50Q funcBarController = getFuncBarController();
        if (funcBarController != null && C5DF.LIZ(C79057V0z.LJJI(getEditorContext()))) {
            C29S requireAppCompatActivity = requireAppCompatActivity();
            View requireViewById = requireViewById(R.id.cjk);
            o.LJIIIIZZ(requireViewById, "requireViewById(id.dyFunctionBarContainer)");
            View requireViewById2 = requireViewById(R.id.lj2);
            o.LJIIIIZZ(requireViewById2, "requireViewById(id.trackPanelContainer)");
            AnonymousClass585 anonymousClass585 = new AnonymousClass585(requireAppCompatActivity, (ViewGroup) requireViewById, (ViewGroup) requireViewById2);
            anonymousClass585.LJLJLLL = this.isFromTextDuration;
            EditModelProvider.Companion.getClass();
            C126784yI.LIZ().setMagicItemController$tools_camera_edit_release(anonymousClass585);
            AnonymousClass525 functionManager = funcBarController.LJI();
            o.LJIIIZ(functionManager, "functionManager");
            AnonymousClass522 LJIILJJIL = anonymousClass585.LJIILJJIL();
            VideoPublishEditModel editModel2 = C126784yI.LIZ().getEditModel();
            if (editModel2 != null) {
                str = editModel2.mShootWay;
            }
            if (C5DF.LIZIZ(str, true, anonymousClass585.LJLJLLL)) {
                ViewGroup.LayoutParams layoutParams = anonymousClass585.LJLJI.getLayoutParams();
                if ((layoutParams instanceof C018905p) && (marginLayoutParams = (ViewGroup.MarginLayoutParams) layoutParams) != null) {
                    C018905p c018905p = new C018905p(marginLayoutParams.width, marginLayoutParams.height);
                    c018905p.bottomToBottom = R.id.cjk;
                    if (C5CK.LIZIZ()) {
                        LIZ = (int) anonymousClass585.LJLIL.getResources().getDimension(R.dimen.pw);
                    } else {
                        LIZ = C134855Qz.LIZ(64.0f);
                    }
                    ((ViewGroup.MarginLayoutParams) c018905p).bottomMargin = LIZ;
                    anonymousClass585.LJLJI.setLayoutParams(c018905p);
                }
                V2B.LJIILL(anonymousClass585.LJLILLLLZI, 0, C134855Qz.LIZ(14.0f), 0, 0);
                ViewGroup.LayoutParams layoutParams2 = anonymousClass585.LJLILLLLZI.getLayoutParams();
                if (C5CK.LIZIZ()) {
                    dimension = anonymousClass585.LJLIL.getResources().getDimension(R.dimen.pv);
                } else {
                    dimension = anonymousClass585.LJLIL.getResources().getDimension(R.dimen.pu);
                }
                layoutParams2.height = (int) dimension;
                LJIILJJIL.LIZIZ(anonymousClass585.LJLJJI.getValue(), "key_lottie_anim");
                LJIILJJIL.LIZIZ(anonymousClass585.LJLJJL.getValue(), "key_view_anim");
            }
            AnonymousClass523 LIZ2 = LJIILJJIL.LIZ();
            String str2 = "bottom_item_root_effects";
            if (functionManager.LJIIIZ("root_item", "bottom_item_root_effects") == -1 || (!e1.LIZ(31744, "studio_editor_pro_add_magic_after_effect", true, false) && (e1.LIZ(31744, "studio_editor_pro_add_magic_after_effect", true, false) || e1.LIZ(31744, "studio_editor_pro_add_magic_after_text", true, false)))) {
                str2 = "bottom_item_root_text";
            }
            int LJIIIZ = functionManager.LJIIIZ("root_item", str2);
            if (LJIIIZ != -1) {
                functionManager.LJ(LJIIIZ + 1, LIZ2);
            }
        }
    }

    @Override // X.WM7
    public void onPause() {
        super.onPause();
        if (isEditorProInitialized()) {
            VideoPublishEditModel editModel = getEditModel();
            if (editModel != null) {
                G8G.LIZ.pause(requireAppCompatActivity(), "tool_performance_memory_usage_editorpro", "tool_editor_pro", editModel.mShootWay, editModel.getCreationId(), C124584uk.LIZ(getEditorContext()));
            }
            C42315Gj9.LIZJ("tool_editor_pro_enter");
        }
    }

    @Override // X.AbstractC56012Ht, X.WM7
    public void onResume() {
        View view;
        C50Q funcBarController;
        C53H LJIILIIL;
        super.onResume();
        if (!isEditorProInitialized()) {
            return;
        }
        if (enterFromAlbumPage() && !this.isInit) {
            onNormalInit();
        }
        if (this.delayOnShow) {
            this.delayOnShow = false;
            onShow();
        }
        C60903NvH.LJIIJJI().LJIILIIL().updateCurrentScene("tool_editor_pro_scene", true);
        if (isEditorProInitialized()) {
            if (C1280550v.LIZ().LIZ().LIZLLL == null) {
                C1280550v.LIZ().LIZ().LIZLLL = new C1293955z(requireAppCompatActivity());
            }
            C79057V0z.LJJJJL(getEditorContext(), "is_showing_album_page", Boolean.FALSE);
            C162696a1.LIZ(requireAppCompatActivity());
            C5RQ.LIZ(C79057V0z.LJJI(getEditorContext()), this);
            if (this.isFirstOnResume && (funcBarController = getFuncBarController()) != null && (LJIILIIL = funcBarController.LJIILIIL()) != null) {
                LJIILIIL.LIZ(new EditorProScene$onResume$1(this));
            }
            this.isFirstOnResume = false;
            initAudioTrackChecker();
            InterfaceC1278950f interfaceC1278950f = this.previewPanel;
            if (interfaceC1278950f != null) {
                interfaceC1278950f.LJLJLLL(!this.effectMode);
            }
            VideoPublishEditModel editModel = getEditModel();
            if (editModel == null) {
                return;
            }
            C5QW.LJJIJIIJI(editModel, false, this.isFromTextDuration, this.editorProAnchorType, false);
            if (C5QW.LJIIIZ <= 0 && (view = this.mView) != null) {
                C84363X9b.LIZ(view, new AqS149S0200000_2(editModel, this, 44));
            }
        }
    }

    @Override // X.AbstractC56012Ht
    public void onShow() {
        super.onShow();
        if (!isEditorProInitialized()) {
            return;
        }
        this.isOnShow = true;
        C60903NvH.LJIIJJI().LJIILIIL().updateCurrentScene("tool_editor_pro_scene", true);
        C143525kC editorProPerfManager = getEditorProPerfManager();
        if (editorProPerfManager.LJIILJJIL().getHasInitialized()) {
            editorProPerfManager.LJIILJJIL().getNleSession().V8().LJJJJI(editorProPerfManager.LJLJI);
        }
        if (!this.isInit) {
            onNormalInit();
        }
        C1284452i multiTrackController = getMultiTrackController();
        if (multiTrackController != null) {
            FrameCacheViewModel.jv0(multiTrackController.LJLJJLL);
        }
        ((InterfaceC45540Hu4) C86793Y4n.LJJIJIIJIL(this)).registerActivityResultListener(getOnActivityResultListener());
        C78923UyF.LJIILLIIL(this).LLJILJILJ(this, getOnBackPressListener());
        registerCanvasViewListeners();
        if (enterFromAlbumPage() || getEditorProInitData().getRestoreFromSavedInstanceState()) {
            initWhenMergeEditorProToEdit();
        }
        Boolean bool = this.isFirstEnterEditorPro;
        Boolean bool2 = Boolean.TRUE;
        if (o.LJ(bool, bool2)) {
            this.isFirstEnterEditorPro = Boolean.FALSE;
        }
        if (this.isFirstEnterEditorPro == null) {
            this.isFirstEnterEditorPro = bool2;
        }
    }

    @Override // X.WM7
    public void onStart() {
        VideoPublishEditModel editModel;
        super.onStart();
        if (isEditorProInitialized() && !this.isAsyncInitialization) {
            getEditorContext().addNLEListener(this.nleEditorListener);
            C79057V0z.LJFF(getEditorContext(), this.nleUndoRedoListener);
            C1284452i multiTrackController = getMultiTrackController();
            if (multiTrackController != null) {
                multiTrackController.LJIJI(true, true);
            }
            getPlayground().LJJIJLIJ();
            getPlayground().LLII = getEditorProInitData().getEffectMultiTrackMode();
            this.enterEPTime = System.currentTimeMillis();
            if (this.isInit) {
                renderNLEData();
                C5G5.LIZJ();
            }
            if (this.multipleOnStartInOneEdit && (editModel = getEditModel()) != null) {
                C5QW.LJIILIIL(editModel, false, false, false, false, true, 28);
                C5QW.LJJIIJ(editModel, false, false, false, false, true, 30);
            }
            if (!this.isFirstOnStart) {
                initSaveAndCancelBtn();
                return;
            }
            this.isFirstOnStart = false;
            if (C5CK.LIZ() == 0 || C5CK.LIZ() == 1 || !C52B.LJII(requireAppCompatActivity())) {
                return;
            }
            C60191Njn.LIZIZ(requireAppCompatActivity());
        }
    }

    @Override // X.WM7
    public void onStop() {
        long j;
        ArrayList<InterfaceC132255Gz> arrayList;
        LiveState<Long> BR;
        super.onStop();
        this.updateFromOuter = false;
        if (!this.isAsyncInitialization && isEditorProInitialized()) {
            getEditorContext().removeNLEListener(this.nleEditorListener);
            C79057V0z.LJJIL(getEditorContext(), this.nleUndoRedoListener);
            C52T c52t = this.controlBar;
            if (c52t != null && (BR = c52t.BR()) != null) {
                j = BR.LIZ().longValue();
            } else {
                j = 0;
            }
            this.lastPlayTime = j;
            String str = this.lifecycleToken;
            if (str != null) {
                ConcurrentHashMap<String, ArrayList<InterfaceC132255Gz>> concurrentHashMap = C5G5.LIZIZ;
                if (concurrentHashMap.containsKey(str) && (arrayList = concurrentHashMap.get(str)) != null) {
                    Iterator<InterfaceC132255Gz> it = arrayList.iterator();
                    while (it.hasNext()) {
                        it.next().onHide();
                    }
                }
            }
        }
    }

    public final C29S requireAppCompatActivity() {
        Activity requireActivity = requireActivity();
        o.LJII(requireActivity, "null cannot be cast to non-null type androidx.appcompat.app.AppCompatActivity");
        return (C29S) requireActivity;
    }

    public final void saveAndToPublish() {
        PostPageModel postPageModel;
        MusicBuzModel musicBuzModel;
        CreativeModel creativeModel;
        CreativeModel creativeModel2;
        VideoPublishEditModel editModel = getEditModel();
        AVMusic aVMusic = null;
        if (editModel != null && (creativeModel2 = editModel.creativeModel) != null) {
            postPageModel = creativeModel2.postPageModel;
        } else {
            postPageModel = null;
        }
        if (postPageModel != null) {
            postPageModel.isEnterFromEPDirectly = true;
        }
        updateExitMobParam();
        updateExitStatus(false, true);
        updateModelAndSave(true);
        this.multipleOnStartInOneEdit = true;
        VideoPublishEditModel editModel2 = getEditModel();
        if (editModel2 != null && (creativeModel = editModel2.creativeModel) != null) {
            musicBuzModel = creativeModel.musicBuzModel;
        } else {
            musicBuzModel = null;
        }
        AVMusic extractAVMusic = MusicBeanUtilKt.extractAVMusic(musicBuzModel);
        if (extractAVMusic != null) {
            aVMusic = extractAVMusic.m156clone();
        }
        C132385Hm.LIZLLL = aVMusic;
        getUiActions().LJLJJLL.invoke();
    }

    private final void updateSurfaceSizeInDarkRoomCanvas() {
        updateSurfaceSizeInternal();
    }

    public final String getAfterRetakeCommitId() {
        return this.afterRetakeCommitId;
    }

    public final int getCanvasControlInitHeight() {
        return this.canvasControlInitHeight;
    }

    public final int getEditPageTextLayoutHeight() {
        return this.editPageTextLayoutHeight;
    }

    public final int getEditPageTextLayoutWidth() {
        return this.editPageTextLayoutWidth;
    }

    public final String getEditorProAnchorType() {
        return this.editorProAnchorType;
    }

    public final C5DC getEditorProGuidanceController() {
        return this.editorProGuidanceController;
    }

    public final C132005Ga getTextMaterial() {
        return this.textMaterial;
    }

    public final boolean getUpdateFromOuter() {
        return this.updateFromOuter;
    }

    public final C125154vf getVideoEffectController() {
        return this.videoEffectController;
    }

    public final boolean isAnimOutFinish() {
        return this.isAnimOutFinish;
    }

    private final void animOut(boolean z) {
        float f;
        TrackPanelViewModel Vo0;
        this.isAnimOutFinish = false;
        InterfaceC88474Ynu<Boolean, Boolean, Boolean, Boolean, C76800UCe> interfaceC88474Ynu = getUiActions().LJLJI;
        Boolean valueOf = Boolean.valueOf(z);
        Boolean bool = this.isFirstEnterEditorPro;
        Boolean bool2 = Boolean.TRUE;
        interfaceC88474Ynu.invoke(valueOf, Boolean.valueOf(o.LJ(bool, bool2)), Boolean.valueOf(enterFromAlbumPage()), bool2);
        C51E c51e = this.trackPanelApi;
        if (c51e != null && (Vo0 = c51e.Vo0()) != null) {
            Vo0.LJLILLLLZI = null;
            Vo0.LJLJI = null;
        }
        getDyPreviewContainer().setVisibility(8);
        C131985Fy animationController = getAnimationController();
        C58D trackPanel = getTrackPanel();
        if (trackPanel != null) {
            f = trackPanel.getHeight();
        } else {
            f = 0.0f;
        }
        animationController.LJI = f;
        C131985Fy animationController2 = getAnimationController();
        C58D trackPanel2 = getTrackPanel();
        if (trackPanel2 != null) {
            trackPanel2.getHeight();
        }
        animationController2.getClass();
        getAnimationController().LJFF = new ALAdapterS1S0110000_2(this, z, 1);
        getAnimationController().LIZ(false);
    }

    private final void cancelActual(boolean z) {
        boolean z2;
        MultiEditVideoRecordData multiEditVideoRecordData;
        C1284452i multiTrackController;
        MultiEditVideoStatusRecordData multiEditVideoStatusRecordData;
        C5QW.LIZJ = System.currentTimeMillis();
        C5QW.LJ = true;
        Iterator it = ((ArrayList) C124574uj.LJJIFFI(C79057V0z.LJJI(getEditorContext()))).iterator();
        while (it.hasNext()) {
            C5QW.LJFF = ((NLETrack) it.next()).LJIILL().size() + C5QW.LJFF;
        }
        C5QW.LIZLLL = true;
        VideoPublishEditModel editModel = getEditModel();
        if (editModel != null) {
            getEditorProPerfManager().LJIILL(editModel);
        }
        MultiEditVideoRecordData multiEditVideoRecordData2 = AnonymousClass569.LIZ;
        if (multiEditVideoRecordData2 != null) {
            z2 = multiEditVideoRecordData2.hasRetake;
        } else {
            z2 = false;
        }
        MultiEditVideoRecordData LIZIZ = C6BI.LIZIZ(AnonymousClass569.LIZLLL, AnonymousClass569.LIZ);
        AnonymousClass569.LIZ = LIZIZ;
        LIZIZ.hasRetake = z2;
        VideoPublishEditModel videoPublishEditModel = AnonymousClass569.LIZJ;
        if (videoPublishEditModel != null && (multiEditVideoStatusRecordData = videoPublishEditModel.multiEditVideoRecordData) != null) {
            multiEditVideoStatusRecordData.isMultiEditRetake = false;
        }
        EditorProCancelData editorProCancelData = new EditorProCancelData();
        MultiEditVideoRecordData multiEditVideoRecordData3 = AnonymousClass569.LIZ;
        if (multiEditVideoRecordData3 != null) {
            multiEditVideoRecordData = multiEditVideoRecordData3.cloneData();
        } else {
            multiEditVideoRecordData = null;
        }
        editorProCancelData.curMultiEditData = multiEditVideoRecordData;
        editorProCancelData.isRetake = false;
        editorProCancelData.effectMultiTrackMode = this.effectMode;
        editorProCancelData.exitByBackPressed = this.exitByBackPressed;
        if (!isFirstEnterEditorProFromAlbum()) {
            C132385Hm.LJIIIZ(null, null);
            C51E c51e = this.trackPanelApi;
            if (c51e != null && (multiTrackController = c51e.getMultiTrackController()) != null) {
                C1284452i.LJIL(multiTrackController, false, 3);
            }
            getUiActions().LJLIL.invoke(editorProCancelData);
        }
        C136935Yz c136935Yz = this.editorProFileCenter;
        if (c136935Yz != null) {
            C10K.LIZJ(new ACallableS105S0100000_2(c136935Yz, 28));
        }
        EditModelProvider.Companion.getClass();
        C126784yI.LIZ().setBgmSoundTrimModel$tools_camera_edit_release(null);
        this.isFirstOnResume = true;
        exitPage$default(this, false, null, null, z, 6, null);
    }

    private final void showDiscardConfirmDialog(InterfaceC65784Pro<C76800UCe> interfaceC65784Pro) {
        VideoPublishEditModel editModel = getEditModel();
        if (editModel != null) {
            EditorProContext editorContext = getEditorContext();
            o.LJIIIZ(editorContext, "editorContext");
            FMX.LJIIL("discard_your_edits_popup", C5QW.LJ(editorContext.getPlayer().s5(), C79057V0z.LJJI(editorContext), editModel).LIZ);
        }
        C26227ARb c26227ARb = new C26227ARb(requireAppCompatActivity());
        c26227ARb.LIZ(R.string.fm8);
        UC0.LIZJ(c26227ARb, new AqS133S0200000_2((InterfaceC65784Pro) interfaceC65784Pro, (InterfaceC65784Pro<C76800UCe>) this, (EditorProScene) 75));
        c26227ARb.LJI().LIZLLL();
    }

    private final void updateModelAndSave(boolean z) {
        VideoPublishEditModel editModel;
        String newNleData = C79057V0z.LJJ(getEditorContext()).LJIIIIZZ();
        updateEditModelByNLE();
        EditModelProvider.Companion.getClass();
        EditModelProvider LIZ = C126784yI.LIZ();
        o.LJIIIIZZ(newNleData, "newNleData");
        boolean updateNLEModel = LIZ.updateNLEModel(newNleData);
        boolean LJIIJ = C79057V0z.LJIIJ(getEditorContext());
        if (updateNLEModel && (editModel = LIZ.getEditModel()) != null) {
            getEditorProPerfManager().LJIILL(editModel);
            EditorProSaveData buildSaveData = buildSaveData(editModel, LJIIJ);
            if (!enterFromAlbumPage()) {
                C132385Hm.LJIIIZ(C79057V0z.LJJI(getEditorContext()), editModel.nleData);
            }
            getUiActions().LJLILLLLZI.invoke(buildSaveData, Boolean.valueOf(z));
        }
    }

    public final void bindNLESessionHolder(C51Z nleSessionHolder) {
        o.LJIIIZ(nleSessionHolder, "nleSessionHolder");
        this.nleSessionHolder = nleSessionHolder;
    }

    public final boolean checkShowCopyrightWarning(VideoPublishEditModel videoPublishEditModel) {
        if (videoPublishEditModel == null || this.lastPanelBounceEvent || isShortVideo()) {
            return false;
        }
        C5HA.LIZ.getClass();
        FFL.LJIIIZ().getClass();
        if (FFL.LJIIJ(31744, 0, "audio_copyright_shorten_video_show", true) != 1 || C5HR.LIZ() || C5HS.LIZ() || !C146535p3.LIZLLL(videoPublishEditModel)) {
            return false;
        }
        return true;
    }

    public final void clickSave(boolean z) {
        C1284452i multiTrackController;
        if (((Boolean) C79057V0z.LJJIII(getEditorContext(), "is_showing_album_page", Boolean.FALSE)).booleanValue()) {
            return;
        }
        if (C79057V0z.LJJII(getEditorContext()) > this.maxLimitTimeMillis) {
            if (!C135125Sa.LIZ().getBoolean("ExceedTimeLimitDialogShown", false)) {
                VideoPublishEditModel editModel = getEditModel();
                if (editModel != null) {
                    C5QW.LJJIJL(editModel, getEditorContext());
                }
                C26227ARb LIZ = C3AW.LIZ(requireAppCompatActivity());
                LIZ.LIZIZ(getResources().getString(R.string.fnb, Long.valueOf((this.maxLimitTimeMillis / 60) / 1000)));
                UC0.LIZJ(LIZ, new AqS45S0110000_2(this, z, 6));
                LIZ.LJI().LIZLLL();
                C135125Sa.LIZ().storeBoolean("ExceedTimeLimitDialogShown", true);
                return;
            }
            VideoPublishEditModel editModel2 = getEditModel();
            if (editModel2 != null) {
                C5QW.LJJIJL(editModel2, getEditorContext());
            }
        }
        if (getEditorContext().getSelectedTrackSlot() != null && (multiTrackController = getMultiTrackController()) != null) {
            C1284452i.LJIL(multiTrackController, false, 3);
        }
        EditModelProvider.Companion.getClass();
        C126784yI.LIZ().setBgmSoundTrimModel$tools_camera_edit_release(null);
        this.isFirstOnResume = true;
        handleSave(z);
    }

    public final void doAfterFirstFrame(boolean z) {
        View ol0;
        if (SceneExtensionsKt.LIZ(this)) {
            return;
        }
        InterfaceC1294756h interfaceC1294756h = this.editorProInitApi;
        if (interfaceC1294756h != null) {
            interfaceC1294756h.MV();
        }
        C58D trackPanel = getTrackPanel();
        if (trackPanel != null) {
            trackPanel.refreshVideoFramesIfNeeded();
        }
        C68M.LJIIJ().LJIJ(getApplicationContext());
        updateSurfaceSizeInternal();
        if (z && ((Boolean) C5HY.LIZ.getValue()).booleanValue() && !this.isFromReshoot) {
            boolean showBottomMenuAnimGuideIfNeeded = showBottomMenuAnimGuideIfNeeded();
            InterfaceC1278950f interfaceC1278950f = this.previewPanel;
            if (interfaceC1278950f == null || (ol0 = interfaceC1278950f.ol0(true)) == null) {
                getPlayground().LJJIII();
                seekToPosition$default(this, showBottomMenuAnimGuideIfNeeded, null, 2, null);
                return;
            } else {
                C84363X9b.LIZ(ol0, new AqS148S0200000_1(ol0, (View) new AqS35S0210000_2(ol0, this, showBottomMenuAnimGuideIfNeeded, 3), (InterfaceC65784Pro<C76800UCe>) 19));
                return;
            }
        }
        getPlayground().LJJIII();
        seekToPosition$default(this, false, null, 3, null);
    }

    public final void finish(boolean z) {
        ArrayList<InterfaceC132255Gz> arrayList;
        WMH wmh;
        this.isFirstLoadNLEModel = true;
        resetEditState();
        dispatchHide();
        WM7 wm7 = this.mParentScene;
        if ((wm7 instanceof WMH) && (wmh = (WMH) wm7) != null) {
            H78.LJI("EditorProScene finish EditorProScene begin");
            wmh.hide(this);
            H78.LJI("EditorProScene finish EditorProScene end");
        }
        String str = this.lifecycleToken;
        if (str != null) {
            ConcurrentHashMap<String, ArrayList<InterfaceC132255Gz>> concurrentHashMap = C5G5.LIZIZ;
            if (concurrentHashMap.containsKey(str) && (arrayList = concurrentHashMap.get(str)) != null) {
                Iterator<InterfaceC132255Gz> it = arrayList.iterator();
                while (it.hasNext()) {
                    it.next().onExitEditPage(z);
                }
            }
        }
        Activity activity = this.mActivity;
        if (activity != null) {
            activity.overridePendingTransition(0, 0);
        }
        C84518XFa.LIZ();
    }

    public final void fixForBlackSlot(NLEModel nLEModel) {
        long j;
        if (C00F.LIZ(31744, 0, "editor_pro_black_frame_optimization", true) != 3) {
            return;
        }
        NLETrack mainTrack = nLEModel.getMainTrack();
        if (mainTrack != null) {
            j = mainTrack.getDuration();
        } else {
            j = 0;
        }
        if (C124574uj.LIZLLL(nLEModel) <= j) {
            return;
        }
        C124614un.LIZJ(getEditorContext());
    }

    public final void handleSave(boolean z) {
        InterfaceC79150V4o interfaceC79150V4o = this.saveJob;
        if (interfaceC79150V4o != null && interfaceC79150V4o.isActive()) {
            return;
        }
        this.saveJob = XKX.LIZLLL(this.coroutineScope, null, null, new C5FF(this, z, null), 3);
    }

    public final void initPipLayout(AnonymousClass509 pipFunctionHandler) {
        o.LJIIIZ(pipFunctionHandler, "pipFunctionHandler");
        pipFunctionHandler.LJIILIIL = new AqS152S0100000_2(this, 559);
    }

    public final void initTextEditLayout(C52G textFunctionHandler) {
        o.LJIIIZ(textFunctionHandler, "textFunctionHandler");
        textFunctionHandler.LJII = new AqS168S0100000_2(this, 321);
        textFunctionHandler.LJIIIIZZ = new AqS152S0100000_2(this, 527);
        textFunctionHandler.LJIIIZ = new AqS152S0100000_2(this, 529);
        textFunctionHandler.LJIIJJI = new AqS133S0200000_2(this, textFunctionHandler, 74);
        textFunctionHandler.LJIIL = new AqS149S0200000_2(this, textFunctionHandler, 45);
        textFunctionHandler.LJIILIIL = new AqS152S0100000_2(this, 534);
        textFunctionHandler.LJIILJJIL = new AqS152S0100000_2(this, 537);
        textFunctionHandler.LJIIJ = new AqS168S0100000_2(this, 324);
        textFunctionHandler.LJIILL = new AqS168S0100000_2(this, 325);
    }

    public final void initTextTrack(NLEModel nleModel) {
        List<TextStickerData> LIZLLL;
        String enterSelectSlotId = getEditorProInitData().getEnterSelectSlotId();
        o.LJIIIZ(nleModel, "nleModel");
        Iterator<NLETrack> it = nleModel.getTracks().iterator();
        o.LJIIIIZZ(it, "nleModel.tracks.iterator()");
        while (it.hasNext()) {
            NLETrack track = it.next();
            o.LJIIIIZZ(track, "track");
            if (o.LJ(C124574uj.LJJIIZ(track), "sticker")) {
                nleModel.removeTrack(track);
            }
        }
        VideoPublishEditModel editModel = getEditModel();
        if (editModel != null && (LIZLLL = C137045Zk.LIZLLL(editModel)) != null) {
            ArrayList arrayList = new ArrayList();
            for (TextStickerData textStickerData : LIZLLL) {
                if (true ^ textStickerData.isGuidanceSticker()) {
                    arrayList.add(textStickerData);
                }
            }
            List<TextStickerData> LLILII = ORZ.LLILII(new IDComparatorS30S0000000_2(15), arrayList);
            if (LLILII != null) {
                for (TextStickerData textStickerData2 : LLILII) {
                    this.editPageTextInputPositionY = textStickerData2.getEditCenterPoint().y;
                    this.textEditLayoutTargetPositionX = textStickerData2.getEditCenterPoint().x;
                    NLETrackSlot buildSlotFromTextStickerData = buildSlotFromTextStickerData(textStickerData2, EnumC132095Gj.EditPageAdd);
                    if (textStickerData2.isCaption()) {
                        C5FC.LIZ(nleModel, buildSlotFromTextStickerData);
                    } else {
                        C5FC.LIZIZ(nleModel, buildSlotFromTextStickerData);
                    }
                    if (enterSelectSlotId != null && enterSelectSlotId.length() != 0 && o.LJ(enterSelectSlotId, textStickerData2.getPlaceholderSlotId())) {
                        this.selectSlotFromOut = buildSlotFromTextStickerData;
                    }
                }
            }
        }
        StringBuilder LIZ = X1D.LIZ();
        LIZ.append("EditorProScene -> initTextTrack -> caption.size = ");
        Integer num = null;
        ArrayList LJIILLIIL = AnonymousClass636.LJIILLIIL(getEditorContext(), null, null);
        if (LJIILLIIL != null) {
            num = Integer.valueOf(LJIILLIIL.size());
        }
        LIZ.append(num);
        H78.LIZ(X1D.LIZIZ(LIZ));
    }

    public final void initVideoLayout(C1281551f videoFunctionHandler) {
        o.LJIIIZ(videoFunctionHandler, "videoFunctionHandler");
        videoFunctionHandler.LJIILL = new AqS152S0100000_2(this, 546);
    }

    @Override // X.InterfaceC83564Wqu
    public void keyBoardHide(int i) {
        TrackPanelViewModel trackPanelViewModel;
        C1284452i multiTrackController;
        C132005Ga c132005Ga;
        C5K1 c5k1;
        CreativeModel creativeModel;
        InlineCaptionModel inlineCaptionModel;
        String str;
        if (!(!getTextStickerEditLayout().LJLLI)) {
            return;
        }
        C79057V0z.LJJJJL(getEditorContext(), "is_bottom_panel_showing", Boolean.FALSE);
        C79057V0z.LJJJJL(getEditorContext(), "panel_bounce_event", new AnonymousClass516("text_keyboard", i, false));
        TextStickerData LIZ = getTextStickerEditLayout().LIZ();
        if (LIZ == null) {
            return;
        }
        this.editPageTextInputPositionY = LIZ.getEditCenterPoint().y;
        String str2 = "";
        if (!o.LJ(getTextStickerEditLayout().getCurrentSlotId(), "")) {
            C1284452i multiTrackController2 = getMultiTrackController();
            if (multiTrackController2 != null) {
                multiTrackController2.LJIJJLI(TrackState.TEXT);
            }
            C58D trackPanel = getTrackPanel();
            if (trackPanel != null) {
                trackPanel.showOrHideNullAudioTrack(false);
            }
            C58D trackPanel2 = getTrackPanel();
            if (trackPanel2 != null) {
                trackPanel2.showOrHideNullEffectTrack(false);
            }
            String textStr = LIZ.getTextStr();
            if (textStr == null || textStr.length() == 0) {
                EditorProContext editorContext = getEditorContext();
                String id = getTextStickerEditLayout().getCurrentSlotId();
                o.LJIIIZ(editorContext, "editorContext");
                o.LJIIIZ(id, "id");
                Iterator it = ((ArrayList) C5FC.LJIIIIZZ(C79057V0z.LJJI(editorContext))).iterator();
                while (true) {
                    if (!it.hasNext()) {
                        break;
                    }
                    NLETrack nLETrack = (NLETrack) it.next();
                    Iterator<NLETrackSlot> it2 = nLETrack.LJIILL().iterator();
                    o.LJIIIIZZ(it2, "track.slots.iterator()");
                    while (it2.hasNext()) {
                        NLETrackSlot next = it2.next();
                        if (TextUtils.equals(next.getUUID(), id)) {
                            nLETrack.LJIJJLI(next);
                            C134215On.LIZIZ(next, getEditorContext());
                            C79057V0z.LJIILL(getEditorContext(), C6YK.LIZ(new C139795eB(EnumC126814yL.DELETE.getNameId(), null, null, null, null, 30)));
                            C1284452i multiTrackController3 = getMultiTrackController();
                            if (multiTrackController3 != null) {
                                C1284452i.LJIL(multiTrackController3, false, 3);
                            }
                        }
                    }
                }
                C132005Ga c132005Ga2 = this.textMaterial;
                if (c132005Ga2 != null) {
                    c132005Ga2.LJLLL = false;
                }
                if (C138525c8.LIZ() && ColorPickerFragment.LJZ) {
                    ColorPickerViewModel colorPickerViewModel = (ColorPickerViewModel) C165706es.LJIIIIZZ(this, null, null, 6).get(ColorPickerViewModel.class);
                    colorPickerViewModel.getClass();
                    colorPickerViewModel.LJLIL = "";
                }
            } else {
                AqS91S0300000_2 aqS91S0300000_2 = new AqS91S0300000_2(LIZ, C5FC.LJ(getTextStickerEditLayout().getCurrentSlotId(), getEditorContext()), this, 9);
                C1551667c c1551667c = this.currentInEditTextView;
                if (c1551667c != null) {
                    c1551667c.setTextColor(LIZ.getColor());
                    c1551667c.setAligin(LIZ.getAlign());
                    c1551667c.LJIIIIZZ(LIZ.getBgMode(), LIZ.getColor());
                    c1551667c.setFontType(C68M.LJIIJ().LJIIL(C68M.LJIIJ().LIZJ));
                    c1551667c.LJIIIZ(C68W.LJFF(LIZ.getTextWrapList()).length(), C68W.LJFF(LIZ.getTextWrapList()));
                }
                C5FC.LJIIJ(this.currentInEditTextView, C5FC.LIZ, C5FC.LIZIZ, false, new AqS152S0100000_2(aqS91S0300000_2, 548));
            }
            if (getTextStickerEditLayout().getCurrentIsCaption() && (c5k1 = this.inlineCaptionCaches) != null) {
                VideoPublishEditModel editModel = getEditModel();
                if (editModel != null && (creativeModel = editModel.creativeModel) != null && (inlineCaptionModel = creativeModel.inlineCaptionModel) != null && (str = inlineCaptionModel.selectLanguage) != null) {
                    str2 = str;
                }
                c5k1.LJ(str2, AnonymousClass636.LJIILLIIL(getEditorContext(), Integer.valueOf(this.editPageTextLayoutWidth), Integer.valueOf(this.editPageTextLayoutHeight)), null);
            }
        } else {
            String textStr2 = LIZ.getTextStr();
            if (textStr2 == null || textStr2.length() == 0) {
                if (AnonymousClass515.LIZ()) {
                    C58D trackPanel3 = getTrackPanel();
                    if (trackPanel3 != null) {
                        trackPanel3.showOrHideNullAudioTrack(C124604um.LJIIIZ(getEditorContext()));
                    }
                    C1284452i multiTrackController4 = getMultiTrackController();
                    if (multiTrackController4 != null && (trackPanelViewModel = multiTrackController4.LJLILLLLZI) != null && trackPanelViewModel.ov0() && (multiTrackController = getMultiTrackController()) != null) {
                        multiTrackController.LJIJJLI(TrackState.NORMAL);
                        return;
                    }
                    return;
                }
                return;
            }
            C79057V0z.LJJI(getEditorContext()).setExtra("use_text_in_editor_pro", "true");
            LIZ.setTextWrapList(getTextStickerEditLayout().getTextWrapList());
            NLETrackSlot buildSlotFromTextStickerData = buildSlotFromTextStickerData(LIZ, EnumC132095Gj.EditorProAddNew);
            buildSlotFromTextStickerData.setExtra("is_editor_pro_add_text_used", "true");
            buildSlotFromTextStickerData.setExtra("is_editorpro_text", "1");
            buildSlotFromTextStickerData.setExtra("slot_add_order", String.valueOf(C124574uj.LJJII(C79057V0z.LJJI(getEditorContext()))));
            long j = 1000;
            buildSlotFromTextStickerData.setStartTime(C79057V0z.LJIJJLI(getEditorContext()) * j);
            buildSlotFromTextStickerData.setEndTime((C79057V0z.LJIJJLI(getEditorContext()) + 3000) * j);
            if (!((Boolean) C5BA.LIZ(EnumC127484zQ.ENABLE_SUBTRACK_OVER_MAIN, Boolean.TRUE)).booleanValue()) {
                long LIZLLL = C124574uj.LIZLLL(C79057V0z.LJJI(getEditorContext()));
                if (buildSlotFromTextStickerData.getEndTime() > LIZLLL) {
                    buildSlotFromTextStickerData.setEndTime(LIZLLL);
                }
            }
            NLETrack LIZIZ = C5FC.LIZIZ(C79057V0z.LJJI(getEditorContext()), buildSlotFromTextStickerData);
            if (LIZIZ == null) {
                return;
            }
            C139795eB c139795eB = new C139795eB(EnumC126814yL.ADD_TEXT.getNameId(), null, null, null, null, 30);
            if (C132575If.LIZ() && C5DH.LIZ() && (c132005Ga = this.textMaterial) != null) {
                ((ArrayList) c132005Ga.LJZL).add(new AqS149S0200000_2(this, buildSlotFromTextStickerData, 46));
            }
            C79057V0z.LJIILL(getEditorContext(), C6YK.LIZ(c139795eB));
            EditorProContext editorContext2 = getEditorContext();
            NLEModel LJJI = C79057V0z.LJJI(getEditorContext());
            String uuid = buildSlotFromTextStickerData.getUUID();
            o.LJIIIIZZ(uuid, "slot.uuid");
            C79057V0z.LJJJJL(editorContext2, "select_slot_event", new C127594zb(SFS.LJIJJ(LJJI, uuid), null, 14));
            C132005Ga c132005Ga3 = this.textMaterial;
            if (c132005Ga3 != null) {
                c132005Ga3.LJLLL = false;
                InterfaceC1278950f interfaceC1278950f = this.previewPanel;
                if (interfaceC1278950f != null) {
                    interfaceC1278950f.G6(LIZIZ, buildSlotFromTextStickerData);
                }
            }
        }
        this.currentInEditTextSlot = null;
        this.currentInEditTextView = null;
    }

    @Override // X.InterfaceC83564Wqu
    public void keyBoardShow(int i) {
        String str;
        OSZ<String, InterfaceC132925Jo> VZ;
        if (this.inCaptionEditing) {
            return;
        }
        InterfaceC1278950f interfaceC1278950f = this.previewPanel;
        if (interfaceC1278950f != null && (VZ = interfaceC1278950f.VZ()) != null) {
            str = VZ.getFirst();
        } else {
            str = null;
        }
        if (!o.LJ(str, "text_sticker_material") || (!getTextStickerEditLayout().LJLLI)) {
            return;
        }
        C1551667c c1551667c = this.currentInEditTextView;
        if (c1551667c != null) {
            C5FC.LIZ = new C5FE(c1551667c.getTranslationX(), c1551667c.getTranslationY(), c1551667c.getScaleX(), c1551667c.getRotation());
            C5FE c5fe = new C5FE(0.0f, (this.editPageTextInputPositionY - getDyPreviewContainer().getTop()) - (getDyPreviewContainer().getMeasuredHeight() / 2), 1.0f, 0.0f);
            C5FC.LIZIZ = c5fe;
            C5FC.LJIIJ(c1551667c, C5FC.LIZ, c5fe, true, null);
        }
        C1539662m textStickerEditLayout = getTextStickerEditLayout();
        textStickerEditLayout.getClass();
        C136685Ya.LIZIZ(-1L, null, textStickerEditLayout);
        AnonymousClass645 anonymousClass645 = textStickerEditLayout.LJLLJ;
        if (anonymousClass645 != null) {
            anonymousClass645.show();
        }
        textStickerEditLayout.LJLLI = false;
        if (((ArrayList) C68M.LJIIJ().LJIIIZ()).isEmpty()) {
            CreativeToastBuilder creativeToastBuilder = new CreativeToastBuilder();
            creativeToastBuilder.messageRes(R.string.e8e);
            C78915Uy7.LJJIJ(textStickerEditLayout, 3025, creativeToastBuilder);
        }
        C6B9 c6b9 = textStickerEditLayout.LLIIZ;
        if (c6b9 != null) {
            if (textStickerEditLayout.LLIL) {
                if (!textStickerEditLayout.LLIIL) {
                    textStickerEditLayout.LIZJ(28);
                    C1551667c c1551667c2 = textStickerEditLayout.LJLJI;
                    if (c1551667c2 != null) {
                        c1551667c2.setDefaultTextSize(28);
                    }
                }
            } else if (textStickerEditLayout.LLIIL) {
                textStickerEditLayout.LIZJ(22);
                C1551667c c1551667c3 = textStickerEditLayout.LJLJI;
                if (c1551667c3 != null) {
                    c1551667c3.setDefaultTextSize(22);
                }
            }
            C1551667c c1551667c4 = textStickerEditLayout.LJLJI;
            c6b9.LJLJJLL.LIZIZ(c1551667c4);
            c6b9.LJLJL = c1551667c4;
            c6b9.LIZIZ();
        }
        C1539662m textStickerEditLayout2 = getTextStickerEditLayout();
        View view = textStickerEditLayout2.LJLLLL;
        o.LJI(view);
        ViewGroup.LayoutParams layoutParams = view.getLayoutParams();
        o.LJII(layoutParams, "null cannot be cast to non-null type android.widget.RelativeLayout.LayoutParams");
        RelativeLayout.LayoutParams layoutParams2 = (RelativeLayout.LayoutParams) layoutParams;
        layoutParams2.bottomMargin = i;
        View view2 = textStickerEditLayout2.LJLLLL;
        o.LJI(view2);
        view2.setLayoutParams(layoutParams2);
        C79057V0z.LJJJJL(getEditorContext(), "is_bottom_panel_showing", Boolean.TRUE);
        C79057V0z.LJJJJL(getEditorContext(), "panel_bounce_event", new AnonymousClass516("text_keyboard", i, true));
    }

    public final void notifyTimeChange(long j) {
        C52T c52t = this.controlBar;
        if (c52t != null) {
            c52t.LLLLLLLLL(j);
        }
    }

    @Override // com.bytedance.scene.group.UserVisibleHintGroupScene, X.WM7
    public void onActivityCreated(Bundle bundle) {
        super.onActivityCreated(bundle);
        if (this.stubLayout == null) {
            initOnActivityCreated();
        }
        C5QW.LJJJJ("step2_perf_editor_pro_on_create_view");
    }

    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Type inference failed for: r0v6, types: [X.5H4] */
    public final void onClickAddMusic(C132115Gl c132115Gl) {
        if (!((Boolean) C5BA.LIZ(EnumC127484zQ.ENABLE_SUBTRACK_OVER_MAIN, Boolean.TRUE)).booleanValue()) {
            EditorProContext editorContext = getEditorContext();
            o.LJIIIZ(editorContext, "editorContext");
            if ((!e1.LIZ(31744, "studio_editor_pro_change_replace_sound_position", true, false) || C132385Hm.LJIIL(editorContext) == null) && !C133005Jw.LIZ()) {
                if ((C124574uj.LIZLLL(C79057V0z.LJJI(getEditorContext())) - (C79057V0z.LJIJJLI(getEditorContext()) * 1000)) / 1000 < ((Number) C5BA.LIZ(EnumC127484zQ.IMPORT_LIMIT, 100)).intValue()) {
                    C29S requireAppCompatActivity = requireAppCompatActivity();
                    CreativeToastBuilder creativeToastBuilder = new CreativeToastBuilder();
                    creativeToastBuilder.messageRes(R.string.ca4);
                    C78915Uy7.LJJIIZI(requireAppCompatActivity, 1043, creativeToastBuilder);
                    return;
                }
            }
        }
        if (C141085gG.LIZ()) {
            InterfaceC132055Gf interfaceC132055Gf = this.musicController;
            if (interfaceC132055Gf != null) {
                H8F.LJJII(getEditModel(), "ai_panel", true);
                C133245Ku c133245Ku = this.editorProAIMusicPanelRouter;
                if (c133245Ku == null) {
                    C133245Ku c133245Ku2 = new C133245Ku(this, interfaceC132055Gf, c132115Gl);
                    this.editorProAIMusicPanelRouter = c133245Ku2;
                    c133245Ku2.LIZ();
                    return;
                }
                c133245Ku.LIZ();
                return;
            }
            return;
        }
        H8F.LJJII(getEditModel(), "select_music_page", true);
        InterfaceC132055Gf interfaceC132055Gf2 = this.musicController;
        if (interfaceC132055Gf2 != 0) {
            interfaceC132055Gf2.LJIIJJI(new Object() { // from class: X.5H4
            }, c132115Gl);
        }
    }

    @Override // com.bytedance.scene.group.UserVisibleHintGroupScene, X.WMH, X.WM7
    public void onSaveInstanceState(Bundle outState) {
        o.LJIIIZ(outState, "outState");
        super.onSaveInstanceState(outState);
        C79057V0z.LJJ(getEditorContext()).LJIIIIZZ();
    }

    @Override // X.InterfaceC45540Hu4
    public void registerActivityOnKeyDownListener(C5HC listener) {
        o.LJIIIZ(listener, "listener");
        if (!this.onKeyDownList.contains(listener)) {
            this.onKeyDownList.addFirst(listener);
        }
    }

    @Override // X.InterfaceC127674zj
    public void registerActivityResultListener(InterfaceC127684zk listener) {
        o.LJIIIZ(listener, "listener");
        if (!this.activityResultListeners.contains(listener)) {
            this.activityResultListeners.add(listener);
        }
    }

    public final Object saveRecordAudio(InterfaceC67352kd<? super C76800UCe> interfaceC67352kd) {
        ConstraintLayout constraintLayout = this.contentView;
        if (constraintLayout != null) {
            AudioRecordActivityViewModel LIZ = C1278850e.LIZ(constraintLayout);
            VideoPublishEditModel editModel = getEditModel();
            if (editModel == null) {
                return C76800UCe.LIZ;
            }
            Object kv0 = LIZ.kv0(editModel, getEditorContext(), new AqS152S0100000_2(this, 551), interfaceC67352kd);
            if (kv0 == EnumC58928NAu.COROUTINE_SUSPENDED) {
                return kv0;
            }
            return C76800UCe.LIZ;
        }
        o.LJIJI("contentView");
        throw null;
    }

    public final void scrollToMagicIndexIfNeed(RecyclerView recyclerView) {
        LinearLayoutManager linearLayoutManager;
        C50Q funcBarController;
        AnonymousClass525 LJI;
        boolean LIZ;
        int LJIIIZ;
        C0A2 layoutManager = recyclerView.getLayoutManager();
        String str = null;
        if ((layoutManager instanceof LinearLayoutManager) && (linearLayoutManager = (LinearLayoutManager) layoutManager) != null && (funcBarController = getFuncBarController()) != null && (LJI = funcBarController.LJI()) != null && (LIZ = C5DF.LIZ(C79057V0z.LJJI(getEditorContext())))) {
            VideoPublishEditModel editModel = getEditModel();
            if (editModel != null) {
                str = editModel.mShootWay;
            }
            if (C5DF.LIZIZ(str, LIZ, this.isFromTextDuration) && (LJIIIZ = LJI.LJIIIZ("root_item", "bottom_item_root_magic")) != -1) {
                int LLILL = linearLayoutManager.LLILL();
                int LLILLJJLI = linearLayoutManager.LLILLJJLI();
                if (LLILL <= LJIIIZ && LJIIIZ <= LLILLJJLI) {
                    return;
                }
                recyclerView.LJLI(LJIIIZ);
            }
        }
    }

    public final void setAnimOutFinish(boolean z) {
        this.isAnimOutFinish = z;
    }

    public final void setCanvasControlInitHeight(int i) {
        this.canvasControlInitHeight = i;
    }

    public final void setDyPreviewContainer(InterceptorFrameLayout interceptorFrameLayout) {
        o.LJIIIZ(interceptorFrameLayout, "<set-?>");
        this.dyPreviewContainer = interceptorFrameLayout;
    }

    public final void setEditPageTextLayoutHeight(int i) {
        this.editPageTextLayoutHeight = i;
    }

    public final void setEditPageTextLayoutWidth(int i) {
        this.editPageTextLayoutWidth = i;
    }

    public final void setEditorProAnchorType(String str) {
        this.editorProAnchorType = str;
    }

    public final void setEditorProGuidanceController(C5DC c5dc) {
        this.editorProGuidanceController = c5dc;
    }

    public final void setEditorProInitData(C132045Ge c132045Ge) {
        o.LJIIIZ(c132045Ge, "<set-?>");
        this.editorProInitData = c132045Ge;
    }

    public final void setTextMaterial(C132005Ga c132005Ga) {
        this.textMaterial = c132005Ga;
    }

    public final void setVideoEffectController(C125154vf c125154vf) {
        this.videoEffectController = c125154vf;
    }

    /* JADX WARN: Can't fix incorrect switch cases order, some code will duplicate */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:101:0x016e  */
    /* JADX WARN: Removed duplicated region for block: B:115:0x0203  */
    /* JADX WARN: Removed duplicated region for block: B:118:0x0212  */
    /* JADX WARN: Removed duplicated region for block: B:119:0x0219  */
    /* JADX WARN: Removed duplicated region for block: B:122:0x0228  */
    /* JADX WARN: Removed duplicated region for block: B:125:0x0237  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public final void showCapCutSheet(java.lang.String r21) {
        /*
            Method dump skipped, instructions count: 908
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: com.ss.android.ugc.gamora.editorpro.EditorProScene.showCapCutSheet(java.lang.String):void");
    }

    public final void showRotateDegree(String str) {
        TextView textView;
        int i = 0;
        if (this.rotateTipsView == null) {
            TuxTextView tuxTextView = new TuxTextView(requireAppCompatActivity(), null, 6, i);
            this.rotateTipsView = tuxTextView;
            Typeface LIZ = C78882Uxa.LIZ("regular");
            if (LIZ != null) {
                tuxTextView.setTypeface(LIZ);
            }
            V2B.LJIILL(tuxTextView, AnonymousClass564.LIZIZ(8.0f), 0, AnonymousClass564.LIZIZ(6.0f), 0);
            FrameLayout.LayoutParams layoutParams = new FrameLayout.LayoutParams(-2, -2);
            layoutParams.gravity = 1;
            layoutParams.topMargin = AnonymousClass564.LIZIZ(4.0f);
            tuxTextView.setLayoutParams(layoutParams);
            tuxTextView.setTextColor(-1);
            tuxTextView.setTextSize(12.0f);
        }
        TextView textView2 = this.rotateTipsView;
        if (textView2 != null && textView2.getParent() == null && (textView = this.rotateTipsView) != null) {
            if (C5H0.LIZ) {
                C48295IxP c48295IxP = new C48295IxP(requireActivity());
                FrameLayout.LayoutParams layoutParams2 = new FrameLayout.LayoutParams(C7MY.LIZIZ(50), C7MY.LIZIZ(50));
                layoutParams2.gravity = 1;
                c48295IxP.setLayoutParams(layoutParams2);
                c48295IxP.setHasFixSize(true);
                c48295IxP.addView(textView);
                getDyPreviewContainer().addView(c48295IxP);
            } else {
                getDyPreviewContainer().addView(textView);
            }
        }
        TextView textView3 = this.rotateTipsView;
        if (textView3 != null) {
            textView3.setText(str);
            if (textView3.getVisibility() != 0) {
                textView3.setVisibility(0);
            }
        }
    }

    @Override // X.InterfaceC45540Hu4
    public void unRegisterActivityOnKeyDownListener(C5HC listener) {
        o.LJIIIZ(listener, "listener");
        this.onKeyDownList.remove(listener);
    }

    @Override // X.InterfaceC127674zj
    public void unregisterActivityResultListener(InterfaceC127684zk listener) {
        o.LJIIIZ(listener, "listener");
        if (this.activityResultListeners.contains(listener)) {
            this.activityResultListeners.remove(listener);
        }
    }

    public final void updateEHDesignerTitle(InterfaceC45930I0w interfaceC45930I0w) {
        LinearLayout linearLayout = this.effectDesignerInfoLayout;
        if (linearLayout != null) {
            if (linearLayout.getVisibility() == 0) {
                W5G w5g = this.designerAvatarView;
                if (w5g != null) {
                    w5g.setVisibility(0);
                    TuxTextView tuxTextView = this.designerNameView;
                    if (tuxTextView != null) {
                        tuxTextView.setVisibility(0);
                        TuxTextView tuxTextView2 = this.designerNameView;
                        if (tuxTextView2 != null) {
                            tuxTextView2.setText(interfaceC45930I0w.getNickname());
                            W5G w5g2 = this.designerAvatarView;
                            if (w5g2 != null) {
                                C78764Uvg.LJFF(w5g2, interfaceC45930I0w.getAvatarThumb());
                                return;
                            } else {
                                o.LJIJI("designerAvatarView");
                                throw null;
                            }
                        }
                        o.LJIJI("designerNameView");
                        throw null;
                    }
                    o.LJIJI("designerNameView");
                    throw null;
                }
                o.LJIJI("designerAvatarView");
                throw null;
            }
            return;
        }
        o.LJIJI("effectDesignerInfoLayout");
        throw null;
    }

    public final boolean updateEditorEffectInfoTitle(C132205Gu c132205Gu) {
        if (AnonymousClass636.LJIILIIL(c132205Gu)) {
            LinearLayout linearLayout = this.effectDesignerInfoLayout;
            if (linearLayout != null) {
                linearLayout.setVisibility(0);
                InterfaceC45930I0w interfaceC45930I0w = this.userCache.get(c132205Gu.LJLIL);
                if (interfaceC45930I0w != null) {
                    updateEHDesignerTitle(interfaceC45930I0w);
                }
                C10K.LIZJ(new ACallableS80S0200000_2(this, c132205Gu, 5)).LJ(new AgS107S0200000_2(this, c132205Gu, 5), C10K.LJIIIIZZ, null);
                return true;
            }
            o.LJIJI("effectDesignerInfoLayout");
            throw null;
        }
        hideEHEffectInfoTitle();
        return false;
    }

    public final void updateEffectTracksCountLimit(NLEModel nLEModel) {
        C123254sb.LIZ = Math.max(C124574uj.LJIILIIL(nLEModel).size(), C142125hw.LIZ());
    }

    public final void updateInitData(C132045Ge editorProInitData) {
        o.LJIIIZ(editorProInitData, "editorProInitData");
        setEditorProInitData(editorProInitData);
        processInitData();
        refreshLayout();
    }

    /* JADX WARN: Removed duplicated region for block: B:13:0x002d  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private final com.ss.android.ugc.gamora.editorpro.model.EditorProSaveData buildSaveData(com.ss.android.ugc.aweme.shortvideo.edit.VideoPublishEditModel r4, boolean r5) {
        /*
            r3 = this;
            com.ss.android.ugc.gamora.editorpro.model.EditorProSaveData r2 = new com.ss.android.ugc.gamora.editorpro.model.EditorProSaveData
            r2.<init>()
            r2.editModel = r4
            boolean r0 = r3.effectMode
            if (r0 != 0) goto L17
            if (r4 == 0) goto L1d
            com.ss.android.ugc.aweme.shortvideo.edit.multiedit.data.MultiEditVideoStatusRecordData r1 = r4.multiEditVideoRecordData
            if (r1 != 0) goto L42
        L11:
            if (r4 == 0) goto L1d
            com.ss.android.ugc.aweme.shortvideo.edit.multiedit.data.MultiEditVideoStatusRecordData r1 = r4.multiEditVideoRecordData
            if (r1 != 0) goto L3d
        L17:
            if (r4 == 0) goto L1d
            com.ss.android.ugc.aweme.shortvideo.edit.multiedit.data.MultiEditVideoStatusRecordData r1 = r4.multiEditVideoRecordData
            if (r1 != 0) goto L39
        L1d:
            com.ss.android.ugc.aweme.shortvideo.edit.VideoPublishEditModel r0 = com.ss.android.ugc.aweme.shortvideo.edit.VideoPublishEditModel.makeCopy(r4)
            r2.editModel = r0
            r2.hasUseEdit = r5
            boolean r0 = r3.effectMode
            r2.effectMultiTrackMode = r0
            X.5K1 r0 = r3.inlineCaptionCaches
            if (r0 == 0) goto L38
            java.util.ArrayList r1 = r0.LIZ()
            java.util.ArrayList r0 = new java.util.ArrayList
            r0.<init>(r1)
            r2.inlineCaptionCaches = r0
        L38:
            return r2
        L39:
            r0 = 0
            r1.isMultiEditRetake = r0
            goto L1d
        L3d:
            java.util.ArrayList<com.ss.android.ugc.aweme.shortvideo.ui.TimeSpeedModelExtension> r0 = X.AnonymousClass569.LJII
            r1.editSegments = r0
            goto L17
        L42:
            com.ss.android.ugc.aweme.shortvideo.edit.multiedit.data.MultiEditVideoRecordData r0 = X.AnonymousClass569.LIZ
            r1.curMultiEditVideoRecordData = r0
            goto L11
        */
        throw new UnsupportedOperationException("Method not decompiled: com.ss.android.ugc.gamora.editorpro.EditorProScene.buildSaveData(com.ss.android.ugc.aweme.shortvideo.edit.VideoPublishEditModel, boolean):com.ss.android.ugc.gamora.editorpro.model.EditorProSaveData");
    }

    private final void refreshUndoRedoState(boolean z, boolean z2) {
        C52T c52t = this.controlBar;
        if (c52t != null) {
            c52t.Ua0(C52V.REDO, z2, true);
            c52t.Ua0(C52V.UNDO, z, true);
        }
    }

    private final void updateExitStatus(boolean z, boolean z2) {
        boolean z3;
        NLESegment nLESegment;
        EnumC123874tb enumC123874tb;
        NLESegment nLESegment2;
        EnumC123874tb enumC123874tb2;
        NLEResourceNode LJI;
        NLEResourceNode LJI2;
        NLETrack nLETrack;
        boolean LJIIJ = C79057V0z.LJIIJ(getEditorContext());
        StringBuilder LIZ = X1D.LIZ();
        LIZ.append("EditorProScene -> handleSave -> hasUseEdit = ");
        LIZ.append(LJIIJ);
        H78.LIZ(X1D.LIZIZ(LIZ));
        if (z) {
            VecNLETrackSPtr tracks = C79057V0z.LJJI(getEditorContext()).getTracks();
            o.LJIIIIZZ(tracks, "nleModel.tracks");
            Iterator<NLETrack> it = tracks.iterator();
            while (true) {
                if (it.hasNext()) {
                    nLETrack = it.next();
                    if (C124574uj.LJJIL(nLETrack)) {
                        break;
                    }
                } else {
                    nLETrack = null;
                    break;
                }
            }
            NLETrack nLETrack2 = nLETrack;
            if (nLETrack2 != null && nLETrack2.LJIILLIIL().size() > 1) {
                Iterator<NLETrackSlot> it2 = nLETrack2.LJIILLIIL().iterator();
                int i = 0;
                while (it2.hasNext()) {
                    NLETrackSlot next = it2.next();
                    int i2 = i + 1;
                    if (i >= 0) {
                        NLETrackSlot nleTrackSlot = next;
                        if (i == 0) {
                            o.LJIIIIZZ(nleTrackSlot, "nleTrackSlot");
                            NLESegmentAudio nLESegmentAudio = (NLESegmentAudio) NLESegmentAudio.class.getMethod("LIZLLL", NLENode.class).invoke(null, nleTrackSlot.LJI());
                            if (nLESegmentAudio != null) {
                                NLEEditorJniJNI.NLESegmentAudio_setRepeatCount(nLESegmentAudio.LIZJ, nLESegmentAudio, NLEEditorJniJNI.NLESegmentAudio_REPEAT_INFINITE_get());
                            }
                        } else {
                            nLETrack2.LJIJJLI(nleTrackSlot);
                        }
                        i = i2;
                    } else {
                        C47261Igj.LJJJJJ();
                        throw null;
                    }
                }
            }
        }
        C79057V0z.LJJJJL(getEditorContext(), "about_to_exit_edit_page", Boolean.TRUE);
        NLEModel LJJI = C79057V0z.LJJI(getEditorContext());
        InterfaceC132055Gf interfaceC132055Gf = this.musicController;
        if (interfaceC132055Gf != null) {
            z3 = interfaceC132055Gf.LIZJ();
        } else {
            z3 = false;
        }
        LJJI.setExtra("stick_point_on_off_key", String.valueOf(z3));
        C79057V0z.LJJI(getEditorContext()).setExtra("model_extra_advanced_edit_mode", String.valueOf(this.editorMode));
        VecNLETrackSPtr tracks2 = C79057V0z.LJJI(getEditorContext()).getTracks();
        o.LJIIIIZZ(tracks2, "nleModel.tracks");
        ArrayList arrayList = new ArrayList();
        Iterator<NLETrack> it3 = tracks2.iterator();
        while (it3.hasNext()) {
            NLETrack next2 = it3.next();
            NLETrack nLETrack3 = next2;
            if (C79057V0z.LJJIJIL(nLETrack3) == EnumC123864ta.STICKER) {
                NLETrackSlot nLETrackSlot = (NLETrackSlot) ORZ.LJLLLL(nLETrack3.LJIILLIIL());
                if (nLETrackSlot != null) {
                    nLESegment = nLETrackSlot.LJI();
                } else {
                    nLESegment = null;
                }
                NLESegmentSubtitleSticker LJFF = NLESegmentSubtitleSticker.LJFF(nLESegment);
                if (LJFF != null && (LJI2 = LJFF.LJI()) != null) {
                    enumC123874tb = LJI2.LJFF();
                } else {
                    enumC123874tb = null;
                }
                if (enumC123874tb != EnumC123874tb.SUBTITLE_STICKER) {
                    NLETrackSlot nLETrackSlot2 = (NLETrackSlot) ORZ.LJLLLL(nLETrack3.LJIILLIIL());
                    if (nLETrackSlot2 != null) {
                        nLESegment2 = nLETrackSlot2.LJI();
                    } else {
                        nLESegment2 = null;
                    }
                    NLESegmentSubtitleSticker LJFF2 = NLESegmentSubtitleSticker.LJFF(nLESegment2);
                    if (LJFF2 != null && (LJI = LJFF2.LJI()) != null) {
                        enumC123874tb2 = LJI.LJFF();
                    } else {
                        enumC123874tb2 = null;
                    }
                    if (enumC123874tb2 == EnumC123874tb.AUTOSUBTITLE_STICKER) {
                    }
                }
                arrayList.add(next2);
            }
        }
        Iterator it4 = arrayList.iterator();
        while (it4.hasNext()) {
            ((NLENode) it4.next()).setEnable(true);
        }
        EditModelProvider.Companion.getClass();
        EditModelProvider LIZ2 = C126784yI.LIZ();
        C123444su c123444su = this.originVolumeCompat;
        NLEModel LJJI2 = C79057V0z.LJJI(getEditorContext());
        VideoPublishEditModel editModel = LIZ2.getEditModel();
        c123444su.getClass();
        C123444su.LIZ(LJJI2, editModel);
        C62819Ol5.LJFF(C79057V0z.LJJI(getEditorContext()), LIZ2.getEditModel());
        if (z2) {
            C79057V0z.LJIILJJIL(getEditorContext(), false);
        }
        C120864ok.LIZ(C79057V0z.LJJ(getEditorContext()));
    }

    public final NLETrackSlot buildSlotFromTextStickerData(TextStickerData textStickerData, EnumC132095Gj enumC132095Gj) {
        NLETrackSlot nLETrackSlot = new NLETrackSlot();
        StringBuilder LIZ = X1D.LIZ();
        LIZ.append("EditorProScene -> data.type = ");
        LIZ.append(textStickerData.getType());
        H78.LIZ(X1D.LIZIZ(LIZ));
        if (o.LJ(textStickerData.getType(), "type_inline_caption")) {
            nLETrackSlot.setExtra("text_slot_type", "SUBTITLE");
        } else if (textStickerData.isAICaption()) {
            nLETrackSlot.setExtra("text_slot_type", "AI_CAPTION");
        } else {
            nLETrackSlot.setExtra("text_slot_type", "TEXT_STICKER");
        }
        C132815Jd.LIZ(nLETrackSlot, textStickerData, enumC132095Gj, this.editPageTextLayoutWidth, this.editPageTextLayoutHeight, getEditorContext(), false);
        return nLETrackSlot;
    }

    public final InterfaceC45930I0w queryUser(String str, String str2) {
        return C60903NvH.LJIIJJI().getAccountService().LJII(str, str2);
    }

    public final void seekToPosition(boolean z, AnonymousClass519 anonymousClass519) {
        if (z) {
            getEditorContext().getPlayer().fa(this.seekPosition, anonymousClass519);
            C2ND.LIZIZ(new AqS152S0100000_2(this, 552), 0L);
        } else if (this.isFromTextDuration) {
            NLETrackSlot nLETrackSlot = this.selectSlotFromOut;
            if (nLETrackSlot != null) {
                C2ND.LIZ(new AqS91S0300000_2(this, nLETrackSlot, anonymousClass519, 10), 300L);
            }
        } else {
            getEditorContext().getPlayer().fa(0L, anonymousClass519);
        }
        C1284452i multiTrackController = getMultiTrackController();
        if (multiTrackController != null) {
            FrameCacheViewModel.jv0(multiTrackController.LJLJJLL);
        }
    }

    public final void updateCaptionSlotAfterKeyBoardHide(TextStickerData textStickerData, NLETrackSlot nLETrackSlot) {
        NLETrack LIZLLL = C5FC.LIZLLL(C79057V0z.LJJI(getEditorContext()));
        if (LIZLLL != null) {
            VecNLETrackSlotSPtr LJIILL = LIZLLL.LJIILL();
            ArrayList arrayList = new ArrayList();
            Iterator<NLETrackSlot> it = LJIILL.iterator();
            while (it.hasNext()) {
                NLETrackSlot next = it.next();
                if (!o.LJ(next.getUUID(), nLETrackSlot.getUUID())) {
                    arrayList.add(next);
                }
            }
            Iterator it2 = arrayList.iterator();
            while (it2.hasNext()) {
                NLENode nLENode = (NLENode) it2.next();
                nLENode.setExtra("color", String.valueOf(textStickerData.getColor()));
                String fontType = textStickerData.getFontType();
                if (fontType == null) {
                    fontType = "";
                }
                nLENode.setExtra("font_type", fontType);
                nLENode.setExtra("align", String.valueOf(textStickerData.getAlign()));
                nLENode.setExtra("bg_mode", String.valueOf(textStickerData.getBgMode()));
                nLENode.setExtra("font_size", String.valueOf(textStickerData.getFontSize()));
                nLENode.setExtra("lineSpacingExtra", String.valueOf(textStickerData.getLineSpacingExtra()));
                nLENode.setExtra("is_use_auto_size", String.valueOf(textStickerData.isUseAutoTextSize()));
                nLENode.setExtra("font_size_changed", String.valueOf(textStickerData.getHasChangedFontSize()));
            }
        }
    }

    public final void onActivityResult(int i, int i2, Intent intent) {
        C53H LJIILIIL;
        C79057V0z.LJJJJL(getEditorContext(), "activity_result_flag", Boolean.TRUE);
        C58D trackPanel = getTrackPanel();
        if (trackPanel != null) {
            trackPanel.enableTrackPanelButton(true);
        }
        C50Q funcBarController = getFuncBarController();
        if (funcBarController != null && (LJIILIIL = funcBarController.LJIILIIL()) != null) {
            LJIILIIL.LJ(true);
        }
        Iterator<InterfaceC127684zk> it = this.activityResultListeners.iterator();
        while (it.hasNext() && !it.next().LJIIJ(i, intent)) {
        }
    }

    @Override // com.bytedance.scene.group.UserVisibleHintGroupScene, X.WMH, X.WM7
    public ViewGroup onCreateView(LayoutInflater inflater, ViewGroup container, Bundle bundle) {
        o.LJIIIZ(inflater, "inflater");
        o.LJIIIZ(container, "container");
        C5QW.LJJJJ("step1_perf_editor_pro_click_to_on_create_view");
        setTheme(0);
        initCKSupportAbility();
        if (C1280550v.LIZ().LIZJ) {
            initContentView();
        } else {
            this.isAsyncInitialization = true;
            C52B.LIZ(requireAppCompatActivity(), TokenCert.Companion.with((String) C73994T2g.LJIIJ("bpea-tools_request_storage_permission_editor_pro_init_target33", "bpea-tools_request_storage_permission_editor_pro_init")), new AqS152S0100000_2(this, 530), null, 8);
        }
        ConstraintLayout constraintLayout = this.contentView;
        if (constraintLayout != null) {
            return constraintLayout;
        }
        FrameLayout frameLayout = new FrameLayout(requireSceneContext());
        this.stubLayout = frameLayout;
        return frameLayout;
    }

    @Override // com.bytedance.scene.group.UserVisibleHintGroupScene, X.WMH, X.WM7
    public /* bridge */ /* synthetic */ View onCreateView(LayoutInflater layoutInflater, ViewGroup viewGroup, Bundle bundle) {
        return onCreateView(layoutInflater, viewGroup, bundle);
    }

    public static /* synthetic */ void cancelActual$default(EditorProScene editorProScene, boolean z, int i, Object obj) {
        if ((i & 1) != 0) {
            z = true;
        }
        editorProScene.cancelActual(z);
    }

    public static /* synthetic */ void clickSave$default(EditorProScene editorProScene, boolean z, int i, Object obj) {
        if ((i & 1) != 0) {
            z = false;
        }
        editorProScene.clickSave(z);
    }

    public static /* synthetic */ void doAfterFirstFrame$default(EditorProScene editorProScene, boolean z, int i, Object obj) {
        if ((i & 1) != 0) {
            z = true;
        }
        editorProScene.doAfterFirstFrame(z);
    }

    private final void exitPage(boolean z, String str, NLEModel nLEModel, boolean z2) {
        C1284452i multiTrackController;
        TrackPanelViewModel trackPanelViewModel;
        this.multipleOnStartInOneEdit = false;
        if (!getEditorContext().getHasInitialized()) {
            C29S appCompatActivity = getAppCompatActivity();
            if (appCompatActivity != null) {
                C110674Vz.LIZ(appCompatActivity, 0);
            }
            finish(z);
            return;
        }
        C1297157f c1297157f = this.editorProTransitionGuideController;
        if (c1297157f != null) {
            c1297157f.LJLIL.setVisibility(8);
        }
        C1289554h c1289554h = this.bottomBarGuideController;
        if (c1289554h != null) {
            c1289554h.LIZJ();
        }
        unregisterCanvasListener();
        if (z) {
            C132385Hm.LJIIIZ(nLEModel, str);
        } else {
            C132385Hm.LJIIIZ(null, null);
        }
        if (isFirstEnterEditorProFromAlbum() && !z) {
            getEditorContext().getPlayer().pause();
            C84518XFa.LIZ();
            C86793Y4n.LJJIJIIJIL(this).LLJJI();
        } else {
            if (z2) {
                animOut(z);
                return;
            }
            getUiActions().LJLJI.invoke(Boolean.valueOf(z), Boolean.valueOf(o.LJ(this.isFirstEnterEditorPro, Boolean.TRUE)), Boolean.valueOf(enterFromAlbumPage()), Boolean.FALSE);
            C51E c51e = this.trackPanelApi;
            if (c51e != null && (multiTrackController = c51e.getMultiTrackController()) != null && (trackPanelViewModel = multiTrackController.LJLILLLLZI) != null) {
                trackPanelViewModel.LJLILLLLZI = null;
                trackPanelViewModel.LJLJI = null;
            }
            getDyPreviewContainer().setVisibility(8);
            finish(z);
        }
    }

    public static /* synthetic */ void handleSave$default(EditorProScene editorProScene, boolean z, int i, Object obj) {
        if ((i & 1) != 0) {
            z = false;
        }
        editorProScene.handleSave(z);
    }

    public static /* synthetic */ void updateModelAndSave$default(EditorProScene editorProScene, boolean z, int i, Object obj) {
        if ((i & 1) != 0) {
            z = false;
        }
        editorProScene.updateModelAndSave(z);
    }

    public static /* synthetic */ void refreshUndoRedoState$default(EditorProScene editorProScene, boolean z, boolean z2, int i, Object obj) {
        if ((i & 1) != 0) {
            z = C79057V0z.LJIIJ(editorProScene.getEditorContext());
        }
        if ((i & 2) != 0) {
            z2 = C79057V0z.LJIIIZ(editorProScene.getEditorContext());
        }
        editorProScene.refreshUndoRedoState(z, z2);
    }

    public static /* synthetic */ void seekToPosition$default(EditorProScene editorProScene, boolean z, AnonymousClass519 anonymousClass519, int i, Object obj) {
        if ((i & 1) != 0) {
            z = false;
        }
        if ((i & 2) != 0) {
            anonymousClass519 = new AnonymousClass519() { // from class: X.5H5
                @Override // X.AnonymousClass519
                public final void LIZ(int i2) {
                }
            };
        }
        editorProScene.seekToPosition(z, anonymousClass519);
    }

    public static /* synthetic */ void updateExitStatus$default(EditorProScene editorProScene, boolean z, boolean z2, int i, Object obj) {
        if ((i & 1) != 0) {
            z = true;
        }
        if ((i & 2) != 0) {
            z2 = true;
        }
        editorProScene.updateExitStatus(z, z2);
    }

    public static /* synthetic */ void exitPage$default(EditorProScene editorProScene, boolean z, String str, NLEModel nLEModel, boolean z2, int i, Object obj) {
        if ((i & 2) != 0) {
            str = null;
        }
        if ((i & 4) != 0) {
            nLEModel = null;
        }
        if ((i & 8) != 0) {
            z2 = true;
        }
        editorProScene.exitPage(z, str, nLEModel, z2);
    }
}
