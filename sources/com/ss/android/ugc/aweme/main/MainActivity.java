package com.ss.android.ugc.aweme.main;

import X.ATO;
import X.ActivityC45651qj;
import X.C116694i1;
import X.C16880lQ;
import X.C198517qh;
import X.C19N;
import X.C224498rV;
import X.C2J0;
import X.C2L4;
import X.C2NW;
import X.C34597Dhx;
import X.C34710Djm;
import X.C34887Dmd;
import X.C35143Dql;
import X.C36089EEj;
import X.C36093EEn;
import X.C36721Eb7;
import X.C36821Ecj;
import X.C36922EeM;
import X.C37183EiZ;
import X.C38556FBg;
import X.C38816FLg;
import X.C38859FMx;
import X.C38987FRv;
import X.C38995FSd;
import X.C39077FVh;
import X.C39078FVi;
import X.C39082FVm;
import X.C3SZ;
import X.C40104Foa;
import X.C40106Foc;
import X.C45243HpH;
import X.C45337Hqn;
import X.C46254IDi;
import X.C46368IHs;
import X.C46538IOg;
import X.C48236IwS;
import X.C48591J5f;
import X.C52200KeC;
import X.C52207KeJ;
import X.C52294Kfi;
import X.C52740Kmu;
import X.C52937Kq5;
import X.C53295Kvr;
import X.C53578L1a;
import X.C53914LDy;
import X.C54029LIj;
import X.C54030LIk;
import X.C54060LJo;
import X.C54296LSq;
import X.C54982Lhy;
import X.C55050Lj4;
import X.C55096Ljo;
import X.C55103Ljv;
import X.C55230Lly;
import X.C55249LmH;
import X.C55374LoI;
import X.C55375LoJ;
import X.C55376LoK;
import X.C55386LoU;
import X.C55408Loq;
import X.C55448LpU;
import X.C55511LqV;
import X.C55723Ltv;
import X.C56662Kg;
import X.C56672Kh;
import X.C58604MzI;
import X.C59171NKd;
import X.C59181NKn;
import X.C59198NLe;
import X.C62822Ol8;
import X.C63081OpJ;
import X.C65803Ps7;
import X.C76800UCe;
import X.C76965UIn;
import X.C77357UXp;
import X.C78688UuS;
import X.C78929UyL;
import X.C78939UyV;
import X.C78983UzD;
import X.C81P;
import X.C82699Wcx;
import X.C84193Sd;
import X.C86298Xtu;
import X.C86550Xxy;
import X.C88109Yi1;
import X.C8HX;
import X.C8VV;
import X.C8W0;
import X.C9CI;
import X.CallableC55631LsR;
import X.DPP;
import X.DSR;
import X.DVD;
import X.E3F;
import X.EE1;
import X.EF7;
import X.EHW;
import X.EHX;
import X.EWU;
import X.EnumC36092EEm;
import X.FAJ;
import X.FAK;
import X.FAM;
import X.FAR;
import X.FAV;
import X.FET;
import X.FFL;
import X.FKB;
import X.FLB;
import X.FR4;
import X.FWW;
import X.GGS;
import X.GHC;
import X.HG3;
import X.IN6;
import X.IN7;
import X.IUJ;
import X.InterfaceC121074p5;
import X.InterfaceC27436Apk;
import X.InterfaceC28616BKy;
import X.InterfaceC36571c5;
import X.InterfaceC40262Fr8;
import X.InterfaceC40408FtU;
import X.InterfaceC45601Hv3;
import X.InterfaceC51123K4p;
import X.InterfaceC54054LJi;
import X.InterfaceC54150LNa;
import X.InterfaceC55058LjC;
import X.InterfaceC55286Lms;
import X.InterfaceC55336Lng;
import X.InterfaceC55372LoG;
import X.InterfaceC55373LoH;
import X.InterfaceC55377LoL;
import X.InterfaceC55378LoM;
import X.InterfaceC55379LoN;
import X.InterfaceC55380LoO;
import X.InterfaceC55452LpY;
import X.InterfaceC58032Pn;
import X.InterfaceC59608NaO;
import X.L8W;
import X.LFH;
import X.LGO;
import X.LHM;
import X.LJF;
import X.LLF;
import X.LLN;
import X.LNZ;
import X.LO7;
import X.LPY;
import X.LPZ;
import X.LQM;
import X.LQZ;
import X.LYD;
import X.NKP;
import X.NT2;
import X.O6Z;
import X.OGB;
import X.PJZ;
import X.QD3;
import X.ViewOnApplyWindowInsetsListenerC51184K6y;
import X.YUM;
import X.Z8A;
import Y.AObjectS11S0001000_6;
import Y.AObjectS25S0000000_9;
import Y.AObjectS52S0101000_7;
import Y.ARunnableS0S0001000_5;
import Y.ARunnableS10S0101000_6;
import Y.ARunnableS13S0000000_6;
import Y.ARunnableS18S0000000_11;
import Y.ARunnableS45S0100000_9;
import android.app.Activity;
import android.content.ClipboardManager;
import android.content.Context;
import android.content.Intent;
import android.content.res.AssetManager;
import android.content.res.Configuration;
import android.content.res.Resources;
import android.os.Build;
import android.os.Bundle;
import android.os.Handler;
import android.os.Looper;
import android.os.SystemClock;
import android.text.TextUtils;
import android.view.KeyEvent;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.view.Window;
import androidx.fragment.app.Fragment;
import androidx.lifecycle.Lifecycle;
import androidx.lifecycle.LifecycleRegistry;
import androidx.lifecycle.ViewModelProviders;
import com.bytedance.android.livesdk.livesetting.performance.LiveLayoutPreloadThreadPriority;
import com.bytedance.apm.agent.v2.instrumentation.ActivityAgent;
import com.bytedance.hox.Hox;
import com.bytedance.ies.foundation.activity.BaseActivityViewModel;
import com.bytedance.ies.ugc.aweme.commercialize.scene.api.IAdSceneService;
import com.bytedance.ies.ugc.aweme.commercialize.scene.api.main.viewModel.AdHomePageDataVM;
import com.bytedance.ies.ugc.aweme.commercialize.scene.impl.AdSceneServiceImpl;
import com.bytedance.ies.ugc.aweme.commercialize.splash.core.SplashSettingServiceImpl;
import com.bytedance.keva.Keva;
import com.bytedance.mt.protector.impl.collections.ListProtector;
import com.bytedance.provider.preload.PreLoader;
import com.bytedance.sysoptimizer.EnterTransitionCrashOptimizer;
import com.bytedance.tiktok.homepage.mainfragment.ability.IMFFeedAbility;
import com.ss.android.common.applog.AppLog;
import com.ss.android.ugc.aweme.ad.FeedAdServiceImpl;
import com.ss.android.ugc.aweme.app.SharePrefCache;
import com.ss.android.ugc.aweme.arch.widgets.base.DataCenter;
import com.ss.android.ugc.aweme.base.BackRefreshStrategyAbility;
import com.ss.android.ugc.aweme.base.HomePageViewPagerAbility;
import com.ss.android.ugc.aweme.base.MainBusinessAbility;
import com.ss.android.ugc.aweme.base.ui.CommonPageFragment;
import com.ss.android.ugc.aweme.contentlanguage.api.ContentLanguageGuideServiceImpl;
import com.ss.android.ugc.aweme.contentlanguage.api.IContentLanguageGuideService;
import com.ss.android.ugc.aweme.feed.model.Aweme;
import com.ss.android.ugc.aweme.feed.model.FeedItemList;
import com.ss.android.ugc.aweme.feed.ui.FeedFragment;
import com.ss.android.ugc.aweme.framework.services.ServiceManager;
import com.ss.android.ugc.aweme.homepage.api.data.HomePageDataViewModel;
import com.ss.android.ugc.aweme.homepage.api.interaction.ScrollSwitchStateManager;
import com.ss.android.ugc.aweme.legoImp.service.MainLooperOptService;
import com.ss.android.ugc.aweme.live.LiveOuterService;
import com.ss.android.ugc.aweme.local_test.LocalTestApi;
import com.ss.android.ugc.aweme.logger.WarmBootLogger$BootTypeLogger$reportBootType$1;
import com.ss.android.ugc.aweme.main.assems.tabs.TabAbilityAssem;
import com.ss.android.ugc.aweme.out.AVExternalServiceImpl;
import com.ss.android.ugc.aweme.scope.MainActivityScope;
import com.zhiliaoapp.musically.R;
import java.lang.reflect.Field;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.FutureTask;
import java.util.concurrent.atomic.AtomicBoolean;
import kotlin.jvm.internal.AqS113S0300000_9;
import kotlin.jvm.internal.AqS157S0100000_7;
import kotlin.jvm.internal.AqS169S0100000_3;
import kotlin.jvm.internal.o;
import org.greenrobot.eventbus.ThreadMode;

/* loaded from: classes10.dex */
public class MainActivity extends YUM implements InterfaceC55286Lms, InterfaceC55379LoN, InterfaceC58032Pn, InterfaceC45601Hv3, InterfaceC55058LjC, InterfaceC55452LpY, InterfaceC40262Fr8, OGB, InterfaceC121074p5, InterfaceC55380LoO, C2L4 {
    public AdHomePageDataVM adHomePageDataVM;
    public boolean allowWhenPush;
    public InterfaceC51123K4p asyncInflater;
    public LNZ homePageService = LNZ.LIZIZ;
    public HomePageDataViewModel homeViewModel;
    public boolean isPreloadTask;
    public long lastFeedTime;
    public AtomicBoolean lazyDoItCalled;
    public List<GHC> mActivityOnKeyDownListeners;
    public final LPZ mActivityProxy;
    public InterfaceC27436Apk mActivityResultListener;
    public final C55448LpU mCommerceActivityObserver;
    public DataCenter mDataCenter;
    public boolean mIsFirstVisible;
    public LifecycleRegistry mainLifecycleRegistryWrapper;
    public boolean onVolumeKeyDownHandled;
    public final InterfaceC55373LoH resourceOptComponent;
    public LLN scrollBasicChecker;
    public LLN scrollFullChecker;
    public boolean showToast;
    public ScrollSwitchStateManager stateManager;

    private void activityForNewUser() {
        if (C2NW.LIZ().LJJIIZ()) {
            AppLog.activeUser(EF7.LIZIZ());
        }
    }

    private ActivityC45651qj getActivity() {
        return this;
    }

    private boolean isScrollSwitchHelperInit() {
        HomePageViewPagerAbility homePageViewPagerAbility = (HomePageViewPagerAbility) C55096Ljo.LIZ(C55230Lly.LIZLLL(this, null), HomePageViewPagerAbility.class, null);
        if (homePageViewPagerAbility != null) {
            return homePageViewPagerAbility.isScrollSwitchHelperInit();
        }
        return false;
    }

    public void com_ss_android_ugc_aweme_main_MainActivity__onStop$___twin___() {
        super.onStop();
    }

    @Override // X.InterfaceC55058LjC
    public InterfaceC54150LNa getMainHelper() {
        BackRefreshStrategyAbility backRefreshStrategyAbility = (BackRefreshStrategyAbility) C55096Ljo.LIZ(C55230Lly.LIZLLL(this, null), BackRefreshStrategyAbility.class, null);
        if (backRefreshStrategyAbility != null) {
            return backRefreshStrategyAbility.getMainHelper();
        }
        return null;
    }

    public View getVisionSearchRect() {
        return null;
    }

    @Override // X.InterfaceC55058LjC
    public boolean isDuoDualMode() {
        return false;
    }

    @Override // X.InterfaceC58032Pn
    public boolean isPaused() {
        MainBusinessAbility mainBusinessAbility = (MainBusinessAbility) C55096Ljo.LIZ(C55230Lly.LIZLLL(this, null), MainBusinessAbility.class, null);
        if (mainBusinessAbility != null) {
            return mainBusinessAbility.o60();
        }
        return true;
    }

    @Override // X.KMV, X.JBS
    public void onBeforeActivityCreated(Activity activity) {
    }

    @Override // X.InterfaceC55058LjC
    public void onKeyBack() {
        if (!toFeedPage(null, false)) {
            if (getTabChangeManager().mv0() != null && (getTabChangeManager().mv0() instanceof InterfaceC59608NaO)) {
                refreshWhenBack();
            }
            refreshWhenBack();
        }
    }

    @Override // X.ActivityC86117Xqz, X.C29S, X.ActivityC45651qj, android.app.Activity
    public void onStart() {
        C65803Ps7.LJ(this);
        super.onStart();
    }

    @Override // X.ActivityC86117Xqz, X.C29S, X.ActivityC45651qj, android.app.Activity
    public void onStop() {
        C65803Ps7.LJFF(this);
        com_ss_android_ugc_aweme_main_MainActivity_com_ss_android_ugc_aweme_lancet_ActivityEnterTransitionCoordinatorLancet_onStop(this);
    }

    public void callLazyDoIt() {
        if (this.lazyDoItCalled.compareAndSet(false, true)) {
            lazyDoItMainThread();
        }
    }

    private void doFeedCacheWhenAttach() {
        if (!C48236IwS.LJIJ) {
            C48236IwS.LJIJ = true;
            C38995FSd.LIZLLL().execute(FWW.LJLIL);
        }
    }

    private void ensureLazyDoItFinallyCalled() {
        C38816FLg.LIZLLL(new ARunnableS10S0101000_6(5, this, 2), 10000);
    }

    private LLN getScrollBasicChecker() {
        if (this.scrollBasicChecker == null) {
            this.scrollBasicChecker = this.homePageService.getScrollBasicChecker(this);
        }
        return this.scrollBasicChecker;
    }

    private LLN getScrollFullChecker() {
        if (this.scrollFullChecker == null) {
            this.scrollFullChecker = this.homePageService.getScrollFullChecker(this, getScrollBasicChecker());
        }
        return this.scrollFullChecker;
    }

    public Object lambda$onCreate$1() {
        C53578L1a.LIZ.getClass();
        if (C53578L1a.LIZ()) {
            C55723Ltv c55723Ltv = C55723Ltv.LIZIZ;
            if (c55723Ltv.getTag() != hashCode()) {
                c55723Ltv.LJFF(hashCode());
                c55723Ltv.clear();
                LYD.LIZ.getClass();
                LYD.LIZIZ = null;
            }
        }
        return null;
    }

    public /* synthetic */ Object lambda$onCreate$2() {
        C55723Ltv c55723Ltv = C55723Ltv.LIZIZ;
        if (c55723Ltv.getTag() == 0) {
            c55723Ltv.LJFF(hashCode());
            return null;
        }
        return null;
    }

    public static /* synthetic */ InterfaceC28616BKy lambda$onCreate$3() {
        return new C40106Foc();
    }

    public static InterfaceC28616BKy lambda$onCreate$4() {
        GGS.LIZ.getClass();
        return GGS.LIZIZ;
    }

    public static /* synthetic */ InterfaceC28616BKy lambda$onCreate$5() {
        return new C40104Foa(false, false);
    }

    @Override // X.InterfaceC55380LoO
    public boolean enableSkipGatherRegion() {
        return ((Boolean) C34887Dmd.LIZ.getValue()).booleanValue();
    }

    @Override // android.view.ContextThemeWrapper, android.content.ContextWrapper, android.content.Context
    public AssetManager getAssets() {
        AssetManager f;
        InterfaceC55373LoH interfaceC55373LoH = this.resourceOptComponent;
        if (interfaceC55373LoH == null || (f = interfaceC55373LoH.f()) == null) {
            return super.getAssets();
        }
        return f;
    }

    @Override // X.InterfaceC45601Hv3
    public InterfaceC51123K4p getInflater() {
        if (this.asyncInflater == null) {
            this.asyncInflater = Z8A.LIZIZ.getAsyncInflater(this, Integer.MAX_VALUE);
        }
        return this.asyncInflater;
    }

    @Override // androidx.activity.ComponentActivity, X.C1AU, androidx.lifecycle.LifecycleOwner
    public Lifecycle getLifecycle() {
        if (this.mainLifecycleRegistryWrapper == null) {
            this.mainLifecycleRegistryWrapper = LNZ.LIZIZ.getMainLifecycleRegistryWrapper(this);
        }
        return this.mainLifecycleRegistryWrapper;
    }

    @Override // X.C29S, android.view.ContextThemeWrapper, android.content.ContextWrapper, android.content.Context
    public Resources getResources() {
        Resources resources;
        InterfaceC55373LoH interfaceC55373LoH = this.resourceOptComponent;
        if (interfaceC55373LoH == null || (resources = interfaceC55373LoH.getResources()) == null) {
            return super.getResources();
        }
        return resources;
    }

    @Override // X.C2L4
    public List<Class<Object>> getScopeDefine() {
        return C76965UIn.LIZ(MainActivityScope.class);
    }

    @Override // android.view.ContextThemeWrapper, android.content.ContextWrapper, android.content.Context
    public Resources.Theme getTheme() {
        Resources.Theme LLLJL;
        InterfaceC55373LoH interfaceC55373LoH = this.resourceOptComponent;
        if (interfaceC55373LoH == null || (LLLJL = interfaceC55373LoH.LLLJL()) == null) {
            return super.getTheme();
        }
        return LLLJL;
    }

    @Override // X.InterfaceC55452LpY
    public boolean isADShowing() {
        if (FR4.LJ || C55511LqV.LJII() || C63081OpJ.LJJLIIIJJI(this.homeViewModel.LJLJLLL) || C63081OpJ.LLIIII(this.homeViewModel.LJLJLLL)) {
            return true;
        }
        return false;
    }

    @Override // X.InterfaceC55452LpY
    public boolean mainPageOnFeed() {
        return this.stateManager.ov0("page_feed");
    }

    public void setAdScrollRightControl() {
        this.mCommerceActivityObserver.LIZIZ();
    }

    public MainActivity() {
        Iterator it = ((Set) L8W.LIZ.getValue()).iterator();
        while (it.hasNext()) {
            ((InterfaceC55378LoM) it.next()).LIZ();
        }
        this.isPreloadTask = true;
        this.mActivityProxy = LNZ.LIZIZ.getMainActivityProxy();
        this.mIsFirstVisible = true;
        this.showToast = false;
        this.allowWhenPush = true;
        this.lazyDoItCalled = new AtomicBoolean(false);
        this.mCommerceActivityObserver = new C55448LpU(this);
        this.mActivityResultListener = null;
        this.resourceOptComponent = C38859FMx.LIZIZ.LIZ(this);
        this.onVolumeKeyDownHandled = false;
        this.lastFeedTime = 0L;
    }

    private void executeEnsureLogic() {
        if (DPP.LIZIZ()) {
            C36093EEn c36093EEn = C36093EEn.LIZ;
            EnumC36092EEm enumC36092EEm = EnumC36092EEm.NEW_USER;
            c36093EEn.getClass();
            C36093EEn.LJIIIIZZ(enumC36092EEm);
            C36093EEn.LJ(C39077FVh.LIZIZ.LIZ());
        }
    }

    private TabChangeManager getTabChangeManager() {
        getActivity();
        return C116694i1.LIZ(this);
    }

    public static /* synthetic */ void lambda$logAppLaunch$7() {
        if (System.currentTimeMillis() - C56662Kg.LIZ().LJIILIIL < 2500) {
            C19N.LIZJ(Keva.getRepo("app_launch"), "launch_times", 0, 1, "launch_times");
        }
    }

    private void logAppLaunch() {
        C38995FSd.LIZIZ().execute(new ARunnableS0S0001000_5(1, 0));
    }

    private void refreshWhenBack() {
        IMFFeedAbility LJII;
        C36821Ecj<Boolean> isUseBackRefresh = SharePrefCache.inst().getIsUseBackRefresh();
        if (isUseBackRefresh != null && isUseBackRefresh.LIZ().booleanValue() && getTabChangeManager().mv0() != null && (getTabChangeManager().mv0() instanceof MainFragment) && (LJII = C78929UyL.LJII(getTabChangeManager().mv0())) != null) {
            LJII.refreshWhenBack();
        }
    }

    private void setAllowPrepareVideo() {
        int i;
        boolean z = false;
        boolean booleanExtra = getIntent().getBooleanExtra("from_notification", false);
        this.allowWhenPush = !booleanExtra;
        if (C46254IDi.LJI) {
            FAM LIZ = C56662Kg.LIZ();
            if (booleanExtra) {
                i = 2;
            } else {
                i = 3;
            }
            LIZ.LJFF = i;
        }
        if (!this.adHomePageDataVM.LJLIL && this.allowWhenPush) {
            z = true;
        }
        if (C46368IHs.LIZIZ) {
            return;
        }
        C46368IHs.LIZIZ = true;
        C46368IHs.LIZJ = z;
        FeedItemList feedItemList = C48236IwS.LJIJI;
        if (feedItemList != null && z) {
            C46368IHs.LIZ(feedItemList);
        }
        C48236IwS.LJIJI = null;
    }

    private void setStatusBarColor() {
        Window window = getWindow();
        window.clearFlags(201326592);
        window.getDecorView().setSystemUiVisibility(window.getDecorView().getSystemUiVisibility() | 1024 | 256);
        window.addFlags(LiveLayoutPreloadThreadPriority.DEFAULT);
        window.setStatusBarColor(0);
        getWindow().setFlags(0, LiveLayoutPreloadThreadPriority.DEFAULT);
    }

    private void switchToFYP() {
        Hox.kv0(this).Cv0(new Bundle(), "HOME");
        Hox.kv0(this).Cv0(new Bundle(), "For You");
    }

    @Override // X.ActivityC86117Xqz, android.app.Activity
    public void finish() {
        super.finish();
        List LJIIL = C77357UXp.LJIIL(this);
        if (LJIIL != null) {
            Iterator it = LJIIL.iterator();
            while (it.hasNext()) {
                ((InterfaceC55372LoG) it.next()).I5();
            }
        }
    }

    @Override // X.InterfaceC55058LjC
    public Fragment getCurFragment() {
        if (getTabChangeManager() == null) {
            return null;
        }
        return getTabChangeManager().mv0();
    }

    @Override // X.InterfaceC55058LjC
    public String getEnterFrom() {
        MainBusinessAbility mainBusinessAbility;
        if (isDestroyed() || isFinishing() || (mainBusinessAbility = (MainBusinessAbility) C55096Ljo.LIZ(C55230Lly.LIZLLL(this, null), MainBusinessAbility.class, null)) == null) {
            return "";
        }
        return mainBusinessAbility.XU();
    }

    @Override // X.InterfaceC55286Lms
    public InterfaceC55336Lng getHelper() {
        return C78688UuS.LJJIJIIJI(this).Wv();
    }

    public void lazyDoItMainThread() {
        if (isDestroyed() || !this.showToast || this.adHomePageDataVM.gv0()) {
            return;
        }
        this.homePageService.getHomePageBusiness().LIZ(this);
        this.showToast = false;
    }

    @Override // X.KMV, androidx.activity.ComponentActivity, android.app.Activity
    public void onBackPressed() {
        List LJIIL = C77357UXp.LJIIL(this);
        if (LJIIL != null) {
            Iterator it = LJIIL.iterator();
            while (it.hasNext()) {
                ((InterfaceC55372LoG) it.next()).LJIIJ();
            }
        }
    }

    @Override // X.ActivityC86117Xqz, X.C29S, X.ActivityC45651qj, android.app.Activity
    public void onDestroy() {
        C65803Ps7.LIZIZ(this);
        super.onDestroy();
        this.mCommerceActivityObserver.LIZJ.onDestroy();
        FeedAdServiceImpl.LJJIJLIJ().LJIIJJI();
        C59198NLe.LIZ.LJ();
        FeedAdServiceImpl.LJJIJLIJ().LJIIZILJ();
        NKP.LIZ.LJIILL();
        FeedAdServiceImpl.LJJIJLIJ().LJJIII();
        C59181NKn.LIZ.LJIILJJIL();
        FeedAdServiceImpl.LJJIJLIJ().LJIIIZ();
        C59171NKd.LIZ.LJIILJJIL();
    }

    @Override // X.ActivityC86117Xqz, X.ActivityC45651qj, android.app.Activity
    public void onPause() {
        C65803Ps7.LIZJ(this);
        overridePendingTransition(0, 0);
        super.onPause();
        this.mCommerceActivityObserver.LIZJ.onPause();
    }

    @Override // X.ActivityC86117Xqz, X.ActivityC45651qj, android.app.Activity
    public void onResume() {
        C65803Ps7.LIZLLL(this);
        ActivityAgent.onTrace("com.ss.android.ugc.aweme.main.MainActivity", "onResume", true);
        if (IUJ.LIZJ) {
            IUJ.LIZJ = false;
            C36093EEn.LIZ.getClass();
            C36089EEj LJIIIZ = C36093EEn.LJIIIZ();
            LJIIIZ.LIZIZ(new WarmBootLogger$BootTypeLogger$reportBootType$1(3), true);
            LJIIIZ.LIZJ();
        }
        FAJ.LJFF("cold_boot_main_create_to_resume", true);
        FAJ.LIZ("cold_boot_main_resume_duration", true);
        EWU.LIZIZ("cold_boot_main_create_to_resume");
        EWU.LIZ("cold_boot_main_resume_duration");
        super.onResume();
        C55448LpU c55448LpU = this.mCommerceActivityObserver;
        c55448LpU.getClass();
        AVExternalServiceImpl.LIZ().publishService().resetNewCreateWay();
        c55448LpU.LIZJ.onResume();
        FAJ.LJFF("cold_boot_main_resume_duration", true);
        FAJ.LIZ("cold_boot_main_resume_to_focus", true);
        FAJ.LIZ("cold_boot_main_resume_to_measure", true);
        FAK LIZ = C56672Kh.LIZ();
        FAV stage = FAV.RESUME_TO_FOCUS;
        LIZ.getClass();
        o.LJIIIZ(stage, "stage");
        LIZ.LJJIJIIJI = stage;
        EWU.LIZIZ("cold_boot_main_resume_duration");
        EWU.LIZ("cold_boot_main_resume_to_measure");
        EWU.LIZ("cold_boot_main_resume_to_focus");
        ActivityAgent.onTrace("com.ss.android.ugc.aweme.main.MainActivity", "onResume", false);
    }

    @Override // X.C29S, android.app.Activity
    public void recreate() {
        super.recreate();
        List LJIIL = C77357UXp.LJIIL(this);
        if (LJIIL != null) {
            Iterator it = LJIIL.iterator();
            while (it.hasNext()) {
                ((InterfaceC55372LoG) it.next()).N5();
            }
        }
    }

    public void refreshSlideSwitchCanScrollRight() {
        if (isScrollSwitchHelperInit()) {
            Fragment mv0 = getTabChangeManager().mv0();
            if (mv0 == null || !(mv0 instanceof MainFragment)) {
                this.stateManager.uv0(getScrollFullChecker());
                return;
            }
            InterfaceC36571c5 interfaceC36571c5 = (FeedFragment) this.stateManager.wv0();
            if (interfaceC36571c5 instanceof InterfaceC40408FtU) {
                InterfaceC40408FtU interfaceC40408FtU = (InterfaceC40408FtU) interfaceC36571c5;
                if ("FeedFollowFragment".equals(interfaceC40408FtU.og()) || "MallMainFragment".equals(interfaceC40408FtU.og()) || "FeedLearnFragment".equals(interfaceC40408FtU.og()) || "FeedRecommendFragment".equals(interfaceC40408FtU.og()) || "SocialFriendsFeedFragment".equals(interfaceC40408FtU.og()) || "TTDspFragmentV2".equals(interfaceC40408FtU.og()) || "NearByFragment".equals(interfaceC40408FtU.og()) || "FeedPopularFragment".equals(interfaceC40408FtU.og()) || "LiveFeedFragment".equals(interfaceC40408FtU.og()) || LO7.LIZIZ.J1(((MainFragment) mv0).LLLLLZ())) {
                    this.homeViewModel.hv0(((MainFragment) mv0).LLLLLZ());
                    setAdScrollRightControl();
                    return;
                }
            }
            this.stateManager.uv0(getScrollFullChecker());
        }
    }

    @Override // android.app.Activity
    public boolean releaseInstance() {
        boolean releaseInstance = super.releaseInstance();
        List LJIIL = C77357UXp.LJIIL(this);
        if (LJIIL != null) {
            Iterator it = LJIIL.iterator();
            while (it.hasNext()) {
                ((InterfaceC55372LoG) it.next()).P5(releaseInstance);
            }
        }
        return releaseInstance;
    }

    @Override // X.InterfaceC55452LpY
    public void splashOverShowMandatoryLoginPage() {
        List LJIIL = C77357UXp.LJIIL(this);
        if (LJIIL != null) {
            Iterator it = LJIIL.iterator();
            while (it.hasNext()) {
                ((InterfaceC55372LoG) it.next()).splashOverShowMandatoryLoginPage();
            }
        }
    }

    public static void com_ss_android_ugc_aweme_main_MainActivity_com_bytedance_sysoptimizer_EnterTransitionLancet_onStop(MainActivity mainActivity) {
        mainActivity.com_ss_android_ugc_aweme_main_MainActivity__onStop$___twin___();
        if (EnterTransitionCrashOptimizer.getContext() != null) {
            try {
                mainActivity.getWindow().getDecorView().getViewTreeObserver().dispatchOnPreDraw();
            } catch (Throwable unused) {
            }
        }
    }

    public static void com_ss_android_ugc_aweme_main_MainActivity_com_ss_android_ugc_aweme_lancet_ActivityEnterTransitionCoordinatorLancet_onStop(MainActivity mainActivity) {
        com_ss_android_ugc_aweme_main_MainActivity_com_bytedance_sysoptimizer_EnterTransitionLancet_onStop(mainActivity);
        try {
            mainActivity.getWindow().getDecorView().getViewTreeObserver().dispatchOnPreDraw();
        } catch (Throwable unused) {
        }
    }

    public static /* synthetic */ C76800UCe lambda$onCreate$6(BaseActivityViewModel baseActivityViewModel) {
        baseActivityViewModel.config(new AObjectS25S0000000_9(0));
        baseActivityViewModel.config(new AObjectS25S0000000_9(3));
        baseActivityViewModel.config(new AObjectS25S0000000_9(4));
        return null;
    }

    private void onVideoPageChangeEventDelay(C9CI c9ci) {
        if (!C63081OpJ.LJJLIIIJJI(c9ci.LJLIL) || !C63081OpJ.LJLJJL(c9ci.LJLIL)) {
            C38816FLg.LIZLLL(new ARunnableS45S0100000_9(this, 71), 300);
        }
        setAdScrollRightControl();
        IContentLanguageGuideService LIZIZ = ContentLanguageGuideServiceImpl.LIZIZ();
        getActivity();
        LIZIZ.LJI(this);
        if (C63081OpJ.LJJLIIIJJI(c9ci.LJLIL)) {
            LiveOuterService.LJJJLL().LJJJJLL(false).getClass();
            LQM.LIZJ("ad_avoid", false);
            C82699Wcx.LIZ();
        }
    }

    private void track0VVForUIStage(int i) {
        if (C39082FVm.LIZ()) {
            HashMap LIZ = C45243HpH.LIZ("monitor_scene", "scene_launch", "launch_type", "launch_type_main");
            LIZ.put("vv_code", Integer.valueOf(i));
            LIZ.put("launch_has_main", 1);
            C39082FVm.LIZJ(LIZ);
        }
    }

    @QD3
    public void CCTEvent(C55386LoU c55386LoU) {
        setAdScrollRightControl();
    }

    @Override // X.InterfaceC55452LpY
    public void allowSwipeLeft(boolean z) {
        if (z) {
            if (Hox.kv0(this).vv0("HOME")) {
                this.stateManager.uv0(getScrollBasicChecker());
                return;
            } else {
                this.stateManager.uv0(getScrollFullChecker());
                return;
            }
        }
        this.stateManager.uv0(getScrollFullChecker());
    }

    @Override // X.ActivityC86117Xqz, X.C29S, android.app.Activity, android.view.ContextThemeWrapper, android.content.ContextWrapper
    public void attachBaseContext(Context context) {
        FAJ.LIZ("main_act_attach", true);
        C55375LoJ.LIZ = new FutureTask<>(new CallableC55631LsR());
        ExecutorService mainPreloadExecutor = C37183EiZ.LIZ();
        o.LJIIIIZZ(mainPreloadExecutor, "mainPreloadExecutor");
        mainPreloadExecutor.execute(C55375LoJ.LIZ);
        if (C19N.LJ("enable_home_pre_vscope", true)) {
            C55249LmH.LIZ = C37183EiZ.LIZ();
        }
        PreLoader.LIZIZ(this, null);
        if (C34710Djm.LJIIIIZZ()) {
            MainLooperOptService.LJII();
        }
        if (!C38556FBg.LIZIZ) {
            Object obj = C38556FBg.LIZ;
            synchronized (obj) {
                C38556FBg.LIZIZ = true;
                obj.notifyAll();
            }
        }
        doFeedCacheWhenAttach();
        super.attachBaseContext(context);
        FAJ.LJFF("main_act_attach", true);
    }

    @Override // X.C29S, X.C1AU, android.app.Activity, android.view.Window.Callback
    public boolean dispatchKeyEvent(KeyEvent keyEvent) {
        InterfaceC36571c5 curFragment = getCurFragment();
        if (curFragment instanceof InterfaceC54054LJi) {
            FeedFragment w2 = ((InterfaceC54054LJi) curFragment).w2();
            if (w2 instanceof FeedFragment) {
                w2.rY(keyEvent);
            }
        }
        return super.dispatchKeyEvent(keyEvent);
    }

    @Override // android.app.Activity, android.view.Window.Callback
    public boolean dispatchTouchEvent(MotionEvent motionEvent) {
        long j = HG3.LJLJJI;
        if (j > 0) {
            long elapsedRealtime = SystemClock.elapsedRealtime();
            if (elapsedRealtime - this.lastFeedTime >= j) {
                C48591J5f.LIZIZ.feedMotionEvent(motionEvent);
                if (motionEvent.getAction() == 1) {
                    this.lastFeedTime = elapsedRealtime;
                }
            }
        }
        try {
            return super.dispatchTouchEvent(motionEvent);
        } catch (Throwable th) {
            C36922EeM.LJFF(th);
            C198517qh c198517qh = new C198517qh();
            c198517qh.LIZ.put("message", th.getMessage());
            C8HX.LIZIZ("main_activity_dispatch_error", "", c198517qh.LJ());
            return false;
        }
    }

    @Override // android.app.Activity, android.view.ContextThemeWrapper, android.content.ContextWrapper, android.content.Context
    public Object getSystemService(String str) {
        Object LLIILZL;
        InterfaceC55373LoH interfaceC55373LoH = this.resourceOptComponent;
        if (interfaceC55373LoH == null || (LLIILZL = interfaceC55373LoH.LLIILZL(str)) == null) {
            return INVOKESPECIAL_com_ss_android_ugc_aweme_main_MainActivity_com_ss_android_ugc_aweme_lancet_GetSystemServiceLancet_getSystemService(this, str);
        }
        return LLIILZL;
    }

    @Override // X.ActivityC86117Xqz, X.C29S, X.ActivityC45651qj, androidx.activity.ComponentActivity, android.app.Activity, android.content.ComponentCallbacks
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        o.LJIIIZ(newConfig, "newConfig");
        List LJIIL = C77357UXp.LJIIL(this);
        if (LJIIL != null) {
            Iterator it = LJIIL.iterator();
            while (it.hasNext()) {
                ((InterfaceC55372LoG) it.next()).onConfigurationChanged(newConfig);
            }
        }
    }

    @Override // X.YUM, X.ActivityC86117Xqz, X.KMV, X.ActivityC45651qj, androidx.activity.ComponentActivity, X.C1AU, android.app.Activity
    public void onCreate(Bundle bundle) {
        boolean z;
        int i;
        int i2;
        C65803Ps7.LIZ(this, bundle);
        ActivityAgent.onTrace("com.ss.android.ugc.aweme.main.MainActivity", "onCreate", true);
        FAK LIZ = C56672Kh.LIZ();
        EHX ehx = EHX.MAIN_CREATE;
        if (ehx != null) {
            LIZ.LJJIII = ehx;
        } else {
            LIZ.getClass();
        }
        C56672Kh.LIZ().LJJIIJZLJL(EHW.MAIN_CREATE);
        FAK LIZ2 = C56672Kh.LIZ();
        FAV stage = FAV.MAIN_ACT_CREATE;
        LIZ2.getClass();
        o.LJIIIZ(stage, "stage");
        LIZ2.LJJIJIIJI = stage;
        FAJ.LJFF("cold_boot_application_to_main", true);
        FAJ.LIZ("cold_boot_main_create_duration", true);
        FAJ.LIZ("main_act_begin_to_super", true);
        FAJ.LIZ("method_main_create_begin_to_splash_ad", false);
        EWU.LIZIZ("cold_boot_application_to_main");
        EWU.LIZ("cold_boot_main_create_duration");
        C56672Kh.LIZ().LIZLLL("main_act_create_assem");
        C56672Kh.LIZ().LIZLLL("main_act_create_pre_apply_assem_part_1");
        if (((Boolean) C35143Dql.LIZIZ.getValue()).booleanValue()) {
            C38995FSd.LIZIZ().execute(new ARunnableS18S0000000_11(30));
        }
        if (FKB.LIZIZ == 0) {
            FKB.LIZIZ = SystemClock.uptimeMillis();
        }
        C78983UzD.LJLLL = true;
        executeEnsureLogic();
        logAppLaunch();
        track0VVForUIStage(3100);
        LFH.LIZIZ.LIZIZ(this);
        if (bundle != null) {
            z = true;
        } else {
            z = false;
        }
        C46538IOg.LIZIZ = SystemClock.uptimeMillis();
        IUJ.LIZJ = false;
        if (z) {
            if (IUJ.LIZ) {
                i = 5;
            } else {
                i = 4;
            }
        } else if (IUJ.LIZ) {
            i = 1;
        } else {
            i = 2;
        }
        C36093EEn c36093EEn = C36093EEn.LIZ;
        c36093EEn.getClass();
        C36089EEj LJIIIZ = C36093EEn.LJIIIZ();
        LJIIIZ.LIZIZ(new WarmBootLogger$BootTypeLogger$reportBootType$1(i), true);
        LJIIIZ.LIZJ();
        IUJ.LIZ = false;
        FAK LIZ3 = C56672Kh.LIZ();
        LIZ3.getClass();
        LIZ3.LJFF(SystemClock.uptimeMillis(), "main_act_create_pre_apply_assem_part_1");
        FAJ.LIZ("main_act_assemble_duration", false);
        C55103Ljv.LIZ = C52200KeC.LIZ;
        C56672Kh.LIZ().LIZLLL("main_act_assemble_get_friend");
        C8W0 c8w0 = null;
        if (C53295Kvr.LIZ()) {
            c8w0 = LHM.LIZIZ.LIZ().initSocial2TabAssem(this, null);
        } else {
            LGO lgo = LGO.LJLIL;
            Object LIZJ = E3F.LIZJ("getFriendChildTabAssem_preload", lgo, new AqS157S0100000_7(lgo, 139), ((Boolean) C34597Dhx.LIZIZ.getValue()).booleanValue());
            if (LIZJ != null) {
                if (((Boolean) LIZJ).booleanValue()) {
                    C45337Hqn.LIZ = false;
                    c8w0 = LHM.LIZIZ.LIZ().initSocial2TabAssem(this, C37183EiZ.LIZ());
                }
            } else {
                "Required value was null.".toString();
                throw new IllegalArgumentException("Required value was null.");
            }
        }
        C56672Kh.LIZ().LJFF(SystemClock.uptimeMillis(), "main_act_assemble_get_friend");
        C56672Kh.LIZ().LIZLLL("main_act_assemble_commit");
        TabAbilityAssem tabAbilityAssem = new TabAbilityAssem();
        tabAbilityAssem.LLLLZ(this);
        C56672Kh.LIZ().LJFF(SystemClock.uptimeMillis(), "main_act_assemble_commit");
        if (((Boolean) C34710Djm.LJJJJL.getValue()).booleanValue()) {
            LNZ.LIZIZ.getX2CInflateCommitter().LIZ(this);
            C39078FVi.LIZ();
            FET.LIZLLL(this);
        }
        C54029LIj.LIZIZ.LJIIJJI(this);
        C56672Kh.LIZ().LIZLLL("main_act_assemble_ensureassem");
        EE1 LIZLLL = C55374LoI.LIZIZ.LIZLLL();
        c36093EEn.getClass();
        C36093EEn.LJ(LIZLLL);
        C56672Kh.LIZ().LJFF(SystemClock.uptimeMillis(), "main_act_assemble_ensureassem");
        C56672Kh.LIZ().LIZLLL("main_act_assemble_invoke");
        C8VV.LIZIZ(this, new AqS113S0300000_9(this, c8w0, tabAbilityAssem, 3));
        C56672Kh.LIZ().LJFF(SystemClock.uptimeMillis(), "main_act_assemble_invoke");
        C56672Kh.LIZ().LIZLLL("main_act_assemble_loaded");
        List LJIIL = C77357UXp.LJIIL(this);
        if (LJIIL != null) {
            Iterator it = LJIIL.iterator();
            while (it.hasNext()) {
                ((InterfaceC55372LoG) it.next()).S5();
            }
        }
        C56672Kh.LIZ().LJFF(SystemClock.uptimeMillis(), "main_act_assemble_loaded");
        FAJ.LJFF("main_act_assemble_duration", false);
        FAK LIZ4 = C56672Kh.LIZ();
        LIZ4.getClass();
        LIZ4.LJFF(SystemClock.uptimeMillis(), "main_act_create_assem");
        C56672Kh.LIZ().LIZLLL("main_act_create_part1");
        E3F.LIZJ("StoryClearOpt", new AObjectS52S0101000_7(1, this, 23), new AObjectS52S0101000_7(0, this, 4), ((Boolean) C88109Yi1.LIZIZ.getValue()).booleanValue());
        C58604MzI.LIZIZ.mainOnCreate(this);
        this.stateManager = C84193Sd.LIZ(this);
        this.homeViewModel = C3SZ.LIZ(this);
        this.adHomePageDataVM = LPY.LIZ(this);
        this.mDataCenter = DataCenter.gv0(ViewModelProviders.of(this), this);
        if (!SplashSettingServiceImpl.LJII().LJFF()) {
            FLB.LIZ(getIntent());
        }
        C56662Kg.LIZ().LIZJ("feed_lego_add_to_request", false);
        C56662Kg.LIZ().LJFF("main_act_user_guide_to_immersive_config", false);
        C56662Kg.LIZ().LIZJ("main_act_immersive_config", false);
        activityConfiguration(new AObjectS11S0001000_6(1, 1));
        if (bundle != null) {
            i2 = R.style.ul;
        } else {
            i2 = R.style.up;
        }
        setTheme(i2);
        FAK LIZ5 = C56672Kh.LIZ();
        LIZ5.getClass();
        LIZ5.LJFF(SystemClock.uptimeMillis(), "main_act_create_part1");
        FAJ.LJFF("main_act_begin_to_super", true);
        FAJ.LIZ("main_act_super_duration", true);
        C62822Ol8 c62822Ol8 = C34710Djm.LJIIL;
        if (!((Boolean) c62822Ol8.getValue()).booleanValue()) {
            C77357UXp.LJJJJ(this);
            super.onCreate(bundle);
        }
        FAJ.LJFF("main_act_super_duration", true);
        FAJ.LIZ("main_act_super_to_contentview", true);
        C56672Kh.LIZ().LIZLLL("main_act_create_part2");
        C55448LpU c55448LpU = this.mCommerceActivityObserver;
        c55448LpU.LIZIZ = C3SZ.LIZ(c55448LpU.LIZ);
        LPY.LIZ(c55448LpU.LIZ);
        if (((Boolean) C34710Djm.LJJJJ.getValue()).booleanValue() && O6Z.LIZJ && !O6Z.LIZLLL) {
            O6Z.LIZJ = false;
        }
        c55448LpU.LIZJ.onCreate();
        if (!C55376LoK.LIZ) {
            Object obj = C55376LoK.LIZIZ;
            synchronized (obj) {
                C55376LoK.LIZ = true;
                obj.notifyAll();
            }
        }
        setAllowPrepareVideo();
        if (SplashSettingServiceImpl.LJII().LJFF()) {
            FLB.LIZ(getIntent());
        }
        FAK LIZ6 = C56672Kh.LIZ();
        LIZ6.getClass();
        LIZ6.LJFF(SystemClock.uptimeMillis(), "main_act_create_part2");
        FAJ.LJFF("main_act_super_to_contentview", true);
        FAJ.LIZ("main_act_contentview_duration", true);
        if (!((Boolean) c62822Ol8.getValue()).booleanValue()) {
            this.mActivityProxy.LIZ(this);
            C8VV.LIZIZ(this, new AqS169S0100000_3(this, 244));
            setStatusBarColor();
        }
        FAJ.LJFF("main_act_contentview_duration", true);
        FAJ.LIZ("main_act_contentview_to_end", true);
        C56672Kh.LIZ().LIZLLL("main_act_create_part3");
        getWindow().setSoftInputMode(32);
        ensureLazyDoItFinallyCalled();
        if (!C45337Hqn.LIZ(this) && TextUtils.equals(getIntent().getAction(), "android.intent.action.MAIN") && getIntent().getCategories() != null && getIntent().getCategories().size() > 0 && getIntent().getCategories().contains("android.intent.category.LAUNCHER") && !isTaskRoot()) {
            finish();
            ActivityAgent.onTrace("com.ss.android.ugc.aweme.main.MainActivity", "onCreate", false);
            return;
        }
        EF7.LJIILL = ((Number) C52740Kmu.LIZ.getValue()).intValue();
        if (((Boolean) c62822Ol8.getValue()).booleanValue()) {
            C77357UXp.LJJJJ(this);
            super.onCreate(bundle);
            setStatusBarColor();
            this.mActivityProxy.LIZ(this);
            C8VV.LIZIZ(this, new AqS169S0100000_3(this, 244));
        }
        List LJIIL2 = C77357UXp.LJIIL(this);
        if (LJIIL2 != null) {
            Iterator it2 = LJIIL2.iterator();
            while (it2.hasNext()) {
                ((InterfaceC55372LoG) it2.next()).onCreate(bundle);
            }
        }
        if (DSR.LJFF() || (DVD.LIZ() & 8) == 8) {
            C38995FSd.LIZJ().execute(new ARunnableS13S0000000_6(24));
        }
        if (ATO.LIZIZ()) {
            View decorView = getWindow().getDecorView();
            o.LJII(decorView, "null cannot be cast to non-null type android.view.ViewGroup");
            ViewGroup viewGroup = (ViewGroup) decorView;
            viewGroup.setOnApplyWindowInsetsListener(new ViewOnApplyWindowInsetsListenerC51184K6y(viewGroup));
        }
        if (((Boolean) C35143Dql.LIZIZ.getValue()).booleanValue()) {
            C38995FSd.LIZIZ().execute(new ARunnableS18S0000000_11(31));
        }
        FAK LIZ7 = C56672Kh.LIZ();
        LIZ7.getClass();
        LIZ7.LJFF(SystemClock.uptimeMillis(), "main_act_create_part3");
        FAJ.LJFF("main_act_contentview_to_end", true);
        FAJ.LJFF("method_splash_ad_to_main_create_end", false);
        FAJ.LJFF("cold_boot_main_create_duration", true);
        FAJ.LIZ("cold_boot_main_create_to_resume", true);
        FAK LIZ8 = C56672Kh.LIZ();
        FAV stage2 = FAV.MAIN_ACT_CREATE;
        LIZ8.getClass();
        o.LJIIIZ(stage2, "stage");
        LIZ8.LJJIJIIJI = FAV.OTHER;
        EWU.LIZIZ("cold_boot_main_create_duration");
        EWU.LIZ("cold_boot_main_create_to_resume");
        ((LocalTestApi) ServiceManager.get().getService(LocalTestApi.class)).initLogEasyTask();
        ActivityAgent.onTrace("com.ss.android.ugc.aweme.main.MainActivity", "onCreate", false);
    }

    @QD3
    public void onHideLivePopupWindowEvent(C55050Lj4 c55050Lj4) {
        if (!C52937Kq5.LIZ() && C52207KeJ.LIZ) {
            C86550Xxy.LIZIZ.LIZIZ("ad");
        }
    }

    @QD3
    public void onMobEnterFromEvent(C54060LJo c54060LJo) {
        if (C52937Kq5.LIZ()) {
            return;
        }
        this.homeViewModel.hv0(c54060LJo.LJLIL);
    }

    @QD3
    public void onMobRequestIdEvent(C2J0 c2j0) {
        if (C52937Kq5.LIZ()) {
            return;
        }
        this.homeViewModel.LJLJLJ = c2j0.LJLIL;
    }

    @Override // X.KMV, X.ActivityC45651qj, androidx.activity.ComponentActivity, android.app.Activity
    public void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        if (intent != null && intent.getBooleanExtra("from_new_user_journey", false)) {
            getIntent().putExtra("INTENT_BTM", C16880lQ.LLJJIJI(intent).getBundle("INTENT_BTM"));
            getIntent().putExtra("pre_mainactivity_first_enter", Boolean.valueOf(intent.getBooleanExtra("pre_mainactivity_first_enter", false)));
            return;
        }
        intent.putExtra("onNewIntent", true);
        setIntent(intent);
        List LJIIL = C77357UXp.LJIIL(this);
        if (LJIIL != null) {
            Iterator it = LJIIL.iterator();
            while (it.hasNext()) {
                ((InterfaceC55372LoG) it.next()).onNewIntent(intent);
            }
        }
        if (intent.getBooleanExtra("error_back_to_fyp", false)) {
            switchToFYP();
        }
    }

    @Override // android.view.Window.Callback
    public void onPointerCaptureChanged(boolean z) {
        super.onPointerCaptureChanged(z);
    }

    @Override // X.ActivityC86117Xqz, android.app.Activity
    public void onRestoreInstanceState(Bundle bundle) {
        this.homePageService.getHomePageBusiness().LIZIZ(bundle, this);
        super.onRestoreInstanceState(bundle);
        boolean z = bundle.getBoolean("slide_switch_scanScroll");
        TabChangeManager tabChangeManager = getTabChangeManager();
        if (tabChangeManager.nv0() == null) {
            tabChangeManager.LJLJLLL = bundle.getString("cur_fragment");
            LLF llf = tabChangeManager.LJLLILLLL;
            if (llf != null) {
                String nv0 = tabChangeManager.nv0();
                ScrollSwitchStateManager scrollSwitchStateManager = llf.LIZ.LIZJ;
                if (scrollSwitchStateManager != null) {
                    scrollSwitchStateManager.LJLZ = nv0;
                }
            }
        }
        if (tabChangeManager.LJLJJLL == null) {
            tabChangeManager.LJLJJLL = bundle.getString("last_fragment");
        }
        Bundle bundle2 = new Bundle();
        bundle2.putBoolean("isForcedRefreshView", true);
        bundle2.putString("fromStart", "MainPage");
        Hox.kv0(this).Cv0(bundle2, "HOME");
        this.stateManager.tv0(z);
        List LJIIL = C77357UXp.LJIIL(this);
        if (LJIIL != null) {
            Iterator it = LJIIL.iterator();
            while (it.hasNext()) {
                ((InterfaceC55372LoG) it.next()).onRestoreInstanceState(bundle);
            }
        }
    }

    @Override // X.ActivityC86117Xqz, X.ActivityC45651qj, androidx.activity.ComponentActivity, X.C1AU, android.app.Activity
    public void onSaveInstanceState(Bundle outState) {
        int size;
        boolean z;
        String str;
        C54296LSq c54296LSq;
        super.onSaveInstanceState(outState);
        TabChangeManager tabChangeManager = getTabChangeManager();
        tabChangeManager.getClass();
        o.LJIIIZ(outState, "outState");
        outState.putString("cur_fragment", tabChangeManager.nv0());
        outState.putString("last_fragment", tabChangeManager.LJLJJLL);
        outState.putString("previousTag", getTabChangeManager().nv0());
        Boolean value = this.stateManager.LJLJJI.getValue();
        o.LJI(value);
        outState.putBoolean("slide_switch_scanScroll", value.booleanValue());
        ScrollSwitchStateManager scrollSwitchStateManager = this.stateManager;
        scrollSwitchStateManager.getClass();
        if (scrollSwitchStateManager.LJLILLLLZI.getValue() == null) {
            size = 0;
        } else {
            List<C54296LSq> value2 = scrollSwitchStateManager.LJLILLLLZI.getValue();
            o.LJI(value2);
            size = value2.size();
        }
        int i = 0;
        while (true) {
            if (i < size) {
                List<C54296LSq> value3 = scrollSwitchStateManager.LJLILLLLZI.getValue();
                if (value3 != null && (c54296LSq = (C54296LSq) ListProtector.get(value3, i)) != null) {
                    str = c54296LSq.LIZIZ;
                } else {
                    str = null;
                }
                if (TextUtils.equals("page_setting", str)) {
                    z = true;
                    break;
                }
                i++;
            } else {
                z = false;
                break;
            }
        }
        outState.putBoolean("should_show_slide_setting", z);
        FFL.LJIIIZ().getClass();
        if (!FFL.LJ(31744, "enable_main_use_fragments_cache", true, false)) {
            outState.putParcelable("android:support:fragments", null);
        }
        List LJIIL = C77357UXp.LJIIL(this);
        if (LJIIL != null) {
            Iterator it = LJIIL.iterator();
            while (it.hasNext()) {
                ((InterfaceC55372LoG) it.next()).onSaveInstanceState(outState);
            }
        }
    }

    @QD3
    public void onScrollToDetailEvent(C81P c81p) {
        if (c81p == null || !isScrollSwitchHelperInit()) {
            return;
        }
        this.homeViewModel.hv0(c81p.LJLIL);
    }

    @QD3
    public void onScrollToProfileEvent(C224498rV c224498rV) {
        if (C52937Kq5.LIZ()) {
            return;
        }
        String str = c224498rV.LJLILLLLZI;
        if (str == null) {
            str = "";
        }
        if (c224498rV.LJLIL != hashCode()) {
            return;
        }
        if (TextUtils.equals(str, "click_ad_web_jsb") || TextUtils.equals(str, "click_ad_jsb") || !this.mCommerceActivityObserver.LIZ()) {
            C78688UuS.LJJIJIIJI(this).J1(this.homeViewModel.LJLJLLL, str);
        }
    }

    @QD3(threadMode = ThreadMode.MAIN)
    public void onSettingsDoneEvent(C53914LDy c53914LDy) {
        if (!C52937Kq5.LIZ()) {
            C54982Lhy.LJIIIIZZ = false;
        }
    }

    @QD3
    public void onVideoPageChangeEvent(C9CI c9ci) {
        Aweme aweme;
        String str;
        if (C52937Kq5.LIZ() || (aweme = c9ci.LJLIL) == null) {
            return;
        }
        String authorUid = aweme.getAuthorUid();
        HomePageDataViewModel homePageDataViewModel = this.homeViewModel;
        Aweme aweme2 = c9ci.LJLIL;
        homePageDataViewModel.LJLJLLL = aweme2;
        if (aweme2 != null) {
            str = aweme2.getAid();
        } else {
            str = "";
        }
        C78939UyV.LJLILLLLZI = str;
        Aweme aweme3 = this.homeViewModel.LJLJLLL;
        if (aweme3 != null) {
            aweme3.getAid();
        }
        if (TextUtils.equals(this.homeViewModel.LJLJJI, authorUid)) {
            return;
        }
        this.homeViewModel.LJLJJI = authorUid;
        this.mCommerceActivityObserver.LIZJ.onVideoPageChangeEvent(c9ci.LJLIL, c9ci.LJLILLLLZI);
        onVideoPageChangeEventDelay(c9ci);
    }

    @Override // X.ActivityC86117Xqz, android.app.Activity, android.view.Window.Callback
    public void onWindowFocusChanged(boolean z) {
        ActivityAgent.onTrace("com.ss.android.ugc.aweme.main.MainActivity", "onWindowFocusChanged", true);
        if (z) {
            EWU.LIZIZ("cold_boot_main_resume_to_focus");
            FAK LIZ = C56672Kh.LIZ();
            if (LIZ.LJJIIZI <= 0) {
                FAK LIZ2 = C56672Kh.LIZ();
                EHX ehx = EHX.MAIN_FOCUS;
                if (ehx != null) {
                    LIZ2.LJJIII = ehx;
                } else {
                    LIZ2.getClass();
                }
                LIZ.LJJIIZI = SystemClock.elapsedRealtime();
            }
            if (FKB.LIZJ == 0) {
                FKB.LIZJ = SystemClock.elapsedRealtime();
            }
            FAJ.LJFF("cold_boot_main_measure_to_focus", true);
            FAJ.LJFF("cold_boot_main_resume_to_focus", true);
            FAJ.LIZ("cold_boot_main_focus_duration", true);
            C56662Kg.LIZ().LJFF("cold_boot_main_layout_to_focus", false);
            C56662Kg.LIZ().LJFF("cold_boot_main_draw_to_focus", false);
            C56662Kg.LIZ().LJFF("feed_load_cache_completed_to_focus", false);
            C56662Kg.LIZ().LJFF("cold_boot_main_feed_success_to_focus", false);
            activityForNewUser();
        }
        super.onWindowFocusChanged(z);
        boolean z2 = this.mIsFirstVisible;
        if (z && z2) {
            this.mIsFirstVisible = false;
        }
        List LJIIL = C77357UXp.LJIIL(this);
        if (LJIIL != null) {
            Iterator it = LJIIL.iterator();
            while (it.hasNext()) {
                ((InterfaceC55372LoG) it.next()).K5(z, z2);
            }
        }
        if (z) {
            FAJ.LJFF("cold_boot_main_focus_duration", true);
            C56662Kg.LIZ().LJFF("app_start_to_main_focus", true);
            C56672Kh.LIZ().LJIIJ("app_start_to_main_focus");
            FAJ.LJFF("app_start_to_main_focus_v2", true);
            FAJ.LIZ("cold_boot_main_focus_to_feed_success", true);
            C56672Kh.LIZ().LJIIIIZZ(SystemClock.elapsedRealtime() - FKB.LIZ, "app_start_to_main_focus_v3");
            C56662Kg.LIZ().LIZLLL(SystemClock.elapsedRealtime() - FKB.LIZ, "app_start_to_main_focus_v3");
            C56662Kg.LIZ().getClass();
            if (!FAM.LJIIIZ()) {
                FAR.LIZ(C38987FRv.LIZLLL().booleanValue());
                return;
            }
            return;
        }
        C56662Kg.LIZ().LIZLLL = false;
        C46538IOg.LIZ = false;
    }

    @Override // X.C34X
    public void registerActivityOnKeyDownListener(GHC ghc) {
        if (this.mActivityOnKeyDownListeners == null) {
            this.mActivityOnKeyDownListeners = new ArrayList();
        }
        if (!this.mActivityOnKeyDownListeners.contains(ghc)) {
            for (GHC ghc2 : this.mActivityOnKeyDownListeners) {
                if (ghc2.getClass() == ghc.getClass()) {
                    List<GHC> list = this.mActivityOnKeyDownListeners;
                    ListProtector.add(list, list.indexOf(ghc2), ghc);
                    return;
                }
            }
            this.mActivityOnKeyDownListeners.add(ghc);
        }
    }

    @Override // X.OGB
    public void setActivityResultListener(InterfaceC27436Apk interfaceC27436Apk) {
        this.mActivityResultListener = interfaceC27436Apk;
    }

    @Override // X.ActivityC86117Xqz, X.C29S, android.app.Activity, android.view.ContextThemeWrapper, android.content.ContextWrapper, android.content.Context
    public void setTheme(int i) {
        super.setTheme(i);
        InterfaceC55373LoH interfaceC55373LoH = this.resourceOptComponent;
        if (interfaceC55373LoH != null) {
            interfaceC55373LoH.LLJLL(i);
        }
    }

    @Override // X.InterfaceC55452LpY
    public void setVpEnableDispatchTouchEventCheck(boolean z) {
        C78688UuS.LJJIJIIJI(this).Nf0(z);
    }

    @Override // X.C34X
    public void unRegisterActivityOnKeyDownListener(GHC ghc) {
        List<GHC> list = this.mActivityOnKeyDownListeners;
        if (list != null) {
            list.remove(ghc);
        }
    }

    @Override // X.InterfaceC121074p5
    public void onDrawFirstFrame(Map<String, Object> map) {
    }

    public static Object INVOKESPECIAL_com_ss_android_ugc_aweme_main_MainActivity_com_ss_android_ugc_aweme_lancet_GetSystemServiceLancet_getSystemService(YUM yum, String str) {
        Object systemService;
        if (Build.VERSION.SDK_INT <= 27 && "clipboard".equals(str)) {
            if (IN7.LIZ) {
                synchronized (ClipboardManager.class) {
                    systemService = super.getSystemService(str);
                    if (Thread.currentThread() != Looper.getMainLooper().getThread()) {
                        try {
                            Field declaredField = ClipboardManager.class.getDeclaredField("mHandler");
                            declaredField.setAccessible(true);
                            declaredField.set(systemService, new IN6((Handler) declaredField.get(systemService)));
                        } catch (Exception e) {
                            PJZ.LIZIZ(e, "ClipboardManager Handler Reflect Fail");
                        }
                    }
                    IN7.LIZ = false;
                }
                return systemService;
            }
            return super.getSystemService(str);
        }
        if (!IN7.LIZIZ && "connectivity".equals(str)) {
            try {
                new C36721Eb7().LJ();
                IN7.LIZIZ = true;
                return super.getSystemService(str);
            } catch (Throwable unused) {
                return super.getSystemService(str);
            }
        }
        return super.getSystemService(str);
    }

    private boolean toFeedPage(Boolean bool, boolean z) {
        HomePageViewPagerAbility homePageViewPagerAbility = (HomePageViewPagerAbility) C55096Ljo.LIZ(C55230Lly.LIZLLL(this, null), HomePageViewPagerAbility.class, null);
        if (homePageViewPagerAbility != null) {
            return homePageViewPagerAbility.toFeedPage(bool, z);
        }
        return false;
    }

    public void flingBackToFeedChange(Aweme aweme, Context context) {
        IAdSceneService LJII = AdSceneServiceImpl.LJII();
        if (LJII != null) {
            LJII.LIZJ();
            NT2.LJJIL(aweme, context);
        }
    }

    public void flingToIndexChange(Aweme aweme, Context context) {
        IAdSceneService LJII = AdSceneServiceImpl.LJII();
        if (LJII != null) {
            LJII.LIZJ();
            NT2.LJJIZ(aweme, context);
        }
    }

    @Override // X.ActivityC86117Xqz, android.app.Activity
    public void onActivityReenter(int i, Intent intent) {
        C55408Loq.LIZ(this, i);
        if (-1 == i && intent != null) {
            String LLJJIJIIJIL = C16880lQ.LLJJIJIIJIL(intent, "feed_share_element_aid");
            if (getTabChangeManager().mv0() instanceof InterfaceC59608NaO) {
                ((InterfaceC59608NaO) getTabChangeManager().mv0()).LJJIJ(LLJJIJIIJIL);
            } else if (getTabChangeManager().mv0() instanceof MainFragment) {
                C78688UuS.LJJIJIIJI(this).l7(LLJJIJIIJIL);
            }
        }
        super.onActivityReenter(i, intent);
    }

    @Override // X.ActivityC86117Xqz, X.C29S, android.app.Activity, android.view.KeyEvent.Callback
    public boolean onKeyDown(int i, KeyEvent keyEvent) {
        this.onVolumeKeyDownHandled = false;
        List<GHC> list = this.mActivityOnKeyDownListeners;
        if (list != null) {
            Iterator<GHC> it = list.iterator();
            while (it.hasNext()) {
                if (it.next().onKeyDown(i, keyEvent)) {
                    this.onVolumeKeyDownHandled = true;
                    return true;
                }
            }
        }
        if (i != 4) {
            if (i != 67) {
                return false;
            }
            return super.onKeyDown(i, keyEvent);
        }
        if (TextUtils.equals("page_discover", this.stateManager.hv0())) {
            ScrollSwitchStateManager scrollSwitchStateManager = this.stateManager;
            CommonPageFragment jv0 = scrollSwitchStateManager.jv0(scrollSwitchStateManager.nv0("page_discover"));
            if (jv0 != null && jv0.vl()) {
                return true;
            }
        }
        if (TextUtils.equals("page_profile", this.stateManager.hv0())) {
            ScrollSwitchStateManager scrollSwitchStateManager2 = this.stateManager;
            CommonPageFragment jv02 = scrollSwitchStateManager2.jv0(scrollSwitchStateManager2.nv0("page_profile"));
            if (jv02 != null && jv02.vl()) {
                return true;
            }
        }
        InterfaceC36571c5 mv0 = getTabChangeManager().mv0();
        if (mv0 != null && (mv0 instanceof InterfaceC55377LoL) && ((InterfaceC55377LoL) mv0).Mh()) {
            return true;
        }
        C54030LIk.LIZIZ = LJF.GOBACK_ICON.getValue();
        if (toFeedPage(null, true)) {
            return true;
        }
        if (getTabChangeManager().mv0() != null && (getTabChangeManager().mv0() instanceof InterfaceC59608NaO)) {
            refreshWhenBack();
            return super.onKeyDown(i, keyEvent);
        }
        refreshWhenBack();
        return super.onKeyDown(i, keyEvent);
    }

    @Override // android.app.Activity, android.view.KeyEvent.Callback
    public boolean onKeyUp(int i, KeyEvent keyEvent) {
        if (C52294Kfi.LIZ) {
            if (i != 25 && i != 24) {
                return super.onKeyUp(i, keyEvent);
            }
            return this.onVolumeKeyDownHandled;
        }
        return super.onKeyUp(i, keyEvent);
    }

    @Override // X.ActivityC86117Xqz, X.KMV, X.ActivityC45651qj, androidx.activity.ComponentActivity, android.app.Activity
    public void onActivityResult(int i, int i2, Intent intent) {
        InterfaceC27436Apk interfaceC27436Apk = this.mActivityResultListener;
        if (interfaceC27436Apk != null) {
            interfaceC27436Apk.onActivityResult(i, i2, intent);
        }
        if (i == 1 && i2 == 2) {
            C78688UuS.LJJIJIIJI(this).de();
        } else if (getCurFragment() != null && (getCurFragment() instanceof LQZ)) {
            getCurFragment().onActivityResult(i, i2, intent);
        }
        List LJIIL = C77357UXp.LJIIL(this);
        boolean z = false;
        if (LJIIL != null) {
            Iterator it = LJIIL.iterator();
            while (it.hasNext()) {
                if (((InterfaceC55372LoG) it.next()).onActivityResult(i, i2, intent)) {
                    z = true;
                }
            }
            if (!(true ^ z)) {
                return;
            }
        }
        super.onActivityResult(i, i2, intent);
    }

    @Override // X.ActivityC45651qj, androidx.activity.ComponentActivity, android.app.Activity, X.C06Q
    public void onRequestPermissionsResult(int i, String[] strArr, int[] iArr) {
        C86298Xtu.LIZIZ(this, i, iArr);
        super.onRequestPermissionsResult(i, strArr, iArr);
    }
}
