package com.bytedance.android.livesdk;

import X.AbstractC32320CmK;
import X.AbstractC32474Coo;
import X.ActivityC45651qj;
import X.B83;
import X.BJI;
import X.BRK;
import X.BZI;
import X.C025908h;
import X.C03880Dg;
import X.C05200Ii;
import X.C06070Lr;
import X.C06510Nj;
import X.C0NB;
import X.C15380j0;
import X.C15940ju;
import X.C16880lQ;
import X.C1EW;
import X.C20890rt;
import X.C20910rv;
import X.C23010vJ;
import X.C259710f;
import X.C259810g;
import X.C28787BRn;
import X.C28835BTj;
import X.C29022BaE;
import X.C29044Baa;
import X.C29067Bax;
import X.C29069Baz;
import X.C29374Bfu;
import X.C29428Bgm;
import X.C29823Bn9;
import X.C29850Bna;
import X.C2U;
import X.C30725C4b;
import X.C30868C9o;
import X.C30927CBv;
import X.C31120CJg;
import X.C31160CKu;
import X.C31257COn;
import X.C31585CaT;
import X.C31586CaU;
import X.C31588CaW;
import X.C31593Cab;
import X.C31594Cac;
import X.C31595Cad;
import X.C31989Cgz;
import X.C32099Cil;
import X.C32121Cj7;
import X.C32129CjF;
import X.C32142CjS;
import X.C32147CjX;
import X.C32217Ckf;
import X.C32218Ckg;
import X.C32220Cki;
import X.C32221Ckj;
import X.C32278Cle;
import X.C32279Clf;
import X.C32280Clg;
import X.C32281Clh;
import X.C32282Cli;
import X.C32283Clj;
import X.C32284Clk;
import X.C32286Clm;
import X.C32287Cln;
import X.C32289Clp;
import X.C32293Clt;
import X.C32296Clw;
import X.C32297Clx;
import X.C32298Cly;
import X.C32299Clz;
import X.C32313CmD;
import X.C32324CmO;
import X.C32341Cmf;
import X.C32344Cmi;
import X.C32366Cn4;
import X.C32368Cn6;
import X.C32394CnW;
import X.C32395CnX;
import X.C32399Cnb;
import X.C32405Cnh;
import X.C32407Cnj;
import X.C32433Co9;
import X.C32455CoV;
import X.C32456CoW;
import X.C32459CoZ;
import X.C32462Coc;
import X.C32537Cpp;
import X.C32603Cqt;
import X.C32694CsM;
import X.C32696CsO;
import X.C32710Csc;
import X.C32785Ctp;
import X.C32796Cu0;
import X.C32805Cu9;
import X.C32822CuQ;
import X.C33658DIw;
import X.C42061kw;
import X.C46104I7o;
import X.C47071t1;
import X.C64514PTq;
import X.C65300Pk0;
import X.C65814PsI;
import X.C68322mC;
import X.C73026SlK;
import X.C73318Sq2;
import X.C73411SrX;
import X.C73931Szv;
import X.C73933Szx;
import X.C73943T0h;
import X.C73969T1h;
import X.C76800UCe;
import X.C76907UGh;
import X.C77309UVt;
import X.C77311UVv;
import X.C77446UaQ;
import X.C780334l;
import X.C78072UkW;
import X.C78126UlO;
import X.C78541Us5;
import X.C78613UtF;
import X.C78983UzD;
import X.C86861Y7d;
import X.C88133YiP;
import X.CCK;
import X.CML;
import X.CN1;
import X.CYO;
import X.CountDownTimerC31584CaS;
import X.EnumC20860rq;
import X.EnumC20870rr;
import X.EnumC29607Bjf;
import X.EnumC30204BtI;
import X.EnumC31118CJe;
import X.EnumC31997Ch7;
import X.EnumC32342Cmg;
import X.EnumC32353Cmr;
import X.EnumC32737Ct3;
import X.EnumC76908UGi;
import X.EnumC76934UHi;
import X.FT5;
import X.InterfaceC15850jl;
import X.InterfaceC28903BVz;
import X.InterfaceC29856Bng;
import X.InterfaceC30442Bx8;
import X.InterfaceC32013ChN;
import X.InterfaceC32073CiL;
import X.InterfaceC32103Cip;
import X.InterfaceC32308Cm8;
import X.InterfaceC32416Cns;
import X.InterfaceC32497CpB;
import X.InterfaceC65784Pro;
import X.InterfaceC92693kP;
import X.ORS;
import X.ORZ;
import X.OSZ;
import X.P8O;
import X.PU0;
import X.Q7L;
import X.RunnableC32311CmB;
import X.T4Y;
import X.TTL;
import X.U5H;
import X.UC8;
import X.UFE;
import X.UVW;
import X.UW7;
import X.V16;
import X.VNU;
import X.WM7;
import X.X1D;
import X.XKX;
import X.Z8D;
import Y.ARunnableS7S0000100_5;
import Y.AfS44S0300000_5;
import Y.IDCSpanS31S0100000_5;
import Y.IDcS170S0100000_5;
import android.app.Activity;
import android.content.Context;
import android.graphics.drawable.Drawable;
import android.net.Uri;
import android.os.Handler;
import android.os.SystemClock;
import android.text.SpannableStringBuilder;
import android.text.style.ForegroundColorSpan;
import android.text.style.ImageSpan;
import android.util.Pair;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import androidx.lifecycle.Lifecycle;
import androidx.lifecycle.LifecycleOwner;
import androidx.recyclerview.widget.RecyclerView;
import com.bytedance.android.live.actionhandler.IActionHandlerService;
import com.bytedance.android.live.base.model.user.User;
import com.bytedance.android.live.broadcast.BroadcastSettingResponse;
import com.bytedance.android.live.broadcast.api.BroadcastSettingResponseChannel;
import com.bytedance.android.live.design.app.LiveDialog;
import com.bytedance.android.live.gift.IGiftService;
import com.bytedance.android.live.publicscreen.api.IPublicScreenService;
import com.bytedance.android.live.wallet.IWalletService;
import com.bytedance.android.live.wallet.WalletCenter;
import com.bytedance.android.livesdk.comp.api.network.INetworkService;
import com.bytedance.android.livesdk.dataChannel.RoomChannel;
import com.bytedance.android.livesdk.envelope.widget.RedEnvelopeWidget;
import com.bytedance.android.livesdk.firstrecharge.FirstChargeData;
import com.bytedance.android.livesdk.gift.assets.AssetsModel;
import com.bytedance.android.livesdk.gift.base.platform.business.panel.portrait.leaf.cpc.CPCUtilsKt$destroyHandling$1;
import com.bytedance.android.livesdk.gift.base.platform.business.tray.ExtendScreenGiftTrayWidget;
import com.bytedance.android.livesdk.gift.base.platform.business.tray.LiveGiftTrayWidgetV2;
import com.bytedance.android.livesdk.gift.base.platform.business.utils.liveaudio.LynxAudioLiveView;
import com.bytedance.android.livesdk.gift.base.platform.core.manager.GiftManager;
import com.bytedance.android.livesdk.gift.base.platform.core.manager.GiftRetrofitApi;
import com.bytedance.android.livesdk.gift.model.CpcPromptResponse;
import com.bytedance.android.livesdk.gift.model.GiftPage;
import com.bytedance.android.livesdk.gift.model.SendGiftResult;
import com.bytedance.android.livesdk.livegoal.LiveGoalPinCardWidget;
import com.bytedance.android.livesdk.livesetting.gift.LiveEnableEffectSdkVersionSetting;
import com.bytedance.android.livesdk.livesetting.gift.LiveFastGiftIconHideSetting;
import com.bytedance.android.livesdk.livesetting.gift.LiveFirstRechargeWebUrlLynxFaq;
import com.bytedance.android.livesdk.livesetting.gift.LiveGiftEducationGuideSetting;
import com.bytedance.android.livesdk.livesetting.gift.LiveGiftEffectPreloadSetting;
import com.bytedance.android.livesdk.livesetting.gift.LiveGiftEffectsDownloadRetryCountSetting;
import com.bytedance.android.livesdk.livesetting.gift.LiveGiftLimitGiftListRequest;
import com.bytedance.android.livesdk.livesetting.gift.LiveGiftPanelPreLoadViewSetting;
import com.bytedance.android.livesdk.livesetting.gift.LiveGiftPanelPreLoadViewV2Setting;
import com.bytedance.android.livesdk.livesetting.gift.LiveGiftPostRechargeRetentionSetting;
import com.bytedance.android.livesdk.livesetting.gift.LiveGiftResourceCacheSetting;
import com.bytedance.android.livesdk.livesetting.gift.LiveGiftResourceManagerSettings;
import com.bytedance.android.livesdk.livesetting.gift.LiveGiftSenderRefactorV1Setting;
import com.bytedance.android.livesdk.livesetting.gift.LiveTreasureBoxContainerOptimizeSetting;
import com.bytedance.android.livesdk.livesetting.performance.BuriedFieldReductionSetting;
import com.bytedance.android.livesdk.livesetting.performance.LiveDeleteUselessPreloadSetting;
import com.bytedance.android.livesdk.livesetting.performance.LiveGiftListOptSetting;
import com.bytedance.android.livesdk.livesetting.performance.LiveServiceManagerOptSetting;
import com.bytedance.android.livesdk.livesetting.portal.PortalFeatureSetting;
import com.bytedance.android.livesdk.livesetting.redenvelope.AgeRestrictedConfig;
import com.bytedance.android.livesdk.livesetting.redenvelope.RedEnvelopeLibraConfig;
import com.bytedance.android.livesdk.livesetting.roomfunction.ToolBarButtonWithTextExperiment;
import com.bytedance.android.livesdk.model.Gift;
import com.bytedance.android.livesdk.model.RoomAuthStatus;
import com.bytedance.android.livesdk.model.message.GiftMessage;
import com.bytedance.android.livesdk.wallet.Diamond;
import com.bytedance.android.livesdk.widgets.giftwidget.GiftWidget;
import com.bytedance.android.livesdkapi.depend.model.live.GiftSuspension;
import com.bytedance.android.livesdkapi.depend.model.live.Room;
import com.bytedance.android.livesdkapi.host.IHostAppContext;
import com.bytedance.android.livesdkapi.message.CommonMessageData;
import com.bytedance.ies.sdk.datachannel.DataChannel;
import com.bytedance.ies.sdk.datachannel.DataChannelGlobal;
import com.bytedance.ies.sdk.widgets.LiveRecyclableWidget;
import com.bytedance.ies.sdk.widgets.LiveWidget;
import com.bytedance.keva.Keva;
import com.bytedance.mt.protector.impl.UriProtector;
import com.lynx.tasm.behavior.ui.LynxUI;
import com.ss.android.ugc.aweme.feed.model.CardStruct;
import com.ss.android.ugc.effectmanager.common.utils.FileUtils;
import com.zhiliaoapp.musically.R;
import java.io.File;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;
import java.util.Locale;
import java.util.Map;
import java.util.Set;
import java.util.concurrent.ConcurrentHashMap;
import kotlin.jvm.internal.AqS152S0200000_5;
import kotlin.jvm.internal.o;
import ujb.s;

/* loaded from: classes6.dex */
public class GiftServiceKt implements IGiftService {
    public volatile boolean LJLIL;

    @Override // com.bytedance.android.live.gift.IGiftService
    public final Class<? extends LiveRecyclableWidget> getExtendScreenGiftTrayWidget() {
        return ExtendScreenGiftTrayWidget.class;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final Class<? extends LiveRecyclableWidget> getGiftWidget() {
        return GiftWidget.class;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final Class<? extends LiveRecyclableWidget> getLiveGiftTrayWidgetV2Class() {
        return LiveGiftTrayWidgetV2.class;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final Class<? extends LiveRecyclableWidget> getRedEnvelopeWidgetClass() {
        return RedEnvelopeWidget.class;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final InterfaceC15850jl createGiftFeedEffectPlayViewManager() {
        return new C86861Y7d();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final boolean enablePlatformPortal() {
        Map map;
        Set keySet;
        if (AgeRestrictedConfig.INSTANCE.isLimit() || (map = (Map) DataChannelGlobal.LJLJJI.mv0(C29022BaE.class)) == null || (keySet = map.keySet()) == null) {
            return false;
        }
        for (Object obj : keySet) {
            long longValue = ((Number) obj).longValue();
            if (longValue == 9 && o.LJ(map.get(Long.valueOf(longValue)), Boolean.TRUE)) {
                if (obj == null) {
                    return false;
                }
                return true;
            }
        }
        return false;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final boolean enablePortal() {
        boolean getStickValue = PortalFeatureSetting.INSTANCE.getGetStickValue();
        Room room = (Room) DataChannelGlobal.LJLJJI.mv0(C29044Baa.class);
        if ((room != null && room.getOwnerUserId() == C025908h.LIZ()) || getStickValue) {
            return true;
        }
        return false;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final boolean enableRedEnvelope() {
        RoomAuthStatus roomAuthStatus;
        Set keySet;
        if (!RedEnvelopeLibraConfig.INSTANCE.enableEnvelopeFunc() || AgeRestrictedConfig.INSTANCE.isLimit()) {
            return false;
        }
        if (LiveTreasureBoxContainerOptimizeSetting.INSTANCE.getValue()) {
            Map map = (Map) DataChannelGlobal.LJLJJI.mv0(C29022BaE.class);
            if (map == null || (keySet = map.keySet()) == null) {
                return false;
            }
            for (Object obj : keySet) {
                long longValue = ((Number) obj).longValue();
                if (longValue == 1 || longValue == 2) {
                    if (o.LJ(map.get(Long.valueOf(longValue)), Boolean.TRUE)) {
                        if (obj == null) {
                            return false;
                        }
                        return true;
                    }
                }
            }
            return false;
        }
        Room room = (Room) DataChannelGlobal.LJLJJI.mv0(C29044Baa.class);
        if (room == null || (roomAuthStatus = room.mRoomAuthStatus) == null) {
            return false;
        }
        return roomAuthStatus.showRedEnvelope();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final CYO getBoostChartInfo() {
        CYO cyo = new CYO();
        cyo.LIZJ = C32099Cil.LIZJ;
        cyo.LIZLLL = C32099Cil.LIZLLL;
        cyo.LIZIZ = C32099Cil.LJII;
        cyo.LIZ = C32099Cil.LIZIZ;
        cyo.LJ = C32099Cil.LIZ;
        return cyo;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final String getLowAgeReportUrl() {
        if (((IHostAppContext) CN1.LIZ(IHostAppContext.class)).isInMusicallyRegion()) {
            return "sslocal://webcast_webview?url=https%3A%2F%2Finapp-va.tiktokv.com%2Ffalcon%2Fwebcast_mt%2Fpage%2Fappeal%2Findex.html&type=fullscreen&title=&hide_more=0&hide_nav_bar=1&hide_status_bar=0";
        }
        return "sslocal://webcast_webview?url=https%3A%2F%2Finapp.tiktokv.com%2Ffalcon%2Fwebcast_mt%2Fpage%2Fappeal%2Findex.html&type=fullscreen&title=&hide_more=0&hide_nav_bar=1&hide_status_bar=0";
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final LiveWidget getPinCardWidget() {
        return new LiveGoalPinCardWidget();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final LiveRecyclableWidget getRedEnvelopeWidget() {
        return new RedEnvelopeWidget();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final Pair<Integer, Integer> getShowedAndUnShowedGuestGiftCount() {
        int i;
        Integer valueOf = Integer.valueOf(UC8.LJLZ);
        C78072UkW c78072UkW = UC8.LJZI;
        int i2 = 0;
        if (c78072UkW != null) {
            i = c78072UkW.LJJJZ;
        } else {
            i = 0;
        }
        LinkedList<C78072UkW> linkedList = UC8.LJZ;
        if (linkedList != null) {
            Iterator<C78072UkW> it = linkedList.iterator();
            o.LJIIIIZZ(it, "it.iterator()");
            while (it.hasNext()) {
                C78072UkW next = it.next();
                o.LJIIIIZZ(next, "iterator.next()");
                i += next.LJJJZ;
            }
            i2 = i;
        }
        return new Pair<>(valueOf, Integer.valueOf(i2));
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final boolean hasFirstRechargeGift() {
        return AbstractC32320CmK.LIZ.LJIIIZ();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void initPublicScreenConfiguration() {
        if (this.LJLIL) {
            return;
        }
        this.LJLIL = true;
        IPublicScreenService iPublicScreenService = (IPublicScreenService) CN1.LIZ(IPublicScreenService.class);
        iPublicScreenService.Yj0(new C31257COn());
        iPublicScreenService.Dv(5, new C30927CBv());
        iPublicScreenService.Dv(0, new C29850Bna());
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final boolean isFirstRecharge() {
        return AbstractC32320CmK.LIZ.LJIIL();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void logBoostCardLiveEndShow() {
        String str = C32099Cil.LJ;
        String str2 = C32099Cil.LJI;
        String str3 = C32099Cil.LJFF;
        BZI LIZ = C28787BRn.LIZ("end_live_show");
        LIZ.LJIIZILJ();
        LIZ.LJIJJ(str, "task_id");
        LIZ.LJIJJ(str2, "card_id");
        LIZ.LJIJJ(Long.valueOf(((C29374Bfu) B83.LIZ().LIZIZ()).getCurrentUserId()), "user_id");
        LIZ.LJIJJ(str3, "task_source");
        LIZ.LJJIIJZLJL();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void notifyUserLeaveRoom() {
        if (!C32296Clw.LIZ) {
            return;
        }
        BZI LIZ = C28787BRn.LIZ("gift_panel_prediction");
        LIZ.LJIIZILJ();
        LIZ.LJIJJ(Integer.valueOf(C32296Clw.LIZLLL), "gift_panel_prediction_TP");
        LIZ.LJIJJ(Integer.valueOf(C32296Clw.LJ), "gift_panel_prediction_FP");
        LIZ.LJIJJ(Integer.valueOf(C32296Clw.LJFF), "gift_panel_prediction_FN");
        UFE.LIZIZ(C32296Clw.LJI, LIZ, "gift_panel_prediction_TN");
        C32296Clw.LIZ = false;
        C32296Clw.LIZIZ = false;
        C32296Clw.LIZJ = false;
        C32296Clw.LJ = 0;
        C32296Clw.LJFF = 0;
        C32296Clw.LJI = 0;
        C32296Clw.LIZLLL = 0;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void onLiveBroadcastActivityDestroyed() {
        ((RecyclerView.RecycledViewPool) C33658DIw.LIZ.getValue()).clear();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void onPlayFragmentCreate() {
        OSZ osz;
        C20910rv c20910rv = C20910rv.LIZ;
        EnumC20860rq enumC20860rq = EnumC20860rq.REVENUE;
        C20910rv.LJIILIIL(c20910rv, R.layout.do4, new C20890rt("ttlive_widget_fast_gift_comb", enumC20860rq), null, false, 24);
        C20890rt c20890rt = new C20890rt("ttlive_tips_gift_bubble", enumC20860rq);
        EnumC20870rr enumC20870rr = EnumC20870rr.FIRST_FRAME;
        C20910rv.LJIILIIL(c20910rv, R.layout.dj9, c20890rt, enumC20870rr, false, 16);
        C20910rv.LJIILIIL(c20910rv, R.layout.dlp, new C20890rt("ttlive_view_special_gift", enumC20860rq), null, false, 24);
        ((RecyclerView.RecycledViewPool) C33658DIw.LIZ.getValue()).clear();
        if (LiveGiftPanelPreLoadViewSetting.INSTANCE.getValue()) {
            C20910rv.LJIILL(R.layout.d8o, 1, "ttlive_item_panel_first_recharge_opt", enumC20860rq, enumC20870rr, false, 64);
            if (C31160CKu.LIZ() && C15380j0.LIZ == 1) {
                osz = new OSZ(Integer.valueOf(R.layout.d8q), "ttlive_item_panel_gift_flat");
            } else {
                osz = new OSZ(Integer.valueOf(R.layout.d8s), "ttlive_item_panel_gift_opt");
            }
            C20910rv.LJIILL(((Number) osz.getFirst()).intValue(), 12, (String) osz.getSecond(), enumC20860rq, enumC20870rr, false, 64);
            C20910rv.LJIILL(R.layout.d8x, 1, "ttlive_item_panel_red_envelope", enumC20860rq, enumC20870rr, false, 64);
        }
        if (LiveGiftPanelPreLoadViewV2Setting.INSTANCE.getValue()) {
            C20910rv.LJIILIIL(c20910rv, R.layout.ddp, new C20890rt("ttlive_leaf_gift_panel_v2", enumC20860rq), enumC20870rr, false, 16);
            if (LiveDeleteUselessPreloadSetting.preloadAble()) {
                C20910rv.LJIILIIL(c20910rv, R.layout.dop, new C20890rt("ttlive_widget_gift_tab_panel_top_bar", enumC20860rq), null, false, 24);
            }
            C20910rv.LJIILIIL(c20910rv, R.layout.dok, new C20890rt("ttlive_widget_gift_bottom_bar", enumC20860rq), enumC20870rr, false, 16);
            c20910rv = c20910rv;
            C20910rv.LJIILIIL(c20910rv, R.layout.dol, new C20890rt("ttlive_widget_gift_description", enumC20860rq), enumC20870rr, false, 16);
        }
        if (ToolBarButtonWithTextExperiment.hasText()) {
            C20910rv.LJIILIIL(c20910rv, R.layout.d5r, new C20890rt("ttlive_gift_icon_view_with_text", enumC20860rq), null, false, 24);
            C20910rv.LJIILIIL(c20910rv, R.layout.do5, new C20890rt("ttlive_widget_fast_gift_with_text", enumC20860rq), null, false, 24);
        } else {
            C20910rv.LJIILIIL(c20910rv, R.layout.d5q, new C20890rt("ttlive_gift_icon_view", enumC20860rq), null, false, 24);
        }
        C32710Csc.LIZ = SystemClock.elapsedRealtime();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void preloadBroadcastApi() {
        ((GiftRetrofitApi) Q7L.LIZIZ(GiftRetrofitApi.class)).syncGiftList("", 0, "", "", System.currentTimeMillis());
        C65814PsI.LIZ().getClass();
        ((GiftRetrofitApi) C65814PsI.LIZJ(GiftRetrofitApi.class)).getWishList(0L, 0L);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void preloadLayout() {
        C20910rv.LJIILIIL(C20910rv.LIZ, R.layout.doj, new C20890rt("ttlive_widget_gift", EnumC20860rq.REVENUE), null, false, 24);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void preloadRoomEffects() {
        LiveGiftEffectPreloadSetting liveGiftEffectPreloadSetting = LiveGiftEffectPreloadSetting.INSTANCE;
        if (liveGiftEffectPreloadSetting.shouldPreloadOnEnter()) {
            Handler handler = new Handler(C16880lQ.LLJJJJ());
            handler.postDelayed(RunnableC32311CmB.LJLIL, liveGiftEffectPreloadSetting.getPreloadDelay() * 1000);
            C32368Cn6.LIZIZ = handler;
        }
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void removeEffectPreloadCallback() {
        Handler handler = C32368Cn6.LIZIZ;
        if (handler != null) {
            handler.removeCallbacksAndMessages(null);
        }
        C32368Cn6.LIZIZ = null;
        C73411SrX c73411SrX = C32368Cn6.LIZ;
        if (c73411SrX != null) {
            c73411SrX.dispose();
        }
        C32368Cn6.LIZ = null;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void clearAssetModels() {
        C32221Ckj.LIZIZ().getClass();
        C32366Cn4.LIZLLL.clear();
        ((ArrayList) C31585CaT.LIZ).clear();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void clearGiftMap() {
        GiftManager.inst().clearGiftMap();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final long getFirstSubscribeGiftId() {
        return GiftManager.inst().getFirstShowSubscribeGiftId();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final List<GiftPage> getGiftPages() {
        List<GiftPage> giftPageList = GiftManager.inst().getGiftPageList();
        o.LJIIIIZZ(giftPageList, "inst().giftPageList");
        return giftPageList;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final CCK getPollGifts() {
        return GiftManager.inst().getPollGifts();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final String getRoomStatus() {
        return C31120CJg.LJ().getDesc();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final List<Gift> getStickerGifts() {
        List<Gift> stickerGifts = GiftManager.inst().getStickerGifts();
        o.LJIIIIZZ(stickerGifts, "inst().stickerGifts");
        return stickerGifts;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void initGiftResource() {
        initGiftResourceManager(C15380j0.LIZLLL());
        syncGiftList(1);
    }

    @Override // com.bytedance.android.live.gift.IGiftService, X.InterfaceC06390Mx
    public final void onInit() {
        if (LiveServiceManagerOptSetting.enable()) {
            return;
        }
        this.LJLIL = true;
        if (LiveEnableEffectSdkVersionSetting.INSTANCE.getValue()) {
            ((INetworkService) CN1.LIZ(INetworkService.class)).Qi(new P8O());
        }
        C259810g c259810g = C259710f.LIZ;
        C42061kw c42061kw = new C42061kw();
        c259810g.getClass();
        C259810g.LJIIIIZZ(R.drawable.d3e, c42061kw);
        ((IPublicScreenService) CN1.LIZ(IPublicScreenService.class)).Yj0(new C31257COn());
        ((IPublicScreenService) CN1.LIZ(IPublicScreenService.class)).Dv(5, new C30927CBv());
        ((IPublicScreenService) CN1.LIZ(IPublicScreenService.class)).Dv(0, new C29850Bna());
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void onLiveActivityDestroyed() {
        if (C32282Cli.LIZJ()) {
            C32282Cli.LJ = null;
            C32282Cli.LIZLLL = null;
            C32282Cli.LIZ = null;
            C32282Cli.LIZIZ = null;
            C32282Cli.LIZJ = null;
            C73318Sq2 c73318Sq2 = C32282Cli.LJFF;
            if (c73318Sq2 != null) {
                c73318Sq2.dispose();
            }
            C73318Sq2 c73318Sq22 = C32282Cli.LJFF;
            if (c73318Sq22 != null) {
                c73318Sq22.LIZLLL();
            }
            C32282Cli.LJFF = null;
            C32282Cli.LJI = false;
            C32282Cli.LJII = false;
            C0NB.LJIIIZ("LiveFastFirstRechargeHolder", "rest fast welcome status");
        }
        ((RecyclerView.RecycledViewPool) C33658DIw.LIZ.getValue()).clear();
    }

    /* JADX WARN: Type inference failed for: r1v0, types: [java.lang.Boolean, O] */
    @Override // com.bytedance.android.live.gift.IGiftService
    public final void resetPinCardStatus() {
        C29069Baz.LIZ();
        ((C32537Cpp) DataChannelGlobal.LJLJJI.gv0(C29067Bax.class)).LIZ = Boolean.FALSE;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void resetRoomStatus() {
        if (C32282Cli.LIZJ()) {
            StringBuilder LIZ = X1D.LIZ();
            LIZ.append(" start observe wallet status ");
            FT5.LJ(LIZ, C32282Cli.LJI, LIZ, "LiveFastFirstRechargeHolder");
            if (!C32282Cli.LJI) {
                C32282Cli.LJI = true;
                C73318Sq2 c73318Sq2 = new C73318Sq2();
                C32282Cli.LJFF = c73318Sq2;
                c73318Sq2.LIZ(((WalletCenter) ((IWalletService) CN1.LIZ(IWalletService.class)).walletCenter()).LJI().LJJJJZI(C32283Clj.LJLIL));
                C73318Sq2 c73318Sq22 = C32282Cli.LJFF;
                if (c73318Sq22 != null) {
                    c73318Sq22.LIZ(((WalletCenter) ((IWalletService) CN1.LIZ(IWalletService.class)).walletCenter()).LJLJL.LJJJ(C73969T1h.LIZIZ()).LJJJJZI(C32281Clh.LJLIL));
                }
            }
        }
        ((WalletCenter) ((IWalletService) CN1.LIZ(IWalletService.class)).walletCenter()).LJIILIIL(EnumC32353Cmr.LIVE_ROOM_PRELOAD, null);
        ((WalletCenter) ((IWalletService) CN1.LIZ(IWalletService.class)).walletCenter()).LJIIL();
        C32433Co9.LJ();
        C32455CoV.LIZ = SystemClock.uptimeMillis();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final boolean shouldShowCPCMessageFromService() {
        return C46104I7o.LJJJJI();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void destroyGiftBannedManager() {
        C31593Cab.LIZJ();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final C2U getFirstRechargeManager() {
        return AbstractC32320CmK.LIZ;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final boolean isGuestMatchAnchorGiftTrayEnable() {
        return UC8.LJZL;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void cancelSyncGiftList(long j) {
        UW7 uw7 = GiftManager.inst().giftRepository;
        uw7.getClass();
        if (!LiveGiftListOptSetting.INSTANCE.getValue() && LiveGiftLimitGiftListRequest.INSTANCE.optimiseCancelBasedOnRoom()) {
            ArrayList<InterfaceC92693kP> arrayList = uw7.LIZ.get(Long.valueOf(j));
            if (arrayList != null) {
                Iterator<InterfaceC92693kP> it = arrayList.iterator();
                while (it.hasNext()) {
                    InterfaceC92693kP next = it.next();
                    if (next != null) {
                        next.dispose();
                    }
                }
            }
            uw7.LIZ.remove(Long.valueOf(j));
        }
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void clearAssets(String str) {
        C32221Ckj.LIZIZ().getClass();
        ((HashMap) PU0.LJI().LIZ).clear();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void clearFastGift(long j) {
        GiftManager.inst().clearFastGift(j);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final Gift findClosetGift(int i) {
        return GiftManager.inst().findClosetGift(i);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final Gift findGiftById(long j) {
        return GiftManager.inst().findGiftById(j);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final String getAmountString(long j) {
        boolean z;
        if (10000 <= j && j < 1000000) {
            z = true;
        } else {
            z = false;
        }
        if (z) {
            StringBuilder LIZ = X1D.LIZ();
            String LLLZI = C16880lQ.LLLZI(Locale.getDefault(), "%.1f", Arrays.copyOf(new Object[]{Double.valueOf(j / 1000)}, 1));
            o.LJIIIIZZ(LLLZI, "format(locale, format, *args)");
            LIZ.append(LLLZI);
            LIZ.append('K');
            return X1D.LIZIZ(LIZ);
        }
        if (j >= 1000000) {
            StringBuilder LIZ2 = X1D.LIZ();
            String LLLZI2 = C16880lQ.LLLZI(Locale.getDefault(), "%.1f", Arrays.copyOf(new Object[]{Double.valueOf(j / 1000000)}, 1));
            o.LJIIIIZZ(LLLZI2, "format(locale, format, *args)");
            LIZ2.append(LLLZI2);
            LIZ2.append('M');
            return X1D.LIZIZ(LIZ2);
        }
        if (j >= 1000) {
            StringBuffer stringBuffer = new StringBuffer(String.valueOf(j));
            stringBuffer.insert(1, ',');
            String stringBuffer2 = stringBuffer.toString();
            o.LJIIIIZZ(stringBuffer2, "{\n            StringBuff…',').toString()\n        }");
            return stringBuffer2;
        }
        return String.valueOf(j);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final GiftSuspension getGiftSuspensionData(DataChannel dataChannel) {
        if (dataChannel != null) {
            return (GiftSuspension) dataChannel.kv0(C31586CaU.class);
        }
        return null;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final LynxUI<?> getLynxAudioLiveView(VNU context) {
        o.LJIIIZ(context, "context");
        return new LynxAudioLiveView(context);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final C78126UlO getSendGiftResultLog(SendGiftResult sendGiftResult) {
        if (sendGiftResult == null) {
            C78983UzD.LJIILL("SendGiftResult cannot be null");
            return C78126UlO.LJIIIIZZ;
        }
        if (GiftManager.inst().findGiftById(sendGiftResult.mGiftId) == null) {
            new Gift();
        }
        o.LJIIIIZZ(null, "result.prop");
        throw null;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final int getTargetGiftDiamondCount(long j) {
        return GiftManager.inst().getTargetGiftDiamondCount(j);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final long giftVideoResourcesClear(boolean z) {
        long j;
        C32221Ckj.LIZIZ().getClass();
        String LIZ = PU0.LJI().LIZIZ.LIZ.LIZ();
        o.LJIIIIZZ(LIZ, "inst().fileCacheFactory.fileCacheRootPath");
        File file = new File(LIZ);
        if (file.exists() && file.isDirectory()) {
            j = FileUtils.INSTANCE.getFolderSize(file);
        } else {
            j = 0;
        }
        if (z) {
            if (LiveGiftResourceManagerSettings.INSTANCE.enableDeleteAll()) {
                C32399Cnb c32399Cnb = new C32399Cnb(C32366Cn4.LJI);
                EnumC32342Cmg enumC32342Cmg = EnumC32342Cmg.DELETE_ALL;
                o.LJIIIZ(enumC32342Cmg, "<set-?>");
                c32399Cnb.LIZJ = enumC32342Cmg;
                C32407Cnj LIZ2 = C32395CnX.LIZ();
                long elapsedRealtime = SystemClock.elapsedRealtime();
                if (LIZ2 != null) {
                    LIZ2.LIZ(new C32298Cly(elapsedRealtime), c32399Cnb);
                }
                ((ConcurrentHashMap) PU0.LJI().LJ).clear();
            }
        } else {
            C32399Cnb c32399Cnb2 = new C32399Cnb(C32366Cn4.LJI);
            EnumC32342Cmg enumC32342Cmg2 = EnumC32342Cmg.ONLY_CHECK;
            o.LJIIIZ(enumC32342Cmg2, "<set-?>");
            c32399Cnb2.LIZJ = enumC32342Cmg2;
            C32407Cnj LIZ3 = C32395CnX.LIZ();
            if (LIZ3 != null) {
                LIZ3.LIZ(new C32297Clx(), c32399Cnb2);
            }
        }
        Long valueOf = Long.valueOf(j);
        o.LJIIIIZZ(valueOf, "GiftRendererManager.getA…lResource(deleteResource)");
        return valueOf.longValue();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void initGiftResourceManager(Context context) {
        if (context != null) {
            C32284Clk c32284Clk = new C32284Clk(context);
            c32284Clk.LIZIZ = new C64514PTq();
            c32284Clk.LIZ = new C32286Clm(context);
            c32284Clk.LJ = 5;
            c32284Clk.LIZLLL = 3;
            c32284Clk.LIZJ = LiveGiftEffectsDownloadRetryCountSetting.INSTANCE.getValue() + 1;
            LiveGiftResourceCacheSetting liveGiftResourceCacheSetting = LiveGiftResourceCacheSetting.INSTANCE;
            if (liveGiftResourceCacheSetting.getValue() != 0) {
                c32284Clk.LJFF = liveGiftResourceCacheSetting.getValue();
            }
            C32287Cln LIZ = c32284Clk.LIZ();
            if (PU0.LJIIIIZZ != null) {
                return;
            }
            PU0.LJIIIIZZ = new PU0(LIZ);
        }
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final boolean isFansCLubGiftLimited(DataChannel dataChannel) {
        Room room;
        Gift fansClubJoinGift = GiftManager.inst().getFansClubJoinGift();
        if (dataChannel != null && (room = (Room) dataChannel.kv0(RoomChannel.class)) != null && fansClubJoinGift != null) {
            return GiftManager.inst().isGiftLimited(fansClubJoinGift.id, room.getOwnerUserId());
        }
        return true;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final boolean isFirstRechargeGift(long j) {
        if (AbstractC32320CmK.LIZ.LJII() == j) {
            return true;
        }
        return false;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final boolean isGiftSuspended(DataChannel dataChannel) {
        return C31593Cab.LIZIZ(dataChannel);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final boolean isGiftingAvailable(DataChannel dataChannel) {
        return C32142CjS.LIZ(dataChannel);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final boolean isNewsAccount(DataChannel dataChannel) {
        BroadcastSettingResponse broadcastSettingResponse;
        if (dataChannel == null || (broadcastSettingResponse = (BroadcastSettingResponse) dataChannel.kv0(BroadcastSettingResponseChannel.class)) == null || broadcastSettingResponse.giftFeature != 9) {
            return false;
        }
        return true;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final boolean isSubscriptionGift(long j) {
        String name = GiftManager.inst().getTabName(GiftManager.inst().getTabByGiftIdWithoutFirstRecharge(j));
        o.LJIIIIZZ(name, "name");
        return s.LJJJLZIJ(name, "Exclusive", false);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void logBoostCardLiveEndClick(int i) {
        String str;
        String str2 = C32099Cil.LJ;
        String str3 = C32099Cil.LJI;
        String str4 = C32099Cil.LJFF;
        Integer valueOf = Integer.valueOf(i);
        BZI LIZ = C28787BRn.LIZ("end_live_click");
        LIZ.LJIIZILJ();
        LIZ.LJIJJ(str2, "task_id");
        LIZ.LJIJJ(str3, "card_id");
        C06510Nj.LIZ((C29374Bfu) TTL.LIZJ(LIZ, str4, "task_source"), LIZ, "user_id");
        if (valueOf != null) {
            if (valueOf.intValue() == 0) {
                str = "think_again";
            } else if (valueOf.intValue() == 1) {
                str = "confirm";
            }
            LIZ.LJIJJ(str, "click_button");
            LIZ.LJJIIJZLJL();
        }
        str = "no_selection";
        LIZ.LJIJJ(str, "click_button");
        LIZ.LJJIIJZLJL();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void monitorBroadcastClicked(long j) {
        Long valueOf = Long.valueOf(j);
        BZI LIZ = C28787BRn.LIZ("announcements_click");
        LIZ.LJIIZILJ();
        LIZ.LJIJJ(valueOf, "gift_id");
        LIZ.LJIJJ("gift", "reason");
        LIZ.LJIJJ(C31120CJg.LJ().getDesc(), WM7.SCENE_SERVICE);
        LIZ.LJJIIJZLJL();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void onLocaleChanged(Locale locale) {
        C259810g c259810g = C259710f.LIZ;
        C42061kw c42061kw = new C42061kw();
        c259810g.getClass();
        C259810g.LJIIIIZZ(R.drawable.d3e, c42061kw);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void onSeiUpdate(Object obj) {
        C32217Ckf.LIZ.getClass();
        if (obj == null || !(obj instanceof String) || ((CharSequence) obj).length() == 0) {
            return;
        }
        XKX.LIZLLL(C780334l.LJLIL, C78613UtF.LIZJ, null, new C32121Cj7(obj, null), 2);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void openGiftDialog(String str) {
        openGiftDialog(str, null);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void openGiftDialogFromJSB(C29428Bgm c29428Bgm) {
        C73943T0h.LIZ().LIZIZ(c29428Bgm);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void openRechargeFAQPage(Context context) {
        Diamond diamond;
        String str;
        Integer num;
        C32313CmD c32313CmD = AbstractC32320CmK.LIZ;
        c32313CmD.getClass();
        if (!(context instanceof Activity)) {
            return;
        }
        FirstChargeData firstChargeData = c32313CmD.LIZLLL;
        Integer num2 = null;
        if (firstChargeData != null) {
            diamond = firstChargeData.diamond;
        } else {
            diamond = null;
        }
        if (C32313CmD.LJIIJJI(diamond)) {
            C30868C9o.LIZJ(R.string.so4);
            return;
        }
        C0NB.LIZIZ(c32313CmD.LIZIZ, "doOpenFAQH5");
        C32456CoW.LIZJ(c32313CmD.LJFF);
        String value = LiveFirstRechargeWebUrlLynxFaq.INSTANCE.getValue();
        try {
            Uri.Builder buildUpon = UriProtector.parse(value).buildUpon();
            buildUpon.appendQueryParameter("gift_enter_from", c32313CmD.LJFF);
            if (diamond == null || (str = diamond.price) == null) {
                str = null;
            }
            buildUpon.appendQueryParameter("price", str);
            if (diamond != null) {
                num = Integer.valueOf(diamond.count);
            } else {
                num = null;
            }
            buildUpon.appendQueryParameter("diamond_count", String.valueOf(num));
            if (diamond != null) {
                num2 = Integer.valueOf(diamond.givingCount);
            }
            buildUpon.appendQueryParameter("giving_count", String.valueOf(num2));
            buildUpon.appendQueryParameter("title_ab", CardStruct.IStatusCode.DEFAULT);
            buildUpon.appendQueryParameter("pay_method", "google_pay");
            String uri = buildUpon.build().toString();
            o.LJIIIIZZ(uri, "builder.build().toString()");
            value = uri;
        } catch (Exception unused) {
        }
        ((IActionHandlerService) CN1.LIZ(IActionHandlerService.class)).handle(context, value);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final InterfaceC28903BVz provideInteractionView(LifecycleOwner lifecycleOwner) {
        o.LJIIIZ(lifecycleOwner, "lifecycleOwner");
        return new BRK(lifecycleOwner);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void removeAnimationEngine(EnumC31997Ch7 giftType) {
        o.LJIIIZ(giftType, "giftType");
        HashMap hashMap = (HashMap) C31989Cgz.LIZ;
        if (hashMap.containsKey(giftType)) {
            InterfaceC32103Cip interfaceC32103Cip = (InterfaceC32103Cip) hashMap.get(giftType);
            if (interfaceC32103Cip != null) {
                interfaceC32103Cip.LIZ();
                interfaceC32103Cip.release();
            }
            hashMap.remove(giftType);
        }
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void setShowGiftEducationGift(boolean z) {
        LiveGiftEducationGuideSetting liveGiftEducationGuideSetting = LiveGiftEducationGuideSetting.INSTANCE;
        if (liveGiftEducationGuideSetting.showGiftBanner()) {
            C32696CsO.LIZIZ = z;
        }
        if (liveGiftEducationGuideSetting.showDiscountGift()) {
            C32696CsO.LIZJ = true;
        }
        C32696CsO.LIZ = false;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void showBroadCaseEndPage(boolean z) {
        if (z) {
            BZI LIZ = C28787BRn.LIZ("travel_gift_collect_status");
            LIZ.LJIIZILJ();
            LIZ.LJIJJ(C29823Bn9.LIZ, "round");
            LIZ.LJIJJ(C32129CjF.LIZ.LIZ, "guide_from");
            StringBuilder LIZ2 = X1D.LIZ();
            LIZ2.append(C29823Bn9.LIZIZ);
            LIZ2.append('/');
            LIZ2.append(C29823Bn9.LIZJ);
            LIZ.LJIJJ(X1D.LIZIZ(LIZ2), "collect_progress");
            LIZ.LJJIIJZLJL();
        }
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void syncGiftList(int i) {
        StringBuilder LIZ = X1D.LIZ();
        LIZ.append("syncGiftList source=");
        LIZ.append(i);
        C0NB.LIZIZ("gift", X1D.LIZIZ(LIZ));
        UW7 uw7 = GiftManager.inst().giftRepository;
        o.LJIIIIZZ(uw7, "inst().giftRepository");
        uw7.LIZ(i, 0L, null, "", false);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final CML createGiftDebugService(Context context, DataChannel dataChannel) {
        o.LJIIIZ(context, "context");
        o.LJIIIZ(dataChannel, "dataChannel");
        return new C32293Clt(context, dataChannel);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void exitRoom(boolean z, Room room) {
        boolean z2;
        long j = 0;
        BJI.LIZ = 0L;
        BJI.LIZIZ = 0L;
        C32313CmD c32313CmD = AbstractC32320CmK.LIZ;
        if (room != null && c32313CmD.LIZJ == room.getId()) {
            z2 = true;
        } else {
            z2 = false;
        }
        if (z2) {
            C0NB.LIZIZ(c32313CmD.LIZIZ, "onDestroy");
            c32313CmD.LJIIIIZZ().onDestroy();
            C0NB.LIZIZ(c32313CmD.LIZIZ, "clean");
            c32313CmD.LIZLLL = null;
            c32313CmD.LJ = null;
            c32313CmD.LJIIIIZZ = false;
            c32313CmD.LJFF = null;
            c32313CmD.LJIIIZ.LIZLLL();
        } else {
            c32313CmD.getClass();
        }
        if (room != null) {
            long id = room.getId();
            if (C32147CjX.LIZ(id) && !C32147CjX.LIZ.contains(Long.valueOf(id))) {
                C32147CjX.LIZIZ(false, room);
                new Handler(C16880lQ.LLJJJJ()).postDelayed(new ARunnableS7S0000100_5(id, 4), 500L);
            }
        }
        C32217Ckf c32217Ckf = C32217Ckf.LIZ;
        if (room != null) {
            j = room.getId();
        }
        c32217Ckf.getClass();
        ArrayList arrayList = new ArrayList();
        List<C32218Ckg> list = C32217Ckf.LIZIZ;
        synchronized (list) {
            ORS.LJJLIL(new C32220Cki(j, arrayList), list);
        }
        Iterator it = arrayList.iterator();
        while (it.hasNext()) {
            C32218Ckg c32218Ckg = (C32218Ckg) it.next();
            C32217Ckf.LIZ.getClass();
            C32217Ckf.LIZ(c32218Ckg, null, 2021, "close live room");
        }
        if (!z) {
            C31593Cab.LIZJ();
        }
        if (LiveGiftSenderRefactorV1Setting.INSTANCE.enable()) {
            UVW uvw = UVW.LJI;
            uvw.getClass();
            if (room != null) {
                C32344Cmi c32344Cmi = new C32344Cmi(room.getId());
                C77311UVv c77311UVv = uvw.LIZJ;
                if (c77311UVv != null) {
                    if (c77311UVv.LJIIIIZZ.get() > 0) {
                        XKX.LIZLLL(c77311UVv.LIZIZ, null, null, new C77309UVt(c77311UVv, c32344Cmi, null), 3);
                        return;
                    }
                    return;
                }
                o.LJIJI("sendGiftBuffer");
                throw null;
            }
        }
    }

    /* JADX WARN: Type inference failed for: r0v10, types: [android.os.CountDownTimer, T] */
    @Override // com.bytedance.android.live.gift.IGiftService
    public final View generateCPCTopView(Context context, InterfaceC65784Pro<C76800UCe> onCompleted) {
        o.LJIIIZ(onCompleted, "onCompleted");
        View view = null;
        if (C46104I7o.LJJJJI() && context != null && (context instanceof ActivityC45651qj)) {
            ActivityC45651qj activityC45651qj = (ActivityC45651qj) context;
            Object LLILLJJLI = C16880lQ.LLILLJJLI(activityC45651qj, "layout_inflater");
            o.LJII(LLILLJJLI, "null cannot be cast to non-null type android.view.LayoutInflater");
            view = C16880lQ.LLLZIIL(R.layout.cvg, (LayoutInflater) LLILLJJLI, null);
            view.setLayoutParams(new ViewGroup.LayoutParams(-1, -2));
            T4Y t4y = (T4Y) view.findViewById(R.id.g7a);
            C68322mC c68322mC = new C68322mC();
            if (C46104I7o.LJJJJ()) {
                ((InterfaceC29856Bng) C1EW.LIZ(((GiftRetrofitApi) Q7L.LIZIZ(GiftRetrofitApi.class)).getCPCInfo()).LJJIJL(C78541Us5.LJLIL).LIZJ(C73933Szx.LIZIZ(C73931Szv.LIZIZ(activityC45651qj, Lifecycle.Event.ON_DESTROY)))).LIZIZ(new AfS44S0300000_5(onCompleted, c68322mC, t4y, 0));
            } else {
                CpcPromptResponse LJJ = C46104I7o.LJJ();
                c68322mC.element = C76907UGh.LIZ(t4y, EnumC76908UGi.SCENE_3_LIVE_GOAL, LJJ.prompt, LJJ.redirectLinkText, LJJ.giftFaq, false, null, onCompleted);
            }
            Lifecycle lifecycle = activityC45651qj.getLifecycle();
            o.LJIIIIZZ(lifecycle, "context.lifecycle");
            lifecycle.addObserver(new CPCUtilsKt$destroyHandling$1(new AqS152S0200000_5(onCompleted, c68322mC, 3)));
        }
        return view;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final AssetsModel getAssets(String str, long j) {
        return C32341Cmf.LIZ(j);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final String getAssetsPath(String str, long j) {
        return C32341Cmf.LIZJ(j, true);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final long getEffectIdWithGiftId(Gift gift, long j) {
        return C32394CnW.LIZ(gift, Long.valueOf(j));
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final InterfaceC32073CiL getGiftInterceptor(long j, boolean z) {
        return new C32462Coc();
    }

    /* JADX WARN: Code restructure failed: missing block: B:6:0x0015, code lost:
    
        if (r6 != null) goto L8;
     */
    @Override // com.bytedance.android.live.gift.IGiftService
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public final com.bytedance.ies.sdk.widgets.LiveWidget getGiftWidget(com.bytedance.android.livesdkapi.session.EnterRoomConfig r8, com.bytedance.ies.sdk.widgets.RecyclableWidgetManager r9) {
        /*
            r7 = this;
            com.bytedance.android.livesdk.livesetting.performance.LiveRecycleWidgetV2RevenueSetting r0 = com.bytedance.android.livesdk.livesetting.performance.LiveRecycleWidgetV2RevenueSetting.INSTANCE
            boolean r0 = r0.getValue()
            if (r0 == 0) goto L43
            r6 = 0
            if (r9 == 0) goto L26
            java.lang.Class<com.bytedance.android.livesdk.widgets.giftwidget.GiftWidget> r1 = com.bytedance.android.livesdk.widgets.giftwidget.GiftWidget.class
            X.Clq r0 = X.C32290Clq.LJLIL
            com.bytedance.ies.sdk.widgets.LiveRecyclableWidget r6 = r9.getRecyclableWidgetFromCacheOrNew(r1, r6, r0)
            com.bytedance.android.livesdk.widgets.giftwidget.GiftWidget r6 = (com.bytedance.android.livesdk.widgets.giftwidget.GiftWidget) r6
            if (r6 == 0) goto L26
        L17:
            X.Clb r5 = new X.Clb
            r5.<init>()
            com.bytedance.android.livesdk.livesetting.gift.LiveGiftPanelCacheOptSettings r1 = com.bytedance.android.livesdk.livesetting.gift.LiveGiftPanelCacheOptSettings.INSTANCE
            boolean r0 = r1.enable()
            if (r0 != 0) goto L27
        L24:
            r6.LLFII = r5
        L26:
            return r6
        L27:
            r0 = 0
            r5.LIZ = r0
            X.5H3<X.T0k> r0 = X.C32275Clb.LIZJ
            java.lang.Object r4 = r0.getValue()
            X.T0k r4 = (X.AbstractC73946T0k) r4
            Y.ARunnableS41S0100000_5 r3 = new Y.ARunnableS41S0100000_5
            r0 = 222(0xde, float:3.11E-43)
            r3.<init>(r5, r0)
            long r1 = r1.firstFetchDelay()
            java.util.concurrent.TimeUnit r0 = java.util.concurrent.TimeUnit.SECONDS
            r4.LIZJ(r3, r1, r0)
            goto L24
        L43:
            com.bytedance.android.livesdk.widgets.giftwidget.GiftWidget r6 = new com.bytedance.android.livesdk.widgets.giftwidget.GiftWidget
            r6.<init>()
            goto L17
        */
        throw new UnsupportedOperationException("Method not decompiled: com.bytedance.android.livesdk.GiftServiceKt.getGiftWidget(com.bytedance.android.livesdkapi.session.EnterRoomConfig, com.bytedance.ies.sdk.widgets.RecyclableWidgetManager):com.bytedance.ies.sdk.widgets.LiveWidget");
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final boolean isAssetsDownloaded(String str, long j) {
        C32221Ckj.LIZIZ().getClass();
        return C32366Cn4.LJFF().LIZ(C32341Cmf.LIZ(j));
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void monitorBroadcastMonitor(long j, boolean z) {
        String str;
        Long valueOf = Long.valueOf(j);
        BZI LIZ = C28787BRn.LIZ("receive_announcements");
        LIZ.LJIIZILJ();
        LIZ.LJIJJ(valueOf, "gift_id");
        LIZ.LJIJJ("gift", "reason");
        LIZ.LJIJJ(C31120CJg.LJ().getDesc(), WM7.SCENE_SERVICE);
        if (z) {
            str = "1";
        } else {
            str = CardStruct.IStatusCode.DEFAULT;
        }
        LIZ.LJIJJ(str, "is_own_send");
        LIZ.LJJIIJZLJL();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void openGiftDialog(String str, C06070Lr c06070Lr) {
        EnumC29607Bjf enumC29607Bjf;
        C73943T0h LIZ = C73943T0h.LIZ();
        if (o.LJ("gift", str)) {
            enumC29607Bjf = EnumC29607Bjf.GIFT;
        } else {
            enumC29607Bjf = EnumC29607Bjf.PROP;
        }
        C29428Bgm c29428Bgm = new C29428Bgm(enumC29607Bjf);
        if (c06070Lr != null) {
            String str2 = c06070Lr.LIZ;
            if (str2 != null) {
                c29428Bgm.LIZJ = str2;
            }
            Long l = c06070Lr.LIZIZ;
            if (l != null) {
                c29428Bgm.LIZIZ = l.longValue();
            }
            Long l2 = c06070Lr.LIZJ;
            if (l2 != null) {
                c29428Bgm.LIZLLL = l2.longValue();
            }
            Boolean bool = c06070Lr.LIZLLL;
            if (bool != null) {
                c29428Bgm.LJII = bool.booleanValue();
            }
            Boolean bool2 = c06070Lr.LJ;
            if (bool2 != null) {
                c29428Bgm.LJIIIIZZ = bool2.booleanValue();
            }
            User user = c06070Lr.LJFF;
            if (user != null) {
                c29428Bgm.LJIIJ = user;
            }
        }
        LIZ.LIZIZ(c29428Bgm);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void playGiftVideo(long j, InterfaceC32308Cm8 interfaceC32308Cm8) {
        C31588CaW c31588CaW = new C31588CaW();
        GiftMessage giftMessage = new GiftMessage();
        CommonMessageData commonMessageData = new CommonMessageData();
        commonMessageData.roomId = 0L;
        commonMessageData.messageId = C30725C4b.LIZ();
        commonMessageData.createTime = System.currentTimeMillis();
        giftMessage.baseMessage = commonMessageData;
        giftMessage.giftId = j;
        giftMessage.LJLILLLLZI = true;
        giftMessage.isLocalInsertMsg = true;
        giftMessage.LJLIL = true;
        giftMessage.fromUser = C05200Ii.LIZIZ();
        c31588CaW.LIZ = giftMessage;
        C73943T0h.LIZ().LIZIZ(c31588CaW);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void sendGiftInternal(Context context, C15940ju sendGiftParams) {
        o.LJIIIZ(sendGiftParams, "sendGiftParams");
        C32694CsM.LJJIJIIJI = SystemClock.uptimeMillis();
        if (sendGiftParams.LJIILL == null) {
            sendGiftParams.LJIILL = Integer.valueOf(C32129CjF.LIZ.LJIIIIZZ);
        }
        C73943T0h.LIZ().LIZIZ(new C32299Clz(sendGiftParams));
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void setGiftAnimationEngine(EnumC31997Ch7 enumC31997Ch7, InterfaceC32103Cip interfaceC32103Cip) {
        HashMap hashMap = (HashMap) C31989Cgz.LIZ;
        if (!hashMap.containsKey(enumC31997Ch7)) {
            hashMap.put(enumC31997Ch7, interfaceC32103Cip);
            return;
        }
        StringBuilder LIZ = X1D.LIZ();
        LIZ.append("GiftType ");
        LIZ.append(enumC31997Ch7);
        LIZ.append(" already has been set, or you should call release firstly.");
        throw new Exception(X1D.LIZIZ(LIZ));
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void showGiftBannedPopup(Context context, boolean z) {
        String LJIILJJIL;
        String LJIILJJIL2;
        o.LJIIIZ(context, "context");
        C32289Clp c32289Clp = new C32289Clp(context, z);
        if (c32289Clp.LIZIZ) {
            LJIILJJIL = C15380j0.LJIILJJIL(R.string.nhe);
        } else {
            LJIILJJIL = C15380j0.LJIILJJIL(R.string.nh9);
        }
        String helpCenterString = C15380j0.LJIILJJIL(R.string.nhg);
        SpannableStringBuilder messageSpannable = new SpannableStringBuilder(LJIILJJIL).append((CharSequence) "\n\n").append((CharSequence) helpCenterString).append((CharSequence) " >");
        o.LJIIIIZZ(messageSpannable, "messageSpannable");
        o.LJIIIIZZ(helpCenterString, "helpCenterString");
        int LJJLIIJ = s.LJJLIIJ(messageSpannable, helpCenterString, 6);
        messageSpannable.setSpan(new IDCSpanS31S0100000_5(c32289Clp, 12), LJJLIIJ, messageSpannable.length(), 18);
        messageSpannable.setSpan(new ForegroundColorSpan(C15380j0.LIZIZ(R.color.c1)), LJJLIIJ, messageSpannable.length(), 18);
        Drawable LJI = C15380j0.LJI(R.drawable.cw7);
        if (LJI != null) {
            LJI.setBounds(0, 0, C15380j0.LIZ(10.0f), C15380j0.LIZ(10.0f));
            messageSpannable.setSpan(new ImageSpan(LJI, 2), s.LJJLIIJ(messageSpannable, " >", 6), messageSpannable.length(), 17);
        }
        C23010vJ.LIZJ(c32289Clp.LIZ, messageSpannable, LJJLIIJ, messageSpannable.length(), 33, 3, 600);
        C47071t1 c47071t1 = new C47071t1(c32289Clp.LIZ);
        if (c32289Clp.LIZIZ) {
            LJIILJJIL2 = C15380j0.LJIILJJIL(R.string.nhh);
        } else {
            LJIILJJIL2 = C15380j0.LJIILJJIL(R.string.nhb);
        }
        c47071t1.LIZJ = LJIILJJIL2;
        c47071t1.LJII(messageSpannable);
        c47071t1.LJIIIIZZ(R.string.ngx);
        c47071t1.LJIIL(R.string.nhd, new IDcS170S0100000_5(c32289Clp, 37));
        LiveDialog LIZ = c47071t1.LIZ();
        if (new C03880Dg(2).LIZJ(300000, "com/bytedance/android/live/design/app/LiveDialog", "show", LIZ, new Object[0], "void", new C65300Pk0(false, "()V", "-8971896567525173893")).LIZ) {
            return;
        }
        LIZ.show();
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void downloadAssets(long j, InterfaceC32416Cns interfaceC32416Cns, int i) {
        Long valueOf = Long.valueOf(j);
        HashMap hashMap = new HashMap();
        if (valueOf != null) {
            C32405Cnh LIZIZ = C32221Ckj.LIZIZ();
            long longValue = valueOf.longValue();
            LIZIZ.getClass();
            C32366Cn4.LIZIZ(longValue, interfaceC32416Cns, i, hashMap, null);
        }
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final GiftMessage getGiftMessage(long j, SendGiftResult sendGiftResult, User user) {
        return C32459CoZ.LIZIZ(j, sendGiftResult, null, user);
    }

    /* JADX WARN: Multi-variable type inference failed */
    @Override // com.bytedance.android.live.gift.IGiftService
    public final void initGiftBannedManager(Room room, DataChannel dataChannel, boolean z) {
        GiftSuspension giftSuspension;
        O o;
        C31593Cab.LIZIZ = Boolean.valueOf(z);
        C31593Cab.LIZJ();
        if (dataChannel != null) {
            if (room != null) {
                o = room.giftSuspension;
            } else {
                o = 0;
            }
            ((C32537Cpp) dataChannel.gv0(C31586CaU.class)).LIZ = o;
        }
        if (room != null && (giftSuspension = room.giftSuspension) != null) {
            int i = giftSuspension.status;
            if (i == 1 || i == 3) {
                long LIZIZ = giftSuspension.endTime - (C30725C4b.LIZIZ() / 1000);
                if (LIZIZ > 0) {
                    CountDownTimerC31584CaS countDownTimerC31584CaS = new CountDownTimerC31584CaS(LIZIZ * 1000, giftSuspension, dataChannel);
                    C31593Cab.LIZ = countDownTimerC31584CaS;
                    countDownTimerC31584CaS.start();
                    return;
                }
                giftSuspension.status = 0;
            }
        }
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void loadBehavior(Context context, DataChannel dataChannel, int i) {
        Room room;
        BJI.LIZ = SystemClock.uptimeMillis();
        EnumC30204BtI enumC30204BtI = EnumC30204BtI.FAST_GIFT;
        if (i == enumC30204BtI.ordinal()) {
            if (context != null) {
                enumC30204BtI.load(dataChannel, new C32324CmO(context));
                return;
            }
            return;
        }
        EnumC30204BtI enumC30204BtI2 = EnumC30204BtI.GIFT;
        if (i == enumC30204BtI2.ordinal()) {
            if (dataChannel == null) {
                return;
            }
            enumC30204BtI2.load(dataChannel, new C32603Cqt(dataChannel));
            return;
        }
        EnumC30204BtI enumC30204BtI3 = EnumC30204BtI.DUMMY_GIFT;
        if (i == enumC30204BtI3.ordinal()) {
            enumC30204BtI3.load(dataChannel, new C31594Cac(dataChannel));
            return;
        }
        EnumC30204BtI enumC30204BtI4 = EnumC30204BtI.DUMMY_FAST_GIFT;
        if (i != enumC30204BtI4.ordinal()) {
            return;
        }
        C31595Cad c31595Cad = new C31595Cad(dataChannel);
        if (dataChannel == null || (room = (Room) dataChannel.kv0(RoomChannel.class)) == null || GiftManager.inst().getFastGift(room.getId()) == null) {
            return;
        }
        enumC30204BtI4.load(dataChannel, c31595Cad);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void sendFansClubJoinGift(DataChannel dataChannel, InterfaceC32497CpB interfaceC32497CpB, String str) {
        Room room;
        boolean z;
        boolean z2;
        String str2;
        if (dataChannel != null) {
            room = (Room) dataChannel.kv0(RoomChannel.class);
        } else {
            room = null;
        }
        Gift fansClubJoinGift = GiftManager.inst().getFansClubJoinGift();
        if (fansClubJoinGift == null || room == null) {
            return;
        }
        String str3 = "click";
        if (LiveGiftSenderRefactorV1Setting.INSTANCE.enable()) {
            UVW uvw = UVW.LJI;
            User owner = room.getOwner();
            o.LJIIIIZZ(owner, "room.owner");
            C32822CuQ LIZ = U5H.LIZ(owner);
            if (str == null) {
                str2 = "";
            } else {
                str2 = str;
            }
            uvw.LIZ(new C32280Clg(fansClubJoinGift, room, LIZ, str2, V16.LJIIJ(room, dataChannel), interfaceC32497CpB), null, null, null, null, null);
        } else {
            C32805Cu9 c32805Cu9 = new C32805Cu9(fansClubJoinGift.id, 1, true, room, 0, new C73026SlK(EnumC32737Ct3.FANS_CLUB_JOIN_GIFT, EnumC76934UHi.ANCHOR));
            if (fansClubJoinGift.type != 1) {
                z = true;
            } else {
                z = false;
            }
            c32805Cu9.LJIILL = z;
            c32805Cu9.LJIJI = "click";
            c32805Cu9.LJIJJLI = fansClubJoinGift.isBroadcastGift;
            c32805Cu9.LJIIIZ = fansClubJoinGift.diamondCount;
            c32805Cu9.LJIJJ = CardStruct.IStatusCode.DEFAULT;
            c32805Cu9.LJIILJJIL = str;
            User owner2 = room.getOwner();
            o.LJIIIIZZ(owner2, "room.owner");
            c32805Cu9.LJIILIIL = U5H.LIZ(owner2);
            c32805Cu9.LJJJ = interfaceC32497CpB;
            c32805Cu9.LJIL = fansClubJoinGift.isEffectBEFView;
            C32796Cu0.LIZIZ(dataChannel, c32805Cu9);
        }
        C32785Ctp c32785Ctp = C32785Ctp.LJIILIIL;
        Long valueOf = Long.valueOf(fansClubJoinGift.id);
        if (fansClubJoinGift.type == 2) {
            z2 = true;
        } else {
            z2 = false;
        }
        if (C88133YiP.LIZ.LIZ) {
            str3 = "call";
        }
        c32785Ctp.LJJIFFI(valueOf, z2, str, str3, 0, 0, 0L, null, null);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void sendGiftForBecomeGuest(long j, Room room, DataChannel dataChannel) {
        boolean z;
        boolean z2;
        o.LJIIIZ(room, "room");
        o.LJIIIZ(dataChannel, "dataChannel");
        Gift findGiftById = GiftManager.inst().findGiftById(j);
        if (findGiftById == null) {
            findGiftById = new Gift();
            findGiftById.id = j;
        }
        String str = "click";
        if (LiveGiftSenderRefactorV1Setting.INSTANCE.enable()) {
            UVW uvw = UVW.LJI;
            User owner = room.getOwner();
            o.LJIIIIZZ(owner, "room.owner");
            uvw.LIZ(new C32278Cle(findGiftById, room, U5H.LIZ(owner), V16.LJIIJ(room, dataChannel)), null, null, null, null, null);
        } else {
            C32805Cu9 c32805Cu9 = new C32805Cu9(findGiftById.id, 1, true, room, 0, new C73026SlK(EnumC32737Ct3.SEND_BECOME_GIFT, EnumC76934UHi.ANCHOR));
            if (findGiftById.type != 1) {
                z = true;
            } else {
                z = false;
            }
            c32805Cu9.LJIILL = z;
            c32805Cu9.LJIJI = "click";
            c32805Cu9.LJIJJLI = findGiftById.isBroadcastGift;
            c32805Cu9.LJIIIZ = findGiftById.diamondCount;
            c32805Cu9.LJIJJ = CardStruct.IStatusCode.DEFAULT;
            c32805Cu9.LJIILJJIL = "guest_prioritized_request";
            User owner2 = room.getOwner();
            o.LJIIIIZZ(owner2, "room.owner");
            c32805Cu9.LJIILIIL = U5H.LIZ(owner2);
            c32805Cu9.LJIL = findGiftById.isEffectBEFView;
            C32796Cu0.LIZIZ(dataChannel, c32805Cu9);
        }
        C32785Ctp c32785Ctp = C32785Ctp.LJIILIIL;
        Long valueOf = Long.valueOf(findGiftById.id);
        if (findGiftById.type == 2) {
            z2 = true;
        } else {
            z2 = false;
        }
        if (C88133YiP.LIZ.LIZ) {
            str = "call";
        }
        c32785Ctp.LJJIFFI(valueOf, z2, "send_become_guest", str, 0, 0, 0L, null, null);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final boolean shouldShowPostRechargeRetentionSheet(C77446UaQ event, long j, int i) {
        boolean z;
        boolean z2;
        boolean z3;
        o.LJIIIZ(event, "event");
        LiveGiftPostRechargeRetentionSetting liveGiftPostRechargeRetentionSetting = LiveGiftPostRechargeRetentionSetting.INSTANCE;
        if (!liveGiftPostRechargeRetentionSetting.isEnabled()) {
            return false;
        }
        if (liveGiftPostRechargeRetentionSetting.getRetentionType() == 1) {
            z = true;
        } else {
            z = false;
        }
        Gift findGiftById = findGiftById(j);
        if (findGiftById == null) {
            return false;
        }
        if (i >= findGiftById.diamondCount) {
            z2 = true;
        } else {
            z2 = false;
        }
        if (Keva.getRepo("post_recharge_retention").getInt("sheet_close_count", 0) < liveGiftPostRechargeRetentionSetting.getMaxSheetCloseCount()) {
            z3 = true;
        } else {
            z3 = false;
        }
        Boolean bool = event.LIZ;
        o.LJIIIIZZ(bool, "event.isSuccess");
        if (!bool.booleanValue()) {
            return false;
        }
        Boolean bool2 = event.LIZLLL;
        o.LJIIIIZZ(bool2, "event.isFromInsufficient");
        if (!bool2.booleanValue() || !z || !z2 || !z3) {
            return false;
        }
        return true;
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void syncAssetList(int i, ArrayList<Long> arrayList, InterfaceC32013ChN interfaceC32013ChN) {
        long j;
        ArrayList arrayList2;
        Room room = (Room) DataChannelGlobal.LJLJJI.mv0(C29044Baa.class);
        if (room != null) {
            j = room.getId();
        } else {
            j = 0;
        }
        if (arrayList != null) {
            arrayList2 = new ArrayList(ORZ.LJLL(arrayList));
        } else {
            arrayList2 = null;
        }
        C32341Cmf.LJFF(i, j, arrayList2, interfaceC32013ChN);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void toggleGiftBehavior(Context context, DataChannel dataChannel, boolean z) {
        if (z) {
            EnumC30204BtI.DUMMY_GIFT.unload(dataChannel);
            EnumC30204BtI.DUMMY_FAST_GIFT.unload(dataChannel);
            loadBehavior(context, dataChannel, EnumC30204BtI.GIFT.ordinal());
            if (!LiveFastGiftIconHideSetting.INSTANCE.getValue()) {
                loadBehavior(context, dataChannel, EnumC30204BtI.FAST_GIFT.ordinal());
                return;
            }
            return;
        }
        EnumC30204BtI.GIFT.unload(dataChannel);
        EnumC30204BtI.FAST_GIFT.unload(dataChannel);
        loadBehavior(context, dataChannel, EnumC30204BtI.DUMMY_GIFT.ordinal());
        if (LiveFastGiftIconHideSetting.INSTANCE.getValue()) {
            return;
        }
        loadBehavior(context, dataChannel, EnumC30204BtI.DUMMY_FAST_GIFT.ordinal());
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void syncGiftList(AbstractC32474Coo abstractC32474Coo, long j, int i, boolean z) {
        GiftManager.inst().giftRepository.LIZ(i, j, abstractC32474Coo, "", z);
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void monitorGiftIconShow(boolean z, EnumC31118CJe reason, String userType, String iconShowPosition, int i) {
        String str;
        String str2;
        String str3;
        o.LJIIIZ(reason, "reason");
        o.LJIIIZ(userType, "userType");
        o.LJIIIZ(iconShowPosition, "iconShowPosition");
        if (i > 0) {
            str = "1";
        } else {
            str = CardStruct.IStatusCode.DEFAULT;
        }
        long uptimeMillis = SystemClock.uptimeMillis() - BJI.LIZ;
        BZI LIZ = C28787BRn.LIZ("gift_icon_show");
        LIZ.LJIJJ(Integer.valueOf(z ? 1 : 0), "is_click_available");
        if (!z) {
            str2 = reason.getDescription();
        } else {
            str2 = "";
        }
        LIZ.LJIJJ(str2, "un_available_click_reason");
        LIZ.LJIJJ(userType, "user_type");
        LIZ.LJIJJ(iconShowPosition, "icon_show_position");
        if (C15380j0.LJIILLIIL()) {
            str3 = "portrait";
        } else {
            str3 = "landscape";
        }
        LIZ.LJIJJ(str3, "room_orientation");
        LIZ.LJIJJ(str, "is_guest_connection");
        LIZ.LJIJJ(Long.valueOf(uptimeMillis), "room_enter_to_show_duration");
        LIZ.LIZLLL(C28835BTj.LIZJ("user_live_duration"));
        LIZ.LJIIZILJ();
        if (!BuriedFieldReductionSetting.INSTANCE.isBuriedField(LIZ.LJIILL())) {
            LIZ.LJJIIJZLJL();
        } else {
            LIZ.LJJIJ();
            LIZ.LJJIIZI();
        }
    }

    @Override // com.bytedance.android.live.gift.IGiftService
    public final void sendGiftPoll(long j, long j2, Room room, DataChannel dataChannel, Z8D z8d) {
        boolean z;
        boolean z2;
        int i;
        boolean z3;
        o.LJIIIZ(room, "room");
        o.LJIIIZ(dataChannel, "dataChannel");
        String str = "click";
        if (LiveGiftSenderRefactorV1Setting.INSTANCE.enable()) {
            Gift findGiftById = GiftManager.inst().findGiftById(j);
            if (findGiftById == null) {
                findGiftById = new Gift();
                findGiftById.id = j;
            }
            UVW uvw = UVW.LJI;
            User owner = room.getOwner();
            o.LJIIIIZZ(owner, "room.owner");
            uvw.LIZ(new C32279Clf(findGiftById, room, U5H.LIZ(owner), V16.LJIIJ(room, dataChannel), j2, z8d), null, null, null, null, null);
        } else {
            Gift findGiftById2 = GiftManager.inst().findGiftById(j);
            C32805Cu9 c32805Cu9 = new C32805Cu9(j, 1, false, room, 0, new C73026SlK(EnumC32737Ct3.GIFT_POLL, EnumC76934UHi.ANCHOR));
            if (findGiftById2 != null && findGiftById2.type == 1) {
                z = true;
            } else {
                z = false;
            }
            c32805Cu9.LJIILL = true ^ z;
            c32805Cu9.LJIJI = "click";
            if (findGiftById2 != null) {
                z2 = findGiftById2.isBroadcastGift;
            } else {
                z2 = false;
            }
            c32805Cu9.LJIJJLI = z2;
            if (findGiftById2 != null) {
                i = findGiftById2.diamondCount;
            } else {
                i = 0;
            }
            c32805Cu9.LJIIIZ = i;
            c32805Cu9.LJIJJ = CardStruct.IStatusCode.DEFAULT;
            User owner2 = room.getOwner();
            o.LJIIIIZZ(owner2, "room.owner");
            c32805Cu9.LJIILIIL = U5H.LIZ(owner2);
            c32805Cu9.LJIILJJIL = "quick_poll";
            c32805Cu9.LJJIL = z8d;
            if (findGiftById2 != null) {
                z3 = findGiftById2.isEffectBEFView;
            } else {
                z3 = false;
            }
            c32805Cu9.LJIL = z3;
            c32805Cu9.LJJIJLIJ = j2;
            C32796Cu0.LIZIZ(dataChannel, c32805Cu9);
        }
        if (C88133YiP.LIZ.LIZ) {
            str = "call";
        }
        InterfaceC30442Bx8.LIZLLL.LIZ(Long.valueOf(j2));
        C32785Ctp.LJIILIIL.LJJIFFI(Long.valueOf(j), false, "quick_poll", str, 0, 0, 0L, null, null);
    }
}
